import"https://app.framerstatic.com/chunk-J6WKJOYL.js";import{a as tn,b as nn,c as rn}from"https://app.framerstatic.com/chunk-FXZU65X7.js";import{a as Vt}from"https://app.framerstatic.com/chunk-HWEWYXXD.js";import{a as et,b as nt,c as ot,e as qe,j as en}from"https://app.framerstatic.com/chunk-KUZRVRYT.js";import{a as Je,b as Ie,f as jt,h as Zt}from"https://app.framerstatic.com/chunk-TPYBAQ5I.js";import{c as kt,d as Ot,f as At,m as Wt,n as Be}from"https://app.framerstatic.com/chunk-DOO6DXVI.js";import{a as Xt,b as Yt,d as Qt,e as _t,g as $t,i as Kt,j as Jt}from"https://app.framerstatic.com/chunk-5NN5SU4D.js";import{P as zt,c as Fe,e as le,ea as Bt,f as Ut,ia as ze,ka as Gt}from"https://app.framerstatic.com/chunk-ZMLT2JJO.js";import"https://app.framerstatic.com/chunk-A2XM7CWL.js";import{a as tt,b as rt}from"https://app.framerstatic.com/chunk-LRFMZAIA.js";import{a as Ke,i as Ft,l as qt}from"https://app.framerstatic.com/chunk-HQOK6ZU2.js";import{$g as re,An as Et,Bo as Dt,Cc as yt,Dk as Mt,Ed as St,G as q,Gh as ce,Go as he,Hd as Nt,Ja as mt,Kc as de,Kd as ne,Ld as xt,Lh as wt,M as ut,O as ht,Oa as ft,Of as Ct,Tq as Pt,Va as gt,Vk as ue,Wg as Le,Y as lt,_m as Ue,ah as bt,bt as Ae,ci as Tt,fb as E,fk as It,i as x,j as b,jb as vt,ji as U,kb as Rt,lb as te,m as ct,ms as ke,qa as G,qb as De,qs as Oe,xa as Y,ya as pt}from"https://app.framerstatic.com/chunk-A6SQ7LET.js";import"https://app.framerstatic.com/chunk-CKP2GXTU.js";import"https://app.framerstatic.com/chunk-ZAVCCCEM.js";import"https://app.framerstatic.com/chunk-JE3B725U.js";import{d as Lt}from"https://app.framerstatic.com/chunk-GXINHILR.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import"https://app.framerstatic.com/chunk-M5JBPS3M.js";import{a as Ht}from"https://app.framerstatic.com/chunk-HM6PEKXQ.js";import{j as L}from"https://app.framerstatic.com/chunk-CK3XLEJS.js";import{b as Pe,d as ae}from"https://app.framerstatic.com/chunk-IEH5QJIZ.js";import"https://app.framerstatic.com/chunk-DRFNFFXK.js";import"https://app.framerstatic.com/chunk-B7OOZ5ZN.js";import{Fh as Sn,ph as yn}from"https://app.framerstatic.com/chunk-DLNMN23R.js";import"https://app.framerstatic.com/chunk-7QICEHKI.js";import"https://app.framerstatic.com/chunk-7DPOW67T.js";import"https://app.framerstatic.com/chunk-XBQHBV7C.js";import{a as dt}from"https://app.framerstatic.com/chunk-H4IIIHXS.js";import{B as st,C as at}from"https://app.framerstatic.com/chunk-V3SLPV6Z.js";import{c as _e,d as $e,f as ee,j as H}from"https://app.framerstatic.com/chunk-NEN2GU72.js";import{P as Ee,a as X,i as Me,p as A,r as it}from"https://app.framerstatic.com/chunk-LRLCEQCG.js";import{e as se,g as Te,h as Ze,i as Qe}from"https://app.framerstatic.com/chunk-G6RVR2BI.js";var W=se(dt());function on(s){return!!s&&s.type==="SandboxUpdate"}var sn=se(yn()),Ge=A("DeferredRendering");Y.setTaskWrapper(sn.unstable_batchedUpdates);var Nn=10,xn=1e3,pe=class{constructor(e,t){this.renderCanvas=e;this.onFinishedLoading=t;this.renderingPhase="Unknown";this.isReadyToRender=!1;this.nodeResourceCounters={};this.groundNodeBatches=[];this.mutableNodesDeferredRendering=new Set;this.mutableNodesLoadingResources=new Set;this.nodesDeferredRendering=new Set;this.nodesLoadingResources=new Set;this.hasScheduledUpdateCanvas=!1;this.scheduleUpdateCanvas=()=>{this.hasScheduledUpdateCanvas||(this.hasScheduledUpdateCanvas=!0,setTimeout(this.updateCanvas))};this.updateCanvas=()=>{if(this.hasScheduledUpdateCanvas=!1,!this.isReadyToRender)return;if(this.prepareNextBatch(),this.nodesDeferredRendering=new Set(this.mutableNodesDeferredRendering),this.nodesLoadingResources=new Set(this.mutableNodesLoadingResources),this.nodesLoadingResources.size>0||this.nodesDeferredRendering.size>0){Y.setPriority(4),this.renderCanvas(this.scheduleUpdateCanvas);return}let t=Y.getPriority();if(t>0){Y.hasImmediateTasksToRun()||Y.setPriority(t-1),this.renderCanvas(this.scheduleUpdateCanvas);return}this.renderingPhase="Normal",Ge.debug("finished",this.activeScopeId),this.renderCanvas(this.onFinishedLoading)};this.batchUpdateResourceLoading=lt(this.scheduleUpdateCanvas,200);this.hasGroundNodes=!1}prepareNextBatch(){let e=this.groundNodeBatches.shift();if(e!==void 0)for(let t of e)this.mutableNodesDeferredRendering.delete(t),this.mutableNodesLoadingResources.add(t)}groundNodeHasLoadedResources(e){delete this.nodeResourceCounters[e],this.mutableNodesLoadingResources.delete(e),this.nodesDeferredRendering.size===0&&this.batchUpdateResourceLoading()}setReadyToRender(e){this.isReadyToRender!==e&&(this.isReadyToRender=e,this.scheduleUpdateCanvas())}createNodeBatches(e){let t=0,n=[],r=()=>{this.groundNodeBatches.push(n),t=0,n=[]};for(let o of e)t>=xn&&r(),t+=an(o),n.push(o.id);n.length!==0&&r()}setGroundNodes(e,t,n){if(this.activeScopeId!==n&&(this.activeScopeId=n,this.renderingPhase="Deferred",Ge.debug("switching scope id:",n),this.nodeResourceCounters={},this.groundNodeBatches=[],this.mutableNodesDeferredRendering=new Set,this.mutableNodesLoadingResources=new Set,this.nodesDeferredRendering=new Set,this.nodesLoadingResources=new Set,this.hasGroundNodes=!1),this.hasGroundNodes)return;if(this.hasGroundNodes=!0,e.length===0)return this.renderingPhase="Normal",Ge.debug("finished",this.activeScopeId,"groundNodes.length === 0"),this.onFinishedLoading();let r=new Set,o=new Set;for(let i of e){let d=i.id;this.nodeResourceCounters[d]=0,this.mutableNodesDeferredRendering.add(d),t.has(d)?r.add(i):o.add(i)}this.nodesDeferredRendering=new Set(this.mutableNodesDeferredRendering),this.createNodeBatches(r),this.createNodeBatches(o),this.scheduleUpdateCanvas()}shouldTrackResources(e){let t=this.nodesLoadingResources.has(e),n=this.nodesDeferredRendering.has(e);return t&&!n}trackResourceLoading(e,t){if(this.shouldTrackResources(e)){this.nodeResourceCounters[e]++;let r=()=>{this.nodeResourceCounters[e]--,this.checkLoadingState(e)};t().then(r).catch(r)}}checkLoadingState(e){this.shouldTrackResources(e)&&this.nodeResourceCounters[e]===0&&this.groundNodeHasLoadedResources(e)}};function an(s){var t;let e=1;s instanceof he&&(e+=Nn);for(let n of(t=s.children)!=null?t:[])e+=an(n);return e}function me(s,e=2){if(s=s||0,Number.isInteger(s))return s;let t=.5*Number.EPSILON*s,n=1;for(;e-- >0;)n*=10;return s<0&&(n*=-1),Math.round((s+t)*n)/n}var ge=q.isChrome(),fe=q.isFirefox(),oe=q.isEdge(),We=q.isWebKit(),z=Ln();function Se(){return(window==null?void 0:window.devicePixelRatio)||0}var F=new DOMMatrixReadOnly;var ve=class{constructor(){this.computedStyleCache=new Map;this.sizeCache=new Map;this.boundingClientRectCache=new Map;this.matrixCache=new Map;this.transformMatrixAndOffsetCache=new Map;this.untransformedRectCache=new Map}getComputedStyle(e){let t=this.computedStyleCache.get(e);return t||(t=getComputedStyle(e),this.computedStyleCache.set(e,{display:t.display,width:t.width,height:t.height,transform:t.transform}),t)}getCachedSize(e){return e?this.sizeCache.get(e):void 0}getSize(e){let t=this.sizeCache.get(e);if(t)return t;let n=this.getComputedStyle(e),r=()=>{let u=e instanceof HTMLElement?e.offsetWidth:e.clientWidth;return n.display.startsWith("inline")?u+1:u},o=()=>e instanceof HTMLElement?e.offsetHeight:e.clientHeight,i=n.width.endsWith("px")?parseFloat(n.width):r(),d=n.height.endsWith("px")?parseFloat(n.height):o();return t={width:i||0,height:d||0},this.sizeCache.set(e,t),t}getCSSTransform(e){return this.getComputedStyle(e).transform||"none"}hasTransforms(e){return fe?this.getCSSTransform(e)!=="none":!this.getMatrix(e).isIdentity}getMatrix(e){let t=this.matrixCache.get(e);if(t)return t;let n=this.getCSSTransform(e);return t=n==="none"?F:new DOMMatrix(n),this.matrixCache.set(e,t),t}getBoundingClientRect(e){let t=this.boundingClientRectCache.get(e);return t||(t=e.getBoundingClientRect(),this.boundingClientRectCache.set(e,t),t)}getUntransformedRectInGround(e,t){let n=this.untransformedRectCache.get(e);if(n)return n;let r=this.getTransformAncestors(e),o={x:0,y:0,paintX:0,paintY:0,translationX:0,translationY:0},i=F,d={x:0,y:0,width:0,height:0};return[...r,e].forEach(a=>{let c=this.transformMatrixAndOffsetCache.get(a);if(c){o={...c.offset},i=c.matrix;return}let{width:h,height:g}=this.getSize(a),v=x(h/2,g/2),l=this.getBoundingClientRect(a),R=this.getMatrix(a),p=v.x,N=v.y,m=F.translate(p,N).multiplySelf(R).translateSelf(-p,-N),y,f=We;if(f){let ie=cn(h)/2,J=cn(g)/2,Rn=F.translate(ie,J).multiplySelf(R).translateSelf(-ie,-J);y=i.multiply(Rn)}else y=i.multiply(m);let V=x(l.x+l.width/2,l.y+l.height/2),C=U.convertPoint(t,V),M=U.convertPoint(y,v),_=0,$=0;if(f){let ie=i.multiply(m),J=U.convertPoint(ie,v);_=M.x-J.x,$=M.y-J.y}let K=C.x-M.x,P=C.y-M.y,Ce=F.translate(K,P).multiplySelf(y),B=x(C.x-_,C.y-$),k=U.convertPoint(i.inverse(),B),I=x(ye(k.x-h/2),ye(k.y-g/2)),O=x(w(I.x),w(I.y)),be=this.hasTransforms(a),He=U.hasNonTranslationTransform(R),we=Pn(a),{rect:Xe,paintDelta:Ye,translation:je}=Dn(o,I,{width:h,height:g},R,be,we);o.x+=(ge||oe)&&He&&!we.includes(0)||fe&&be?O.x:I.x,o.y+=(ge||oe)&&He&&!we.includes(1)||fe&&be?O.y:I.y,o.paintX+=Ye.x,o.paintY+=Ye.y,o.translationX+=je.x,o.translationY+=je.y,i=Ce,this.transformMatrixAndOffsetCache.set(a,{matrix:i,offset:{...o}}),this.untransformedRectCache.set(a,Xe),d=Xe}),d}getTransformAncestors(e){var r;let t=[],n=e.parentElement;for(;n!=null&&!dn(n)&&n!==((r=e.ownerDocument)==null?void 0:r.documentElement);)this.hasTransforms(n)&&t.unshift(n),n=n.parentElement;return t}getParentRelativeRect(e,t,n){let r=this.getUntransformedRectInGround(e,t),o=r,i,d,u=e instanceof HTMLElement?e.offsetParent:e.parentElement;return u&&!dn(u)?(o=this.getUntransformedRectInGround(u,t),i=r.x-o.x,d=r.y-o.y):n?(i=n.x,d=n.y):(i=0,d=0),{x:i,y:d,width:r.width,height:r.height}}};function dn(s){var e;return s.classList.contains(qe)||((e=s.parentElement)==null?void 0:e.classList.contains(qe))}function Cn(s){let e=un(s)/z,t=Se();return me(e*t,0)/t}function bn(s){return Se()<2?Math.round(ye(s)):Math.round(ye(s)*2)/2}function wn(s){let e=un(s),t=0,n=e%z,r=Math.trunc(e/z)*z;return Se()<=1?(n>=32&&(t=64),n<-32&&(t=-64)):(n>=16&&n<48&&(t=32),n>=48&&(t=64),n<-16&&n>=-24&&(t=-24),n<-24&&n>=-48&&(t=-32),n<-48&&n>=-56&&(t=-56),n<-56&&(t=-64)),(r+t)/z}function Tn(){return ge||oe?bn:We?wn:Cn}var w=Tn();function Re({x:s,y:e,width:t,height:n}){let r=w(s),o=w(e);return{x:r,y:o,width:w(s+t)-r,height:w(e+n)-o}}function cn(s){let e=Se();return me(s*e,0)/e}function ye(s){return me(s*z,0)/z}function un(s){return Math.trunc(s*z)}function In({x:s,y:e,width:t,height:n},r){let{rotation:o,translation:i}=Ve(r),d=x(s-i.x,e-i.y),u=Re({...d,width:t,height:n}),a=x(u.x+w(t)/2,u.y+w(n)/2),c=F.translate(a.x+i.x,a.y+i.y).rotateSelf(o).translateSelf(-a.x,-a.y),h=U.convertPoint(c,b.center(u)),g=h.x-u.width/2,v=h.y-u.height/2;return{paintedRect:{x:g,y:v,width:u.width,height:u.height},snappedLayoutRect:u,translation:i}}function Mn({x:s,y:e,width:t,height:n},r,o=[]){let{rotation:i,translation:d}=Ve(r);o.includes(0)&&(d.x=-.5*t),o.includes(1)&&(d.y=-.5*n);let u=x(s-d.x,e-d.y),a=Re({...u,width:t,height:n}),c=Math.round(t),h=Math.round(n),g=i!==0?c:a.width,v=i!==0?h:a.height,l=x(a.x+t/2,a.y+n/2),R=F.translate(l.x+d.x,l.y+d.y).rotateSelf(i).translateSelf(-l.x,-l.y),p=x(a.x+g/2,a.y+v/2),N=U.convertPoint(R,p),m=N.x-g/2,y=N.y-v/2;return{paintedRect:{x:m,y,width:g,height:v},snappedLayoutRect:a,translation:d}}function En(s,e,{width:t,height:n},r){let{rotation:o,translation:i}=Ve(r),d=x(e.x-i.x,e.y-i.y),u=s.x+w(d.x),a=s.y+w(d.y),c=x(u+t/2,a+n/2),h=F.translate(c.x+i.x,c.y+i.y).rotateSelf(o).translateSelf(-c.x,-c.y),g=U.convertPoint(h,x(u+t/2,a+n/2)),v=g.x-t/2,l=g.y-n/2;return{x:v,y:l,width:t,height:n}}function Dn(s,e,t,n,r,o){let i={x:0,y:0},d={x:-s.paintX,y:-s.paintY},u={x:s.translationX,y:s.translationY},a={x:s.x-u.x+e.x,y:s.y-u.y+e.y,...t};if(We){let l=Re(a),R=b.offset(l,{x:u.x+d.x,y:u.y+d.y});if(r){let{paintedRect:p,snappedLayoutRect:N,translation:m}=In(a,n),y=b.offset(p,{x:u.x+d.x,y:u.y+d.y}),f=b.offset(N,m);return i={x:f.x-p.x,y:f.y-p.y},{rect:y,paintDelta:i,translation:m}}return{rect:R,paintDelta:i,translation:{x:0,y:0}}}if(ge||oe){let l=Re(a),R=b.offset(l,{x:u.x+d.x,y:u.y+d.y});if(r){let{paintedRect:p,snappedLayoutRect:N,translation:m}=Mn(a,n,o),y=b.offset(p,{x:u.x+d.x,y:u.y+d.y}),f=b.offset(N,m);return i={x:f.x-p.x,y:f.y-p.y},{rect:y,paintDelta:i,translation:m}}return{rect:R,paintDelta:i,translation:{x:0,y:0}}}let c=s.x+e.x,h=s.y+e.y,g={x:c,y:h,...t};if(r){let l=b.offset({x:s.x+w(e.x),y:s.y+w(e.y),width:g.width,height:g.height},d),R=b.offset(En(s,e,t,n),d);return i={x:l.x-R.x,y:l.y-R.y},{rect:R,paintDelta:i,translation:{x:0,y:0}}}return{rect:b.offset(g,d),paintDelta:i,translation:{x:0,y:0}}}function Ve(s){let e=Math.atan2(s.b,s.a)*(180/Math.PI),t={x:s.e,y:s.f};return{rotation:e,translation:t}}function Pn(s){let e=[];return s instanceof HTMLElement&&(s.dataset.framerLayoutHintCenterX&&e.push(0),s.dataset.framerLayoutHintCenterY&&e.push(1)),e}function Ln(){return fe?60:oe?100:64}var D=A("LayoutMeasureQueue"),kn=new DOMMatrixReadOnly,hn=q.isFirefox()?1:0,j=class{constructor(e){this.measureRequests=new Map;this.measureRequestsNodeIds=new Set;this.refinementRequests=new Map;this.refinementRequestsByGroundNodeId=new Map;this.richTextNodeIds=new Set;this.previousScopeNodeId="";this.resizeObserver=null;this.shouldMeasureTimerStarted=!1;this.shouldMeasureCallback=void 0;this.runShouldMeasureCallback=()=>{this.shouldMeasureTimerStarted=!1,this.size()!==0&&this.shouldMeasureCallback&&this.shouldMeasureCallback()};this.resized=(e,t)=>{if(this.resizeObserver===t)for(let n of e){let r=n.target;if(!r.isConnected||!r.id)return;this.add(re(r.id),r)}};this.shouldMeasureCallback=e}add(e,t,n){D.trace("layout measure queue:",e),!(!n&&this.measureRequests.has(t))&&(this.measureRequests.set(t,{nodeId:e,children:n}),this.measureRequestsNodeIds.add(e),this.shouldMeasureCallback&&!this.shouldMeasureTimerStarted&&(setTimeout(this.runShouldMeasureCallback,100),this.shouldMeasureTimerStarted=!0))}stylePresetChanged(e){for(let t of this.richTextNodeIds)this.remeasureNodeAndAncestors(e,e.get(t));this.richTextNodeIds.clear()}remeasureNodeAndAncestors(e,t){t&&(this.measureRequestsNodeIds.has(t.id)||(t.cache.htmlElement&&this.add(t.id,t.cache.htmlElement),this.remeasureNodeAndAncestors(e,e.getNodeParent(t))))}remeasureAutosizingAncestors(e,t){if(t){if(St(t))for(let n of t.children)n.cache.htmlElement&&(this.measureRequestsNodeIds.has(n.id)||(D.trace("remeasureAutosizingAncestors, stack child:",n.id),this.add(n.id,n.cache.htmlElement)));De(t)&&(t.widthType!==2&&t.heightType!==2||t.cache.htmlElement&&(this.measureRequestsNodeIds.has(t.id)||(D.trace("remeasureAutosizingAncestors:",t.id),this.add(t.id,t.cache.htmlElement),this.remeasureAutosizingAncestors(e,e.getNodeParent(t)))))}}process({scopeId:e,zoom:t,offsetX:n,offsetY:r,tree:o,groundNodesInViewport:i}){var N;this.previousScopeNodeId!==e&&(D.debug("switching to a new page",this.previousScopeNodeId,e),this.richTextNodeIds.clear(),this.refinementRequests.clear(),this.refinementRequestsByGroundNodeId.clear(),ln(o.get(this.previousScopeNodeId)),this.previousScopeNodeId=e,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(this.resized));let d=this.previousZoomLevel!==void 0&&t!==this.previousZoomLevel;this.previousZoomLevel=t;let u=this.previousGroundNodesInViewport!==void 0&&i!==this.previousGroundNodesInViewport,a=new Set([...i]),c=new Set;if(this.previousGroundNodesInViewport!==void 0)for(let m of i)this.previousGroundNodesInViewport.has(m)&&(a.delete(m),c.add(m));if(this.previousGroundNodesInViewport=i,u&&this.processRefinementRequests(a),(u||d)&&t>hn&&this.processRefinementRequests(c),D.trace("process:",this.size()),this.size()===0)return[];let h=L.isOn("nodeBasedRenderer"),g=kn.scale(t).translateSelf(-n,-r),v=[],l=new Map,R=new ve;for(let[m,y]of this.measureRequests){let f=o.getNode(y.nodeId);f&&this.remeasureAutosizingAncestors(o,o.getNodeParent(f))}let p=On(this.measureRequests.values(),o,g);for(let[m,y]of this.measureRequests){let{nodeId:f,children:V}=y,C=o.getNode(f);if(!C)continue;if(!m.isConnected){D.trace("measureRequest: not connected",f);continue}let M=p.get(f);C.cache.htmlElement=m;let _=M.matrix,$=M.rect;if(!i.has(M.id)){this.addRefinementRequest(f,{element:m,groundNodeId:M.id,measureRequest:y}),D.trace("measureRequest: refine",f);continue}let K;if(V){K=[];for(let B of V){if(Qt(B))continue;let k=re(B.id),I=l.get(B);if(!I&&(I=R.getParentRelativeRect(B,_,$),l.set(B,I),k)){let O=o.getNode(k);O&&(O.cache.needsMeasure=!1),v.push({nodeId:k,layoutMetrics:I})}if(k){let O=o.getNode(k);if(O&&!Tt(O,C))continue}K.push(I)}}let P=l.get(m);P?D.trace("measureRequest: cached",f,P):(P=R.getParentRelativeRect(m,_,$),l.set(m,P),D.trace("measureRequest: getParentRelativeRect",f,P)),t<=hn&&this.addRefinementRequest(f,{element:m,groundNodeId:M.id,measureRequest:y});let Ce={...P,childrenRects:K};C&&(C.cache.needsMeasure=!1,ne(C)?this.richTextNodeIds.add(f):xt(C)&&((N=this.resizeObserver)==null||N.observe(m)),h&&(C.cache.domRect=P)),v.push({nodeId:f,layoutMetrics:Ce})}return this.measureRequests.clear(),this.measureRequestsNodeIds.clear(),v}size(){return this.measureRequests.size}addRefinementRequest(e,t){let n=this.refinementRequests.get(e);if(n&&n.groundNodeId){let r=this.refinementRequestsByGroundNodeId.get(n.groundNodeId);r==null||r.delete(n)}if(this.refinementRequests.set(e,t),t.groundNodeId){let r=this.refinementRequestsByGroundNodeId.get(t.groundNodeId);r||(r=new Set,this.refinementRequestsByGroundNodeId.set(t.groundNodeId,r)),r.add(t)}}processRefinementRequests(e){for(let t of e){let n=this.refinementRequestsByGroundNodeId.get(t);if(!(!n||n.size===0)){for(let r of n)this.refinementRequests.delete(r.measureRequest.nodeId),r.element.isConnected&&(this.measureRequestsNodeIds.has(r.measureRequest.nodeId)||(D.trace("refine:",r.measureRequest.nodeId),this.measureRequests.set(r.element,r.measureRequest)));n.clear()}}}};function On(s,e,t){var o;let n=new Map,r=new Map;for(let{nodeId:i}of s){let d=t,u=e.get(i),a=[],c=u;for(;c&&e.getParent(c.id);){let h=r.get(c.id);if(h){c=e.get(h);break}c=e.getParent(c.id),c&&a.push(c.id)}if(c&&De(c)){d=((o=n.get(c.id))==null?void 0:o.matrix)||d.translate(c.left||0,c.top||0).inverse();for(let g of a)r.set(g,c.id)}else d=d.inverse();n.set(i,{id:c==null?void 0:c.id,matrix:d,rect:c?ue(c):null})}return n}function ln(s){if(!s)return;s.cache.htmlElement=null;let e=s.children;if(e)for(let t of e)ln(t)}var Ne=class{constructor(){this.componentLoaderStateEmitter=new H;this.componentLoaderStateStream=this.componentLoaderStateEmitter.newStream;this.componentLoaderStateEmitter.emit({type:"fullStateSync",hash:"initial",state:E.getSerializableState()})}emitComponentLoaderStateEvent(e){this.componentLoaderStateEmitter.emit(e)}async queryData(e){var r;let t=E.componentForIdentifier(e.identifier);if(!t||!gt(t))throw Error("Invalid identifier for data entity");let n=t.class;if(e.id&&Array.isArray(n)){let o=(r=t.annotations)==null?void 0:r.framerRecordIdKey;o&&(n=n.find(i=>i[o]===e.id))}return{data:An(e.fields,n)}}};function An(s,e){if(!e)return[];Array.isArray(e)||(e=[e]);let t=s.map(n=>{let r=n.split(".");if(r.length===1){let o=r[0];return i=>i[o]}return o=>{for(let i of r){let d=o[i];if(!ae(d))return;o=d}return o}});return e.map(n=>{let r={};for(let o=0;o<s.length;o++)r[s[o]]=t[o](n);return r})}function pn(s,e){let n=performance.now(),r=0,o=(...i)=>{performance.now()-n>60?(r=void 0,s(...i)):r=setTimeout(o,60,...i)};return(...i)=>{r&&clearTimeout(r),r=setTimeout(o,e,...i)}}function mn(s){let e=new j;for(let t of s){let n=document.getElementById(bt(t.id));n&&e.add(t.id,n,Fn(t,n))}return e}function Fn(s,e){return s instanceof he?ut(e):[]}var Z=se(dt()),fn=se(Sn());function zn({resolve:s,children:e}){return(0,Z.useLayoutEffect)(s),Z.default.createElement(Z.default.Fragment,null,e)}async function gn(s){let e=document.createElement("div");e.style.visibility="hidden",e.style.position="absolute",e.style.pointerEvents="none",document.body.appendChild(e);let t=(0,fn.createRoot)(e),n={},r=s.map(i=>{let d=i.clone({...wt,textFitViewBoxSize:void 0,widthType:2,heightType:2,width:void 0,height:void 0});return n[d.id]=i.id,i.forceNeedsMeasure(),Kt($t,{node:d,groundNode:null,scopeNode:null,cachePath:[],forceRender:0})});await new Promise(i=>{t.render(Z.default.createElement(zn,{resolve:i},r))});let o=[];for(let i of e.children){let{clientWidth:d,clientHeight:u,id:a}=i,c=n[re(a)];c&&o.push({nodeId:c,width:d,height:u})}return t.unmount(),document.body.removeChild(e),{measurements:o}}var S=A("canvas-sandbox"),vn=(s,e)=>new Promise((t,n)=>{setTimeout(()=>{n(Error(e))},s)}),Q,xe=class{constructor(){this.nodeBasedRenderer=!1;this.renderingStateTracker=Jt.shared();this.renderTarget="CANVAS";this.lastEngineUpdate=0;this.tree=Ae.createEmpty();this.layoutCache=new Gt;this.sandboxCollectionData=new zt("sandbox");this.selection=[];this.imageBaseURL="";this.initialModuleUpdatesBufferState={buffering:!0,buffer:[]};this.modulesRevision=null;this.lazyModulesRevision=0;this.componentHash=null;this.loadedSomeUserData=!1;this.isInitialLoad=!0;this.isDarkMode=!1;this.scopeSwitchStartTime=0;this.scopeSwitchUpdateEndTime=0;this.scopeId="";this.groundNodes=[];this.groundNodeIdsInViewport=new Set;this.visibleRect={x:0,y:0,width:0,height:0};this.textNodeIdsToRerender=new Set;this.lastStylePresetsListNodeUpdate=0;this.measureLayoutAndEmitUpdate=()=>{let e=performance.now(),t=this.lastRendering.update,n=this.measureLayout(t),r=this.sandboxCollectionData.getUpdates(),o=n.length,i=r.length;if(o===0&&i===0)return;S.trace("measureLayoutAndEmitUpdate","layoutMeasurementCount:",o,"collectionRecordUpdateCount:",i);let d=performance.now();this.renderedUpdateEmitter.emit({update:t,updateTime:0,renderTime:d-e,renderingPhase:this.deferredRendering.renderingPhase,moduleRuntimePhase:this.modulesRuntime.phase,layoutMeasurements:n,collectionRecordUpdates:r,scopeId:this.scopeId,updateEndTime:0,renderEndTime:d,scopeSwitchStartTime:0})};this.deferredRenderingFinished=()=>{this.isLoadingResourcesPromise.resolve(),this.isInitialLoad=!1;let e=this.lastRendering.update,t=this.measureLayout(e);t.length>0&&S.trace("deferredRenderingFinished",t.length),this.renderedUpdateEmitter.emit({update:e,updateTime:0,renderTime:0,renderingPhase:"Normal",moduleRuntimePhase:this.modulesRuntime.phase,layoutMeasurements:t,collectionRecordUpdates:this.sandboxCollectionData.getUpdates(),scopeId:this.scopeId,updateEndTime:this.scopeSwitchUpdateEndTime,renderEndTime:performance.now(),scopeSwitchStartTime:this.scopeSwitchStartTime}),this.scopeSwitchStartTime&&this.scopeSwitchUpdateEndTime&&(this.scopeSwitchStartTime=0,this.scopeSwitchUpdateEndTime=0)};this.deferredRendering=new pe(e=>this.triggerRenderer(e),this.deferredRenderingFinished);this.imageLoader=new Vt((e,t)=>{let n=this.tree.get(e);if(n){let r=this.tree.getGroundNodeFor(n);this.deferredRendering.trackResourceLoading(r.id,t)}});this.performanceMode=!1;this.offsetX=0;this.offsetY=0;this.canvasZoom=1;this.liveZoom=void 0;this.inMoveTool=!1;this.renderTime=0;this.nodeWithPlaceholder=null;this.previousNodeInTextEditor=Le;this.previousNodeInPathEditor=Le;this.previousNodesInEffectPreview=[];this.previousActiveEffect=null;this.previousActiveOverlayNodes=new Set;this.controlsVisibilityService=new Wt(this);this.sandboxComponentLoaderService=new Ne;this.sandboxComponentLoader=E;this.layoutMeasureQueue=new j(this.measureLayoutAndEmitUpdate);this.modulesRuntime=new nn("waiting",this);this.forceRender=1e3;this.assetMap=new mt;this.svgRenderer=Bt.shared();this.startedHeartbeat=!1;this.emitHeartbeat=()=>{let t={},{memory:n}=performance;n&&(t.memoryTotal=n.totalJSHeapSize,t.memoryUsed=n.usedJSHeapSize,t.memoryLimit=n.jsHeapSizeLimit),t.domNodes=document.querySelectorAll("*").length,this.heartbeatEmitter.emit({vitals:t,next:1e4}),window.setTimeout(this.emitHeartbeat,1e4)};this.requestTextNodesRerender=pn(()=>{this.invalidateTextNodes(this.textNodeIdsToRerender),this.textNodeIdsToRerender.clear(),this.triggerRenderer()},250);this.viewportSize={width:800,height:800};this.updateViewportSize=()=>{let e={width:window.innerWidth||document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight};return ht(e,this.viewportSize)?!1:(this.viewportSize=e,!0)};this.renderedUpdateEmitter=new H;this.errorEmitter=new H;this.heartbeatEmitter=new H;this.needsRender=!1;this.lastRendering={update:0,scopeId:"",zoom:1,offsetX:0,offsetY:0,tree:this.tree,groundNodesInViewport:new Set};Ze(this,Q,[]);this.reportError=e=>{this.errorEmitter.emit(e)};this.isLoadingResourcesPromise=Ee();this.isTrackingUpdates=!1;this.triggerRenderer=()=>{};this.renderingStateTracker.sandboxCollectionData=this.sandboxCollectionData;let e=!1,t=Ie.service.fingerprint,n=Ie.on(ee).register({initialize:async({renderTarget:r,upgradeToMessagePortChannel:o,treeVersion:i})=>{if(this.renderTarget=r,e=o,i!==Ct)throw new Error("Incompatible tree version")}});this.setupExperimentsUpdatesStream(ee),window.addEventListener("resize",this.updateViewportSize),setTimeout(this.updateViewportSize),window.addEventListener("visibilitychange",()=>{if(document.visibilityState!=="visible")return;this.updateViewportSize()&&(this.updateViewportRect(),this.updateGroundNodesInViewport(),this.triggerRenderer())}),$e.interceptMessageEventsFromOpenerFrame(r=>{if(r.data!==t||!(r instanceof MessageEvent))return!1;n();let o=r.ports[0];X(o,"CanvasSandboxApp expected parent frame to transfer a MessagePort"),X(!this.channelToOpenerFrame,"CanvasSandboxApp already has a channel to the parent frame"),S.debug("CanvasSandboxApp: received port to parent frame; should use it to upgrade:",e);let i=e?new _e(o):ee;return this.channelToOpenerFrame=i,Je.on(i).register(this),ot.on(i).register(this.sandboxComponentLoaderService),et.on(i).register(this.controlsVisibilityService),nt.on(i).register(this.modulesRuntime),e&&this.setupExperimentsUpdatesStream(i),ft(Ke.on(i).discover(),async d=>{d.assets&&(this.assetMap.set(d.assets),G.importCustomFonts(d.assets),this.triggerRenderer())}),rt.on(i).discover().then(async d=>{let u=p=>{this.modulesRevision!==null&&p<this.modulesRevision&&S.reportError(new Error("Assertion error: processing modules update out of order.")),this.nodeBasedRenderer||le(this.tree,this.sandboxCollectionData),this.markGroundNodesNeedRendering(),this.modulesRevision=p,this.rerenderGroundNodesIfNeeded()};d.moduleUpdatesStream().read(async p=>{if(this.initialModuleUpdatesBufferState.buffering)this.initialModuleUpdatesBufferState.buffer.push(p);else{let{patches:N,dependentModules:m,revision:y,initialized:f}=p;try{await this.modulesRuntime.handleLocalModulesUpdate({patches:N,dependentModules:m,initialized:f,revision:y}),u(y)}catch(V){S.reportError(V,{context:"Failed to handle modules update"})}}}).catch(S.reportError);let{dependenciesModule:a,modules:c,revision:h,initialized:g}=await d.getModules(),v=h,l=[],R=new Set;a&&l.push({op:"add",path:[`${a.type}/${a.name}`],value:a});for(let p of Object.values(c))l.push({op:"add",path:[`${p.type}/${p.name}`],value:p});X(this.initialModuleUpdatesBufferState.buffering);for(let p of this.initialModuleUpdatesBufferState.buffer)p.revision<=v||(v=p.revision,l.push(...p.patches),p.dependentModules.forEach(N=>R.add(N)));this.initialModuleUpdatesBufferState={buffering:!1},this.modulesRuntime.handleLocalModulesUpdate({patches:l,dependentModules:Array.from(R),initialized:g,revision:v}).then(()=>{u(v)}).catch(S.reportError)}).catch(S.reportError),S.debug("CanvasSandboxApp: registered services"),!0}),Oe.updateNodes=r=>{for(let o of r)this.textNodeIdsToRerender.add(o);this.requestTextNodesRerender()},Pt.updateNodes=Oe.updateNodes,S.debug("CanvasSandboxApp: ready to initialize"),Zt(ee)}calculateCodeRevision(){return this.lazyModulesRevision<=0?this.componentHash+"_"+this.modulesRevision:this.componentHash+"_"+this.modulesRevision+"."+this.lazyModulesRevision}get codeRevision(){return this.calculateCodeRevision()}localModulesLoaded(e,t){this.modulesRevision=e,this.lazyModulesRevision=t,this.sandboxComponentLoaderService.emitComponentLoaderStateEvent({type:"fullStateSync",hash:this.calculateCodeRevision(),state:E.getSerializableState()}),this.nodeBasedRenderer&&this.renderingStateTracker.updateState({componentLoaderHash:this.calculateCodeRevision()})}externalModulesLoadingStateChange(e){e||this.rerenderComponentPresets()}externalModuleLoaded(e,t){this.sandboxComponentLoaderService.emitComponentLoaderStateEvent({type:"externalModuleLoaded",externalModuleBareIdentifier:e,entities:t})}get assetMapHash(){return this.assetMap.hash^this.forceRender}setupExperimentsUpdatesStream(e){tt.on(e).discover().then(async t=>{t.experimentsUpdatesStream({replay:"latest"}).read(n=>L.update(n)).catch(S.reportError),t.projectFeaturesUpdatesStream().read(n=>te.update(n)).catch(S.reportError)}).catch(S.reportError)}invalidateTextNodes(e){for(let t of e){let n=this.tree.get(t);n!==null&&(this.nodeBasedRenderer?this.renderingStateTracker.updateNode(n.id):(n.cache.reset(),Fe(this.tree,n),ce(n)&&n.forceNeedsMeasure()))}this.groundNodes=this.getGroundNodes(Ue)}updateTransform(e){var t;this.offsetX=e[0],this.offsetY=e[1],this.canvasZoom=e[2],this.liveZoom=e[3],this.inMoveTool=(t=e[4])!=null?t:!1}async waitForViewportSize(e){let t=Ee(),n=()=>{window.innerWidth===e.width&&window.innerHeight===e.height&&t.resolve()};window.addEventListener("resize",n),n();try{await Promise.race([t,vn(5e3,`CanvasSandboxApp: expected resize to (${e.width}x${e.height}) within 5s, but viewport is still ${window.innerWidth}x${window.innerHeight}`)])}finally{window.removeEventListener("resize",n)}return{pixelRatio:window.devicePixelRatio}}updateViewportRect(){let e=this.liveZoom||this.canvasZoom,t=0,n=0,r=0,o=0;this.visibleRect={x:this.offsetX+t/e,y:this.offsetY+r/e,width:(this.viewportSize.width-t-n)/e,height:(this.viewportSize.height-r-o)/e}}updateGroundNodesInViewport(){if(this.liveZoom)return;let e=this.visibleRect,t=new Set,n=this.groundNodeIdsInViewport,r=this.groundNodes,o=!0;for(let d=0,u=r.length;d<u;d++){let a=r[d],c=a.id;b.intersects(ue(a),e)&&(t.add(c),o&&!n.has(c)&&(o=!1))}(!o||t.size!==n.size)&&(this.groundNodeIdsInViewport=t);let i=ke(this.tree);i&&i.update!==this.lastStylePresetsListNodeUpdate&&(this.lastStylePresetsListNodeUpdate=i.update,this.loadStylePresetFontsAndThenMeasure())}updateCache(){this.nodeBasedRenderer||Ut(this.tree,this.layoutCache,this.sandboxCollectionData,this.scopeId),this.previousCachedScopeId=this.scopeId}markNeedsReactRendering(){this.needsRender=!0}markGroundNodesNeedRendering(){this.needsRender=!0,this.groundNodes=[]}invalidateRenderCacheToNode(e){Fe(this.tree,e),this.markGroundNodesNeedRendering()}setTree(e){this.tree=e,this.markGroundNodesNeedRendering()}_update(e){var r,o,i,d,u;this.needsRender=!1,window.name=JSON.stringify(e.update),this.svgRenderer.update(),e.transform&&(this.updateTransform(e.transform),this.markNeedsReactRendering());let t=(r=e.document)!=null?r:{};t.loadedAllUserData?(this.loadedSomeUserData=!0,this.modulesRuntime.setEvaluationMode("eager")):t.loadedSomeUserData&&(this.loadedSomeUserData=!0,L.isOn("lazyModuleLoading")?this.modulesRuntime.setEvaluationMode("lazy"):this.modulesRuntime.setEvaluationMode("eager")),t.renderScope&&(this.scopeId=t.renderScope,this.groundNodeMap=void 0,this.isInitialLoad||(this.scopeSwitchStartTime=performance.now()),this.markNeedsReactRendering()),t.renderNodes&&(this.scopeId="",this.groundNodeMap=t.renderNodes,this.markNeedsReactRendering()),t.imageBaseURL&&(this.imageBaseURL=t.imageBaseURL,this.svgRenderer.imageBaseURL=this.imageBaseURL,this.markNeedsReactRendering());let n=t.partialTreeUpdate;if(n){this.partialTreeReceiver||(this.partialTreeReceiver=new rn(E));let a=this.partialTreeReceiver.update(n);this.setTree(a),n.tree&&this.loadStylePresetFontsAndThenMeasure(),n.changes&&n.changes.length>0&&this.layoutCache.pruneAfterTreeChanges(n.changes)}else{if(t.tree){let a=(o=Ae.fromJS(t.tree,E))!=null?o:void 0;if(a===void 0)throw Error("[Sandbox] Unable to build tree: "+t.tree);this.setTree(a),this.loadStylePresetFontsAndThenMeasure()}t.changes&&t.changes.length>0&&(Ft(this.tree,t.changes),this.layoutCache.pruneAfterTreeChanges(t.changes),this.setTree(this.tree.commit()))}if(this.previousCachedScopeId!==this.scopeId&&this.markGroundNodesNeedRendering(),t.nodeInTextEditor!==void 0){if(this.previousNodeInTextEditor){let c=this.tree.get(this.previousNodeInTextEditor);c&&(c.cache.isEditable=!1,this.nodeBasedRenderer?this.renderingStateTracker.updateNode(c.id):this.invalidateRenderCacheToNode(c))}this.previousNodeInTextEditor=t.nodeInTextEditor;let a=this.tree.get(t.nodeInTextEditor);a&&(a.cache.isEditable=!0,this.nodeBasedRenderer?this.renderingStateTracker.updateNode(a.id):this.invalidateRenderCacheToNode(a))}if(t.nodeInPathEditor!==void 0){if(this.previousNodeInPathEditor){let c=this.tree.get(this.previousNodeInPathEditor);c&&(c.cache.isEditable=!1)}this.previousNodeInPathEditor=t.nodeInPathEditor;let a=this.tree.get(t.nodeInPathEditor);a&&(a.cache.isEditable=!0)}if(t.nodesInEffectPreview!==void 0){if(this.previousNodesInEffectPreview){let a=new Set(t.nodesInEffectPreview);for(let c of this.previousNodesInEffectPreview){if(a.has(c))continue;let h=this.tree.get(c);h&&(h.cache.isEffectPreview=!1,h.cache.effectType=null,h.cache.effectIds=null,this.nodeBasedRenderer?this.renderingStateTracker.updateNode(h.id):this.invalidateRenderCacheToNode(h))}}this.previousActiveEffect=(i=t.activeEffect)!=null?i:this.previousActiveEffect,this.previousNodesInEffectPreview=t.nodesInEffectPreview;for(let a of t.nodesInEffectPreview){let c=this.tree.get(a);c&&(c.cache.isEffectPreview=!0,c.cache.effectType=(d=t.activeEffect)!=null?d:this.previousActiveEffect,c.cache.effectIds=(u=t.activeEffectIds)!=null?u:null,this.nodeBasedRenderer?this.renderingStateTracker.updateNode(c.id):this.invalidateRenderCacheToNode(c))}}if(t.activeOverlayNodes!==void 0){if(this.previousActiveOverlayNodes.size>0){let a=t.activeOverlayNodes;for(let c of this.previousActiveOverlayNodes){if(a.has(c))continue;let h=this.tree.get(c);h&&(Be(this.tree,h,!1),this.nodeBasedRenderer?this.renderingStateTracker.updateNode(h.id):this.invalidateRenderCacheToNode(h))}}this.previousActiveOverlayNodes=t.activeOverlayNodes;for(let a of t.activeOverlayNodes){let c=this.tree.get(a);c&&(Be(this.tree,c,!0),this.nodeBasedRenderer?this.renderingStateTracker.updateNode(c.id):this.invalidateRenderCacheToNode(c))}}if(this.nodeWithPlaceholder&&t.placeholder!==void 0){let a=this.tree.get(this.nodeWithPlaceholder.id);this.nodeWithPlaceholder.cache.placeholders=null,this.nodeWithPlaceholder=null,a&&(this.nodeBasedRenderer?this.renderingStateTracker.updateNode(a.id):(this.invalidateRenderCacheToNode(a),ce(a)&&a.forceNeedsMeasure()))}if(t.placeholder){let{id:a,placeholders:c}=t.placeholder,h=this.tree.get(a);h&&(this.nodeWithPlaceholder=h,h.cache.placeholders=c,this.nodeBasedRenderer?this.renderingStateTracker.updateNode(h.id):(this.invalidateRenderCacheToNode(h),ce(h)&&h.forceNeedsMeasure()))}if(t.canvasData&&L.isOn("supportDeprecatedDesignComponents")&&(yt.shared().setCanvas(t.canvasData),this.markNeedsReactRendering()),t.scripts&&(Ot(),kt(),E.updateStateWithScripts(t.scripts.map,de),this.componentHash=t.scripts.hash,this.sandboxComponentLoaderService.emitComponentLoaderStateEvent({type:"fullStateSync",hash:this.calculateCodeRevision(),state:E.getSerializableState()}),this.nodeBasedRenderer||(le(this.tree,this.sandboxCollectionData),this.markGroundNodesNeedRendering())),typeof t.isReadyToRender=="boolean"&&this.deferredRendering.setReadyToRender(t.isReadyToRender),typeof t.isDarkMode=="boolean"&&(this.updateDarkMode(t.isDarkMode),this.markNeedsReactRendering()),typeof t.performanceMode=="boolean"&&(this.performanceMode=t.performanceMode,this.markNeedsReactRendering()),t.collectionItemId){let a=this.tree.get(this.scopeId);Nt(a)&&(a.cache.collectionItemSelector={selectedCollectionItemId:t.collectionItemId},this.nodeBasedRenderer?this.renderingStateTracker.updateState({collectionItemId:t.collectionItemId}):(le(this.tree,this.sandboxCollectionData),this.markGroundNodesNeedRendering()))}this.needsRender&&this.rerenderGroundNodesIfNeeded()}updateDarkMode(e){this.isDarkMode!==e&&(this.isDarkMode=e,document.body.classList.toggle("framer-theme-dark",e),document.body.dataset.framerTheme=e?"dark":"light")}rerenderComponentPresets(){let e=At(this.tree);if(e){for(let t of e.children){let n=t.cache;n.isComponentLoaded||!n.links||this.invalidateTextNodes(n.links)}this.rerenderGroundNodesIfNeeded()}}rerenderGroundNodesIfNeeded(){let e=this.getGroundNodes(Ue);Dt(this.groundNodes,e)||(this.groundNodes=e),S.trace("rerenderGroundNodesIfNeeded"),this.triggerRenderer()}startRendering(){S.trace("startRendering"),this.updateCache(),this.updateViewportRect(),this.updateGroundNodesInViewport(),this.loadedSomeUserData&&this.deferredRendering.setGroundNodes(this.groundNodes,this.groundNodeIdsInViewport,this.scopeId),this.lastRendering.zoom=this.canvasZoom,this.lastRendering.scopeId=this.scopeId,this.lastRendering.offsetX=this.offsetX,this.lastRendering.offsetY=this.offsetY,this.lastRendering.tree=this.tree,this.lastRendering.groundNodesInViewport=this.groundNodeIdsInViewport,this.lastRendering.update=this.lastEngineUpdate,this.nodeBasedRenderer&&this.renderingStateTracker.updateState({zoom:this.canvasZoom}),queueMicrotask(this.measureLayoutAndEmitUpdate)}measureLayout(e){if(this.liveZoom)return[];if(this.previousNodesInEffectPreview.length>0)return[];let t=this.layoutMeasureQueue.process(this.lastRendering);`${e}`;let n=this.layoutCache.processLayoutMeasurements(t);return this.nodeBasedRenderer||Mt(this.tree,this.layoutCache,n,!1),t}getGroundNodes(e){let t=this.tree;if(this.scopeId){let r=t.get(this.scopeId);return X(r instanceof It,"Can't find active page in tree"),r.getGroundNodes(e)}let n=[];if(this.groundNodeMap)for(let r in this.groundNodeMap){let o=t.get(r);if(!o)continue;let i=this.groundNodeMap[r],d=jt(t,o,this.layoutCache,this.sandboxCollectionData,i,this.isDarkMode);n.push(d)}return n}command(e,t){e==="clearCache"?(this.forceRender+=1,this.tree.resetDraftNodesAndCache(),this.setTree(this.tree)):e==="setEnvironment"&&ae(t)?Object.assign(st,t):e==="setLogLevel"&&Pe(t)?it(t,!1):S.warn("unknown command:",e,t)}update({fixmeOpaqueJSON:e}){var u;this.nodeBasedRenderer=L.isOn("nodeBasedRenderer");let t=this.scopeId;this.startedHeartbeat||(this.startedHeartbeat=!0,setTimeout(this.emitHeartbeat));let n=performance.now();this.renderTime=0;let r=!1,o=-1;on(e)?(o=e.update,this.lastEngineUpdate=e.update,this._update(e),r=!0):Pe(e.command)&&this.command(e.command,e.args);let i=this.deferredRendering.renderingPhase,d=Math.round(performance.now()-n)-this.renderTime;return t!==this.scopeId&&!this.isInitialLoad&&(this.scopeSwitchUpdateEndTime=performance.now()),this.renderedUpdateEmitter.emit({update:o,updateTime:d,renderingPhase:i,renderTime:this.renderTime,moduleRuntimePhase:this.modulesRuntime.phase,layoutMeasurements:[],collectionRecordUpdates:this.sandboxCollectionData.getUpdates(),scopeId:(u=this.scopeId)!=null?u:"",updateEndTime:this.scopeSwitchUpdateEndTime,renderEndTime:0,scopeSwitchStartTime:this.scopeSwitchStartTime}),this.renderTime=0,ct(),""+o,Te(this,Q).forEach(a=>a()),Qe(this,Q,[]),r}runAfterNextUpdate(e){Te(this,Q).push(e)}renderedUpdateStream(e){return this.renderedUpdateEmitter.newStream(e)}loadStylePresetFontsAndThenMeasure(){let e=ke(this.tree);if(!e)return;let t=[];for(let n of e.children){let r=n.getFontsForCodeGeneration();for(let o of r)G.isSelectorLoaded(o)||t.push(o)}t.length>0?G.loadMissingFonts(t).then(()=>this.layoutMeasureQueue.stylePresetChanged(this.tree)).catch(Me):this.layoutMeasureQueue.stylePresetChanged(this.tree)}async waitUntilFontsLoaded(){let e=this.getGroundNodes(),t=[];for(let r of e)for(let o of r.walk())Et(o)&&t.push(o);let n=new Set;try{await Promise.allSettled(t.map(r=>{let o=r.getFontsForLoading();return G.loadMissingFonts(o,()=>n.add(r.id)).catch(Me)}))}catch{}for(let r of this.textNodeIdsToRerender)n.add(r);this.invalidateTextNodes(n),this.textNodeIdsToRerender.clear(),await new Promise(r=>{this.triggerRenderer(r)})}errorStream(e){return this.errorEmitter.newStream(e)}heartbeatStream(e){return this.heartbeatEmitter.newStream(e)}async waitUntilResourcesLoaded(){await this.isLoadingResourcesPromise}assertTrackingUpdates(e){X(e===this.isTrackingUpdates,"Update tracking (willStartUpdates/waitForCompleteRenderAfterUpdates) must be balanced and not nested")}async willStartUpdates(){this.assertTrackingUpdates(!1),this.isTrackingUpdates=!0}async waitForCompleteRenderAfterUpdates(){this.assertTrackingUpdates(!0),await this.waitUntilResourcesLoaded(),await this.waitUntilPlaceholdersSettled(),await this.waitUntilFontsLoaded(),await Promise.race([new Promise(e=>requestAnimationFrame(e)),vn(1e3,"CanvasSandboxApp: didn't render after 1s")]).finally(()=>{this.isTrackingUpdates=!1})}async preloadFonts({selectors:e}){await G.loadMissingFonts(e)}async getFitTextViewBoxes({ids:e,update:t}){for(;this.lastEngineUpdate<t;)await new Promise(o=>this.runAfterNextUpdate(o));let n=this.tree.getNodesWithTrait(e,ne),r=[];for(let o of n)ne(o)&&r.push(...o.getFontsForLoading());return await G.loadMissingFonts(r),gn(n)}async measureNodes({ids:e}){if(this.previousNodesInEffectPreview.length>0)return{measurements:[]};let t=this.tree.getNodes(e),n=mn(t).process({scopeId:this.scopeId,zoom:this.canvasZoom,offsetX:this.offsetX,offsetY:this.offsetY,tree:this.tree,groundNodesInViewport:this.groundNodeIdsInViewport});return S.trace("measureNodes:",n.length),{measurements:n}}async waitUntilPlaceholdersSettled(){return pt()}};Q=new WeakMap;at({name:"canvas",security:{allowChannelToOpenerWithOrigin:Lt(document.referrer).origin}});var Bn=A("canvas-sandbox"),T=new xe;Object.assign(window,{Framer:de,sandboxApp:T});Bn.debug({assetMap:T.assetMap});var qn=qt(T.assetMap),Gn=T.layoutMeasureQueue.add.bind(T.layoutMeasureQueue);vt({assetResolver:qn,fetchGoogleFontsList:Yt,fetchFontshareFontsList:Xt,enableFontStore:!0,executionTimeBudgets:{frame:500,component:150},queueMeasureRequest:Gn,experiments:L,projectFeatures:te,useImageSource:T.imageLoader.useImageSource,useImageElement:T.imageLoader.useImageElement});ze({isSites:Rt.sites==="on"});te.addListener("sites",s=>ze({isSites:s==="on"}));var Wn=()=>{let[s,e]=W.default.useState(0),t=tn();return T.triggerRenderer=n=>{n&&t.add(n);let r=performance.now();e(s+1),T.renderTime+=performance.now()-r},W.default.useEffect(()=>{for(let n of t)t.delete(n),n()}),T.startRendering(),T};Ht(W.default.createElement(W.default.StrictMode,null,W.default.createElement(_t.Provider,{value:T.modulesRuntime},W.default.createElement(en,{useState:Wn}))),document.querySelector("main"));
//# sourceMappingURL=https://app.framerstatic.com/canvas-sandbox.APEH2GWK.js.map
