import{a as cn,b as fl,c as gl}from"https://app.framerstatic.com/chunk-OL2H6VCG.js";import{a as ln}from"https://app.framerstatic.com/chunk-LESMOJ5W.js";import{a as ll}from"https://app.framerstatic.com/chunk-Q72U2VII.js";import{a as an}from"https://app.framerstatic.com/chunk-LS6ON4GP.js";import"https://app.framerstatic.com/chunk-7G65XU53.js";import{A as Gc,B as Kc,C as gs,D as rn,E as Jc,F as Xc,a as bi,b as Pi,c as Pr,d as Mi,e as fc,f as d,g as Tc,h as Ac,i as Zr,j as Mc,k as bo,l as Lc,m as xc,n as jc,o as Jr,p as Uc,q as Xr,r as Oc,s as Wc,t as kt,u as qc,v as fs,w as Rc,x as Vc,y as tn,z as zc}from"https://app.framerstatic.com/chunk-BTVNNFXQ.js";import"https://app.framerstatic.com/chunk-4OBXWL73.js";import"https://app.framerstatic.com/chunk-KVQLL4QL.js";import"https://app.framerstatic.com/chunk-KYB42RW4.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import"https://app.framerstatic.com/chunk-3DMDQ3KP.js";import"https://app.framerstatic.com/chunk-PR73ZAHH.js";import"https://app.framerstatic.com/chunk-JIRXICKD.js";import{$ as tr,Ea as yc,Fa as Pc,Ga as wc,Ha as Cc,Ia as Sc,Pa as Ic,Xa as to,cb as Yr,g as us,na as eo}from"https://app.framerstatic.com/chunk-GKG4WNA5.js";import{b as yi,f as gc,u as hc,v as bc,w as vc}from"https://app.framerstatic.com/chunk-XWQ2EHZS.js";import{$d as rc,Cc as Ra,Ce as pc,Dc as $a,De as kf,Q as _a,Qc as Va,Sd as Rr,Tc as za,Uc as Ga,Wd as tc,Xd as oc,Zc as ec,a as mi,ae as nc,b as Zn,c as fi,d as gi,e as hi,f as vi,g as wi,ge as cs,h as Ci,i as Si,le as ic,ne as ac,o as ta,oe as cc,pe as ps,qe as lc,re as w,se as dt,te as Ut,uh as a}from"https://app.framerstatic.com/chunk-EE5NHT7Z.js";import"https://app.framerstatic.com/chunk-WECJIOWQ.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import"https://app.framerstatic.com/chunk-T3F3WD6K.js";import"https://app.framerstatic.com/chunk-YNETUNJC.js";import"https://app.framerstatic.com/chunk-XL4HHLKU.js";import"https://app.framerstatic.com/chunk-BQHEZLCU.js";import"https://app.framerstatic.com/chunk-B2IBNAJ6.js";import"https://app.framerstatic.com/chunk-5GPLGJBJ.js";import"https://app.framerstatic.com/chunk-JAWKSEN5.js";import"https://app.framerstatic.com/chunk-RAGJTGMK.js";import{a as $r,b as rt,c as ls}from"https://app.framerstatic.com/chunk-G2VM56TA.js";import"https://app.framerstatic.com/chunk-4NJJCNLO.js";import{a as O}from"https://app.framerstatic.com/chunk-CMLW74R7.js";import"https://app.framerstatic.com/chunk-XAUM5LZA.js";import"https://app.framerstatic.com/chunk-D3OBDKBI.js";import{a as $c}from"https://app.framerstatic.com/chunk-V634IFOY.js";import"https://app.framerstatic.com/chunk-I5VN5FR4.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import"https://app.framerstatic.com/chunk-KUZRVRYT.js";import"https://app.framerstatic.com/chunk-TPYBAQ5I.js";import"https://app.framerstatic.com/chunk-DOO6DXVI.js";import"https://app.framerstatic.com/chunk-4QCXYVYE.js";import{j as Ka}from"https://app.framerstatic.com/chunk-BKAJAQF5.js";import{c as sc}from"https://app.framerstatic.com/chunk-NQTR3NEL.js";import"https://app.framerstatic.com/chunk-YYCRPH36.js";import"https://app.framerstatic.com/chunk-4QLX3L5C.js";import{f as Ya,h as as,i as Ja,j as Xa,k as Qa}from"https://app.framerstatic.com/chunk-HSI3JA46.js";import{a as qa}from"https://app.framerstatic.com/chunk-WEOJMIFQ.js";import"https://app.framerstatic.com/chunk-D6XAQYT2.js";import"https://app.framerstatic.com/chunk-WTY3ZTSV.js";import"https://app.framerstatic.com/chunk-NBEFPMVE.js";import"https://app.framerstatic.com/chunk-VRLLGASK.js";import{a as dc,b as mc}from"https://app.framerstatic.com/chunk-5NN5SU4D.js";import"https://app.framerstatic.com/chunk-ZMLT2JJO.js";import"https://app.framerstatic.com/chunk-TY6T2EJF.js";import"https://app.framerstatic.com/chunk-PHTSUMBS.js";import{a as ho}from"https://app.framerstatic.com/chunk-A2XM7CWL.js";import"https://app.framerstatic.com/chunk-LRFMZAIA.js";import{a as di,d as qr,l as Za}from"https://app.framerstatic.com/chunk-HQOK6ZU2.js";import{Ad as ia,Cs as Ba,Do as ja,Eh as fa,Eo as Ea,Fa as Ui,Gd as jr,Go as ss,Hd as aa,Id as ca,If as da,Jf as os,Ms as Wr,No as is,O as Ei,Pa as Fi,Pd as la,Qd as Er,Rm as ns,Tp as Da,Uo as _r,Vr as Oa,Xo as Na,da as Ni,ek as xa,fa as Di,ig as ma,ja as zo,jb as Oi,lb as Y,mb as St,nb as ra,p as ji,rb as na,rq as Ua,ti as ga,tr as Hr}from"https://app.framerstatic.com/chunk-A6SQ7LET.js";import"https://app.framerstatic.com/chunk-CKP2GXTU.js";import"https://app.framerstatic.com/chunk-ZAVCCCEM.js";import{a as el,b as ol,c as rl,d as nl,e as sl,f as il,g as al,h as pl,i as ul,j as dl,k as ml}from"https://app.framerstatic.com/chunk-QIR5GTDU.js";import"https://app.framerstatic.com/chunk-EJRKT2VM.js";import{a as bl}from"https://app.framerstatic.com/chunk-5BKAFL4K.js";import{c as cl}from"https://app.framerstatic.com/chunk-CFSGIPLK.js";import{a as nn}from"https://app.framerstatic.com/chunk-PQ5KWRSW.js";import{a as hs,b as hl}from"https://app.framerstatic.com/chunk-TBPLOZHH.js";import"https://app.framerstatic.com/chunk-KCKKCK4H.js";import{a as sn,b as Qc,d as tl}from"https://app.framerstatic.com/chunk-ENCLJCCE.js";import{e as ds,f as Ec,g as Nc,n as Dc,o as Bc,p as Zc,q as Yc}from"https://app.framerstatic.com/chunk-FQ2CKJUG.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import{c as on}from"https://app.framerstatic.com/chunk-7M47JW6T.js";import"https://app.framerstatic.com/chunk-KJSD4JAT.js";import"https://app.framerstatic.com/chunk-56IWSP6X.js";import"https://app.framerstatic.com/chunk-KCRDHQ4E.js";import"https://app.framerstatic.com/chunk-W47G67UO.js";import{a as Fc}from"https://app.framerstatic.com/chunk-ULPRQD5H.js";import{a as go}from"https://app.framerstatic.com/chunk-VYA5VL6Z.js";import"https://app.framerstatic.com/chunk-6S4QFB3A.js";import{f as Ye}from"https://app.framerstatic.com/chunk-Z543FYPM.js";import{a as Re}from"https://app.framerstatic.com/chunk-LL55HCXN.js";import"https://app.framerstatic.com/chunk-C6MBLJJ7.js";import{b as B}from"https://app.framerstatic.com/chunk-IIRCVEQ4.js";import{a as Qr,b as _c,c as en,d as Hc,e as ms}from"https://app.framerstatic.com/chunk-52IXX5EC.js";import"https://app.framerstatic.com/chunk-HJSTTHYZ.js";import"https://app.framerstatic.com/chunk-EKWQMBYQ.js";import{a as A}from"https://app.framerstatic.com/chunk-XIAFXR7N.js";import"https://app.framerstatic.com/chunk-RGFCPPZP.js";import{a as Wa}from"https://app.framerstatic.com/chunk-BRGVFFSG.js";import{a as De}from"https://app.framerstatic.com/chunk-JHG3I4BF.js";import{a as Ha}from"https://app.framerstatic.com/chunk-EFWLR5MY.js";import{c as kc}from"https://app.framerstatic.com/chunk-AYPLWRPW.js";import{c as Kr}from"https://app.framerstatic.com/chunk-KPKDJDRD.js";import{b as Vr,d as zr,f as Gr}from"https://app.framerstatic.com/chunk-5EI5PR3P.js";import"https://app.framerstatic.com/chunk-JE3B725U.js";import"https://app.framerstatic.com/chunk-GXINHILR.js";import"https://app.framerstatic.com/chunk-DSERDOJV.js";import{b as xi}from"https://app.framerstatic.com/chunk-M5JBPS3M.js";import{a as uc}from"https://app.framerstatic.com/chunk-HM6PEKXQ.js";import{b as oa,f as pa,j as Ie,m as ua}from"https://app.framerstatic.com/chunk-CK3XLEJS.js";import{b as yt,c as Xo,e as sa}from"https://app.framerstatic.com/chunk-IEH5QJIZ.js";import{A as ot,C as Ta,D as Aa,E as Ma,H as La,K as Be,L as qe,O as Br,W as fo,e as ha,g as ba,h as Nr,i as rs,j as Dr,k as Ur,l as Fr,m as va,n as Or,o as Qo,p as ya,q as er,r as Pa,s as Qt,t as wa,u as Ca,v as Sa,w as Dt,x as mo,y as ka,z as Ia}from"https://app.framerstatic.com/chunk-DRFNFFXK.js";import{b as wr,d as Fa,h as V}from"https://app.framerstatic.com/chunk-B7OOZ5ZN.js";import{$b as kr,$h as vt,Ab as _i,Bb as Hi,Ch as Jt,Ci as ea,De as $i,Ef as zi,Eh as xt,Ei as Jo,Fi as ts,Gb as x,Hb as Wi,Qf as Gi,Ra as Li,Rc as Qn,Sa as Cr,Sc as es,Tf as Ki,Xh as jt,Yh as Et,ac as Ko,ah as Zi,bh as ve,ci as Ct,dh as oe,ed as bt,eh as Mr,fh as ut,hi as Nt,ja as ke,ld as Zo,lh as Yt,mh as P,ni as uo,oa as Zt,pd as qi,qh as Yi,qi as Qi,rd as Ir,sd as Ri,sh as Lr,th as xr,uf as Vi,uh as Ji,vh as Lt,vi as Xt,wb as N,xd as Tr,xh as Ae,xi as Yo,yb as po,yd as Ar,zb as Go,zh as Xi}from"https://app.framerstatic.com/chunk-DLNMN23R.js";import{k as Ze,m as Sr,r as Bi}from"https://app.framerstatic.com/chunk-7QICEHKI.js";import"https://app.framerstatic.com/chunk-7DPOW67T.js";import"https://app.framerstatic.com/chunk-XBQHBV7C.js";import{a as L}from"https://app.framerstatic.com/chunk-H4IIIHXS.js";import"https://app.framerstatic.com/chunk-V3SLPV6Z.js";import{b as Ve,g as ui,j as ht}from"https://app.framerstatic.com/chunk-NEN2GU72.js";import{C as Xn,O as Ai,a as Se,b as Te,f as ki,i as q,j as Ii,l as Yn,m as Kt,p as tt,t as Jn,u as Ti,v as Vo}from"https://app.framerstatic.com/chunk-LRLCEQCG.js";import{e as M,g as pt,h as Ro,i as $o}from"https://app.framerstatic.com/chunk-G6RVR2BI.js";var hr=M(L());var If={track:!0};function vl(t){let e={...t,event:"file_save"};wr(e,If)}var Tf={track:!0};function yl(t){let e={...t,event:"preview_hand_change"};wr(e,Tf)}var He=M(L());var or,oo,Ft,vo,pn=class{constructor(e){this.localHandler=e;Ro(this,or,void 0);Ro(this,oo,{});Ro(this,Ft,null);Ro(this,vo,null);this.socketStats=null}get treeSchema(){return this.localHandler.treeSchema}get treeVersion(){return this.localHandler.treeVersion()}setSendFunction(e){$o(this,Ft,e)}setUploadSnapshotFunction(e){$o(this,vo,e)}setGetUserInfoFunction(e){this.localHandler.getUserInfo=e}sendMessage(e){pt(this,Ft)&&pt(this,Ft).call(this,e)}uploadDocument(e){pt(this,vo)&&pt(this,vo).call(this,e)}onConnect(){this.localHandler.setRemoteConnection(this)}onDisconnect(e){this.localHandler.setRemoteConnectionFailure(e)}onMessage(e){switch(e.type){case"leave":this.localHandler.handleLeave(e.id);break;case"lock":this.localHandler.handleLock(e.id,e.value);break;case"state":e.id===pt(this,or)&&Object.assign(pt(this,oo),e.value),this.localHandler.handleUserStateUpdate(e.id,e.value);break;case"treeMessage":this.localHandler.handleTreeMessage(e.id,e.value);break;case"treeUpdate":this.localHandler.handleTreeUpdate(e.id,e.value);break;case"treeVerify":this.localHandler.handleTreeVerify(e.value);break;case"welcome":{let{userId:o,userStates:r}=e.value;$o(this,or,o),$o(this,oo,{...r[o]});for(let[n,i]of Object.entries(r))this.localHandler.handleUserStateUpdate(n,i);break}}}setSocketStats(e){this.socketStats=e}rtt(){return this.socketStats?this.socketStats.rtt():NaN}updateUserState(e){if(!pt(this,Ft))return;let o=!1,r={};for(let n of Object.keys(e))e[n]!==void 0&&(Ei(e[n],pt(this,oo)[n],!0)||(r[n]=e[n],o=!0));o&&(Object.assign(pt(this,oo),r),pt(this,Ft).call(this,{type:"state",value:r}))}};or=new WeakMap,oo=new WeakMap,Ft=new WeakMap,vo=new WeakMap;var ro=M(L());async function Pl(t,e,o,r){let n=`upload${Math.random()}`;try{r({type:"add",key:n,variant:"progress",icon:o,text:"Uploading remote file\u2026",duration:1/0,showCloseButton:"never"});let i=await A.post(t,{url:e});return r({type:"add",key:n,variant:"success",text:"File has been uploaded",duration:1e4,icon:"success",moveToTop:!0}),i}catch(i){throw r({type:"add",key:n,variant:"error",text:"Error uploading file",duration:3e4,icon:"error",moveToTop:!0}),i}}var Ot=tt("useAPI"),Af=Gr()&&navigator.userAgent.includes("Version/16"),wl=window.CompressionStream&&!Af,bs=class{constructor(e,o,r,n){this.apiBaseURL=e;this.socket=o;this.projectId=r;this.dispatch=n;this.packagesPerPage=36}wait(e){A.wait(e)}getACL(){A.get(`/web/projects/${this.projectId}/acl/`).then(({users:e,invites:o})=>{this.dispatch({type:"updateACL",reset:!0,acl:[...e,...o]})}).catch(e=>Ot.error("Failed to get ACL:",e))}setInitialProject(e){e.then(o=>{this.dispatch({type:"setProject",project:o})}).catch(o=>Ot.error("Failed to set initial project:",o))}getProject(){A.get(`/web/projects/${this.projectId}`).then(e=>{this.dispatch({type:"setProject",project:e})}).catch(e=>Ot.error("Failed to get project:",e))}async pollProject({intervalMillis:e,attempts:o,stopCondition:r}){for(let n=0;n<o;++n){let i=await A.get(`/web/projects/${this.projectId}`);if(r(i)){this.dispatch({type:"setProject",project:i}),this.notifyProjectChange("metadata");return}await new Promise(s=>setTimeout(s,e))}throw new Error("pollProject exceeded the number of attempts")}async inviteByEmail({email:e,role:o,permissions:r}){let n=await A.post(`/web/projects/${this.projectId}/acl`,{email:e,role:o,permissions:r!=null?r:void 0});return this.dispatch({type:"updateACL",acl:[n]}),this.notifyProjectChange("acl"),n}async removeInvite({id:e}){await A.deleteRaw(`/web/projects/${this.projectId}/invites/${e}`),this.notifyProjectChange("acl"),this.getACL()}async updateUserPermissions({id:e,role:o,permissions:r}){await A.post(`/web/projects/${this.projectId}/acl/${e}`,{role:o,permissions:r!=null?r:void 0}),this.notifyProjectChange("acl"),this.getACL()}async removeUserPermissions({id:e}){await A.deleteRaw(`/web/projects/${this.projectId}/acl/${e}`),this.notifyProjectChange("acl"),this.getACL()}async updateProject(e){return this.dispatch({type:"updateProject",changes:e}),A.postRaw(`/web/projects/${this.projectId}`,JSON.stringify(e),"application/json").then(()=>{this.getProject(),this.notifyProjectChange("metadata")}).catch(o=>{throw Ot.error("Failed to update project:",o),o})}async updateShareLink(e){let{id:o,...r}=e;return A.post(`/web/projects/sharelinks/${o}`,r).then(()=>{this.getProject(),this.notifyProjectChange("metadata")}).catch(n=>{throw Ot.error("Failed to update project:",n),n})}async getThreads({archived:e=!1}={}){return A.get(`/web/projects/${this.projectId}/threads/?archived=${e?"true":"false"}`)}async getThread({id:e}){return A.get(`/web/projects/${this.projectId}/threads/${e}`)}async createThread(e){return A.post(`/web/projects/${this.projectId}/threads/`,e)}async updateThread(e){let{id:o,...r}=e;return A.post(`/web/projects/${this.projectId}/threads/${o}`,r)}async markAsSeen({threadId:e,...o}){return A.post(`/web/projects/${this.projectId}/threads/${e}/seen`,o)}async createComment({threadId:e,text:o}){return A.post(`/web/projects/${this.projectId}/threads/${e}/comments/`,{text:o})}async updateComment(e){let{id:o,threadId:r,text:n}=e;return A.post(`/web/projects/${this.projectId}/threads/${r}/comments/${o}`,{text:n})}async deleteComment(e){let{id:o,threadId:r}=e;return A.delete(`/web/projects/${this.projectId}/threads/${r}/comments/${o}`)}async subscribeToNotifications(){await A.postRaw(`/web/projects/${this.projectId}/threads/notifications/subscribe`)}async unsubscribeFromNotifications(){await A.postRaw(`/web/projects/${this.projectId}/threads/notifications/unsubscribe`)}async getAssets(){let e=await A.get(`/web/projects/${this.projectId}/assets/`);if(!Array.isArray(e.assets)){let o=new Error("malformed /projects/./assets/ response");throw Ot.reportError(o,e),o}return e}async uploadAsset(e,o){let r=new URL(`/web/projects/${this.projectId}/assets`,this.apiBaseURL).href,n=await Zc(r,"file",e,"image",o!=null?o:Re);return n&&this.notifyProjectChange("assets"),n}async uploadAssetByURL(e,o){let r=await Pl(`/web/projects/${this.projectId}/assets/fetch`,e,"image",o!=null?o:Re);return r&&this.notifyProjectChange("assets"),r}async duplicateAssets(e,o){if(this.projectId===o)return Ot.warn("Attempted to duplicate assets for current project"),[];let r=await A.post(`/web/projects/${this.projectId}/assets/duplicate`,{sourceProjectId:o,keys:e});return r&&this.notifyProjectChange("assets"),r.assets}async deleteAsset(e){let o=await A.deleteRaw(`/web/projects/${this.projectId}/assets/${e}`);return o&&this.notifyProjectChange("assets"),o}async createModule(e){let o=new FormData;return this.addModuleRequestToForm(e,o),await A.postRaw("/modules/v1/modules/",o).then(n=>n.json())}async deleteModule({moduleId:e}){return await A.deleteRaw(`/modules/v1/modules/${e}`).then(r=>r.json())}async getModule({moduleId:e,saveId:o}){let r;return o?r=`/modules/v1/modules/${e}/saves/${o}`:r=`/modules/v1/modules/${e}`,A.get(r)}async getModuleDependencies({moduleId:e,saveId:o}){return A.get(`/modules/v1/modules/${e}/saves/${o}/dependencies/`)}async listModules({types:e}){let o=new URLSearchParams;if(e)for(let n of e)o.append("type",n);return await A.get(`/modules/v1/modules/?${o.toString()}`,{projectId:this.projectId})}async listNamespaces(){return await A.get("/modules/v1/namespaces/")}async listPublishedModules({namespace:e}){let o=`/modules/v1/modules/namespaces/${encodeURIComponent(e)}/published/`;return await A.get(o)}async lookUpModules(e){return A.post("/modules/v1/modules/batch/lookup/",e)}async publishModule({namespace:e,name:o,...r}){let n=`/modules/v1/namespaces/${encodeURIComponent(e)}/published/${encodeURIComponent(o)}`;return await A.post(n,r)}async updateModule({moduleId:e,...o}){return await A.post(`/modules/v1/modules/${e}`,o)}async saveModule(e){let o=new FormData;return await this.addModuleRequestToForm(e,o),await A.postRaw(`/modules/v1/modules/${e.moduleId}/saves/`,o).then(n=>n.json())}async saveModules({batch:e}){let o=new FormData;return await Promise.all(e.map(n=>this.addModuleRequestToForm(n,o))),await A.postRaw("/modules/v1/modules/batch/saves/",o).then(n=>n.json())}async addModuleRequestToForm(e,o){let{files:r,...n}=e,i=o.getAll("metadata").length;wl&&window.CompressionStream&&(n.transferEncoding="gzip"),o.append("metadata",JSON.stringify({...n,projectId:this.projectId,files:r.map(({content:s,...p})=>p)})),await Promise.all(r.map(async s=>{let p=new Blob([s.content]);if(wl&&window.CompressionStream){let c=new window.CompressionStream("gzip"),l=p.stream();p=await new Response(l.pipeThrough(c)).blob();let u=s.content.length-p.size,m=u/s.content.length*100;Ot.debug("Saved",u,"bytes",`(${m.toFixed(1)}%)`,"compressing",s.name)}o.append(`files[${i}]`,new File([p],s.name))}))}async getFileList(){return A.getRaw(`/web/vekter/projects/${this.projectId}/files`)}async getFile(e){return A.getRaw(`/web/vekter/projects/${this.projectId}/files/${e}`)}async saveFile(e,o){let r=new FormData,n=new File([o],e,{type:"text/plain"});return r.set("file",n),A.postRaw(`/web/vekter/projects/${this.projectId}/files/${e}`,r,void 0)}async deleteFile(e){return A.deleteRaw(`/web/vekter/projects/${this.projectId}/files/${e}`)}async getBuildOutput(e){return A.getRaw(`/web/projects/${this.projectId}/files/${e}`)}async getPackage(e){let{fromPublicPackages:o,packageName:r}=e;return A.get(`/store/packages${o?"":"/private"}/${r}`)}async deletePackage(e){let{fromPublicPackages:o,packageName:r}=e;await A.deleteRaw(`/store/packages${o?"":"/private"}/${r}`)}async getPackageVersionStatus(e){let{isPrivate:o,packageName:r,version:n}=e;return A.get(`/store/packages${o?"/private":""}/${r}/version/${n}`)}async preflightPackage(e){let{fromPublicPackages:o,body:r}=e;return A.post(`/store/packages${o?"":"/private"}/preflight`,r)}async findPackage(e){let{fromPublicPackages:o,friendlyName:r,spaceId:n}=e;return A.getRaw(`/store/packages${o?"":"/private"}/find-by-slugify`,{name:r,spaceId:n})}async findPackages(e){let{fromPublicPackages:o,query:r,offset:n,spaceIds:i}=e;return A.getRaw(`/store/packages${o?"":"/private"}/search`,{query:r,offset:n,limit:this.packagesPerPage,spaceIds:i})}async favoritePackage(e){let{fromPublicPackages:o,packageName:r}=e;return A.postRaw(`/store/packages${o?"":"/private"}/${r}/favorite`)}async unfavoritePackage(e){let{fromPublicPackages:o,packageName:r}=e;return A.deleteRaw(`/store/packages${o?"":"/private"}/${r}/favorite`)}async getPackages(e){let{fromPublicPackages:o,section:r,offset:n,spaceIds:i}=e;return A.getRaw(`/store/packages${o?"":"/private"}/${r||""}`,{offset:n,limit:this.packagesPerPage,spaceIds:i})}async getPopularPackages(e){let{fromPublicPackages:o,offset:r,days:n,spaceIds:i}=e;return A.getRaw(`/store/packages${o?"":"/private"}/popular`,{offset:r,days:n,limit:this.packagesPerPage,spaceIds:i})}async getFeaturedPackages(e){let{fromPublicPackages:o,offset:r}=e;return A.getRaw(`/store/packages${o?"":"/private"}/`,{featured:!0,offset:r,limit:this.packagesPerPage})}async getPublisherPackages(e){let{publisherId:o,offset:r}=e;return A.getRaw(`/store/packages/published-by/${o}`,{offset:r,limit:this.packagesPerPage})}async getTrendingPackages(){return A.getRaw("/store/packages/trending")}async getPackagesMetadata(e){return A.post("/store/meta/get-many",e)}async getCollectionsMany(e){return A.post("/web/collections/spaces/get-many",e)}async listPhotos(e){return A.get("/web/unsplash/photos",e)}async searchPhotos(e){return A.get("/web/unsplash/search/photos",e)}async getRandomPhoto(e){return A.get("/web/unsplash/photos/random",e)}async downloadPhoto(e){return A.get(`/web/unsplash/photos/${e.id}/download`)}notifyProjectChange(e){this.socket.send({type:"notifyProjectChange",value:{scope:e}})}};function Cl(t,e,o,r){let n=(0,ro.useMemo)(()=>new bs(t,e,o.projectId,r),[t,e,o.projectId,r]);(0,ro.useEffect)(()=>{n.getACL()},[n]);let i=(0,ro.useRef)(o);return i.current=o,(0,ro.useEffect)(()=>e.onMessage(s=>{let p=i.current;if(s.type==="join"){if(p.aclById[s.id])return}else if(s.type==="welcome"){if(p.acl.length===0)return;let c=!1;for(let l of p.activeIds)if(!p.aclById[l]){c=!0;break}if(!c)return}else return;n.getACL()}),[n,e]),n}var un=M(L());function Sl(t,e){let[o,r]=(0,un.useReducer)((n,i)=>{let s=qr(n,p=>Mf(p,i));return a.processWhenReady(()=>a.projectStore.update(s)),s},t,n=>({acl:[],aclById:{},activeIds:new Set,projectId:n,userStates:{}}));return(0,un.useEffect)(()=>e.onMessage(n=>{r({type:"handleMessage",message:n})}),[e]),[o,r]}function Mf(t,e){if(e.type==="handleMessage"){let{message:o}=e;if(o.type==="join"){if(t.activeIds.has(o.id)){console.warn("User joined twice:",o.id);return}else t.activeIds.add(o.id);t.userStates[o.id]={}}else if(o.type==="leave"){if(t.activeIds.has(o.id))t.activeIds.delete(o.id);else{console.warn("Unknown user left:",o.id);return}delete t.userStates[o.id]}else if(o.type==="state"){let r=t.userStates[o.id];if(!r){console.warn("Got user state data for unknown user:",o.id);return}Object.assign(r,o.value)}else o.type==="welcome"&&(t.activeIds=new Set(Object.keys(o.value.userStates)),t.userStates=o.value.userStates)}else if(e.type==="updateACL"){let o={};for(let r of e.acl)o[r.user.id]=r;if(e.reset){t.acl=e.acl,t.aclById=o;return}t.aclById={...t.aclById,...o},t.acl=Object.keys(t.aclById).map(r=>t.aclById[r])}else e.type==="updateProject"?(Se(t.project,"Project must be set before updating it"),Object.assign(t.project,e.changes)):e.type==="setProject"?t.project===void 0?t.project=e.project:Object.assign(t.project,e.project):Te(e)}var kl=M(L());var dn=class{constructor(e){this.api=e}async getThreads(e){return this.api.getThreads(e)}async createThread(e){return{thread:await this.api.createThread(e)}}async updateThread(e){return{thread:await this.api.updateThread(e)}}async markAsSeen(e){return{thread:await this.api.markAsSeen(e)}}async createComment(e){return{comment:await this.api.createComment(e)}}async updateComment(e){return{comment:await this.api.updateComment(e)}}async deleteComment(e){return{comment:await this.api.deleteComment(e)}}};function Il({api:t,channel:e}){(0,kl.useEffect)(()=>{if(e)return fi.on(e).register(new dn(t))},[t,e])}var Al=M(L());async function rr(t){if(t.status>=200&&t.status<300)return t;throw new Error(t.statusText)}async function vs(t){return t.json()}function Tl(t){return{type:t.dir?"directory":"file",path:t.path,content:t.content}}var mn=class{constructor(e,o,r){this.projectId=e;this.api=o;this.fileUpdatesService=r;this.buildOutputEmitter=new ht;this.buildOutputStream=this.buildOutputEmitter.newStream;this.buildRequestFileMap=new Map}async saveFile(e){let o=performance.now(),r=!1;try{let{path:n,content:i}=e,s=(this.buildRequestFileMap.get(n)||0)+1;this.buildRequestFileMap.set(n,s);let p=await this.api.saveFile(n,i);await rr(p),this.broadcast([{path:n,type:"added"}]),Y.isOn("codeModules")||Ie.isOn("disableStoreAndLegacyCode")||await this.handleBuildOutputResponse(p,n,s)}catch(n){throw r=!0,n}finally{vl({durationMs:Math.round(performance.now()-o),failed:r,filename:e.path,fileSize:e.content.length})}}async deleteFile(e){let{path:o}=e,r=(this.buildRequestFileMap.get(o)||0)+1;this.buildRequestFileMap.set(o,r);let n=await this.api.deleteFile(o);await rr(n),this.broadcast([{path:o,type:"deleted"}]),Y.isOn("codeModules")||Ie.isOn("disableStoreAndLegacyCode")||await this.handleBuildOutputResponse(n,o,r)}async getFile(e){let o=await this.api.getFile(e.path);await rr(o);let r=await vs(o);return{file:Tl(r)}}async getFileList(){let e=await this.api.getFileList();await rr(e);let{files:o}=await vs(e);return{fileList:o.map(Tl)}}async handleBuildOutputResponse(e,o,r){let n=await vs(e);if(r!==this.buildRequestFileMap.get(o))return;let i=[];for(let s in n.chunks){let p=n.chunks[s];p&&i.push({filename:s,contents:p})}this.buildOutputEmitter.emit({files:i})}async getBuildOutput(e){let{path:o}=e,r=await this.api.getBuildOutput(o);await rr(r);let n=await r.text();return{file:{type:"file",path:o,content:n}}}broadcast(e){this.fileUpdatesService.notify({files:e}).catch(q)}};function Ml({projectId:t,api:e,channel:o,fileUpdatesService:r}){(0,Al.useEffect)(()=>{if(o)return gi.on(o).register(new mn(t,e,r))},[t,e,o,r])}var yo=M(L());var fn=class{constructor(e){this.socket=e;this.fileUpdatesEmitter=new ht;this.fileUpdatesStream=this.fileUpdatesEmitter.newStream;this.socket.onMessage(o=>{if(o.type==="fileUpdate"){let r=o.value;this.fileUpdatesEmitter.emit(r)}})}async notify(e){this.socket.send({type:"fileUpdate",value:e})}};function Ll({channel:t,socket:e}){let o=(0,yo.useRef)((0,yo.useMemo)(()=>new fn(e),[e]));return(0,yo.useEffect)(()=>{if(t)return hi.on(t).register(o.current)},[t]),o.current}var jl=M(L());var ys="http://127.0.0.1:37263",Bt=class{static async getVersion(){try{return await fetch(`${ys}/version`,{mode:"cors"}).then(e=>e.json())}catch{throw new Error("Framer Tools app is not found")}}static async sampleColor(){return await Bt.getVersion(),fetch(`${ys}/sample_color`,{mode:"cors"}).then(e=>e.json())}static async getPermissions(){return await Bt.getVersion(),fetch(`${ys}/permissions`,{mode:"cors"}).then(e=>e.json()).catch(()=>({}))}};var xl={type:"add",variant:"info",icon:"color-wheel",action:{title:"Install",onClick:Ta},text:"To sample colors, please use the new desktop app",key:"install-desktop-app",duration:5e3};function El({channel:t,toast:e}){(0,jl.useEffect)(()=>{if(!t)return;let o={async sampleColor(){if(window.EyeDropper)return{color:(await new EyeDropper().open().catch(i=>{if((i==null?void 0:i.name)==="AbortError")return{sRGBHex:void 0};throw i})).sRGBHex};if(Gr())return e(xl),{};try{let r=await Bt.getPermissions();return(r==null?void 0:r.screen)===!1?(e({type:"add",variant:"info",icon:"apple",action:{title:"Learn More",onClick:()=>{ot("https://www.framer.com/support/using-framer/color-picker-access/")}},text:"Framer Tools requires Screen Recording access",key:"screen-permissions",duration:5e3}),{}):await Bt.sampleColor()}catch(r){return r instanceof Error&&r.message!=="Framer Tools app is not found"?{}:(e(xl),{})}}};return mi.on(t).register(o)},[t,e])}var Nl=M(L());function Dl({channel:t,api:e,socket:o,fileUpdatesService:r}){(0,Nl.useEffect)(()=>{if(!t)return;let n=new ht,i=o.onMessage(async c=>{if(c.type!=="moduleEvents")return;let l=await Promise.all(c.value.events.map(async u=>{if(u.type==="delete")return u;if(u.type==="save")return{type:"save",module:await e.getModule({moduleId:u.id})};Te(u)}));n.emit({events:l})});function s(c){o.send({type:"moduleEvents",value:{events:c}})}let p=vi.on(t).register({async create(c){let l=await e.createModule(c);return s([{type:"save",id:l.id,saveId:l.saveId}]),r.notify({files:[{type:"added",path:l.name}]}),l},async delete(c){let l=await e.deleteModule(c);return s([{type:"delete",id:l.id}]),r.notify({files:[{type:"deleted",path:l.name}]}),l},async getModuleDependencies(c){return e.getModuleDependencies(c)},async list(c){return await e.listModules(c)},async listNamespaces(){return await e.listNamespaces()},async listPublishedModules(c){return await e.listPublishedModules(c)},async lookUpModules(c){return await e.lookUpModules(c)},moduleEventsStream:n.newStream,async publish(c){return await e.publishModule(c)},async save(c){let l=await e.saveModule(c);return s([{type:"save",id:l.id,saveId:l.saveId}]),r.notify({files:[{type:"changed",path:l.name}]}),l},async saveBatch(c){let l=await e.saveModules(c);return s(l.data.map(u=>({type:"save",id:u.id,saveId:u.saveId}))),r.notify({files:l.data.map(u=>({type:"changed",path:u.name}))}),l},async update(c){let l=await e.updateModule(c);return s([{type:"save",id:l.id,saveId:l.saveId}]),l}});return()=>{i(),p()}},[t,o,e,r])}var Fl=M(L());var Ul=t=>{let{["private"]:e,tags:o,...r}=t;return{...r,tags:o||[],isPrivate:!!e}},_t=async t=>({packages:(await t.json()).map(Ul),totalCount:Number(t.headers.get("x-total-count"))||0}),nr=class{constructor(e){this.api=e;this.usingPublicPackages=!0}async findByName(e){return this.api.getPackage({fromPublicPackages:this.usingPublicPackages,...e}).then(Ul)}async containsPackage(e){return this.api.findPackage({fromPublicPackages:this.usingPublicPackages,...e}).then(o=>({contained:o.status===200}))}async toggleFavorite(e){let{favorite:o}=e;try{await(o?this.api.favoritePackage({fromPublicPackages:this.usingPublicPackages,...e}):this.api.unfavoritePackage({fromPublicPackages:this.usingPublicPackages,...e}))}finally{}return this.findByName(e)}async fetchRecents(e){return this.api.getPackages({fromPublicPackages:this.usingPublicPackages,...e}).then(_t)}async fetchPackagesBySection(e){return this.api.getPackages({fromPublicPackages:this.usingPublicPackages,...e}).then(_t)}async fetchPackagesByPublisher(e){return this.api.getPublisherPackages(e).then(_t)}async fetchPackagesByPopularity(e){return this.api.getPopularPackages({fromPublicPackages:this.usingPublicPackages,...e}).then(_t)}async fetchTrendingPackages(e){return this.api.getTrendingPackages().then(_t)}async fetchFeaturedPackages(e){return this.api.getFeaturedPackages({fromPublicPackages:this.usingPublicPackages,...e}).then(_t)}async search(e){let{query:o}=e;return(o===""?this.api.getPackages({fromPublicPackages:this.usingPublicPackages,offset:0,spaceIds:e.spaceIds}):this.api.findPackages({fromPublicPackages:this.usingPublicPackages,...e})).then(_t)}async getPublishStatus(e){return this.api.getPackageVersionStatus(e).then(o=>["pending","queued","in_progress"].includes(o.status)?{...o,status:"pending"}:o)}async fetchPreflight(e){return this.api.preflightPackage({fromPublicPackages:this.usingPublicPackages,body:e}).then(o=>({ok:!0,...o})).catch(o=>{var i;let{message:r}=o;return{ok:!1,errorMessage:((i=JSON.parse(r).error)==null?void 0:i.message)||""}})}async removePackage(e){return this.api.deletePackage({fromPublicPackages:this.usingPublicPackages,...e})}async fetchMeta(e){let{name:o,dependencies:r=[]}=e,n=o?[o,...r]:r,i={};if(n.length===0)return{dependenciesMeta:i};let s=await this.api.getPackagesMetadata({packageNames:n}),p={dependenciesMeta:i};return Object.keys(s).forEach(c=>{let l=s[c];if(!l)return;let{["private"]:u,...m}=l,g={...m,isPrivate:!!u};c===o?p.meta=g:i[c]=g}),p}},gn=class extends nr{constructor(){super(...arguments);this.usingPublicPackages=!1}async fetchFeaturedPackages(o){return this.api.getFeaturedPackages({fromPublicPackages:this.usingPublicPackages,...o}).then(_t)}};function Ol({api:t,channel:e}){(0,Fl.useEffect)(()=>{if(!e)return;let o=Pi.on(e).register(new nr(t)),r=yi.on(e).register(new gn(t));return()=>{o(),r()}},[t,e])}var Bl=M(L());var hn=class{constructor(e){this.api=e}async listPhotos(e){return this.api.listPhotos(e)}async searchPhotos(e){return this.api.searchPhotos(e)}async getRandomPhoto(e){return this.api.getRandomPhoto(e)}async downloadPhoto(e){return this.api.downloadPhoto(e)}};function _l({api:t,channel:e}){(0,Bl.useEffect)(()=>{if(e)return wi.on(e).register(new hn(t))},[t,e])}var mt=M(L());var sr;(v=>{async function t(){if(!a.loadingStore.documentLoaded)return new Promise(f=>{let h=a.changes.observe(a.loadingStore,async()=>{a.loadingStore.documentLoaded&&(a.changes.removeObserver(h),f())})})}v.ready=t;function e(f){return m(a.getNode(f))}v.get=e;function o(f){return a.processWhenReadyAsync(()=>{let h=[];for(let C of a.tree.root.walk()){let k=m(C);f(k)&&h.push(k)}return h})}v.find=o;function r(f){let h=b(),C=T([f]);return a.modulesStore.addExternalModulesToProject([...C],{onTreeUpdate:()=>{let{__parentId:k,__position:I,...E}=m(f);if(k&&!yt(k))throw h.getError("Invalid parentId property");let j=a.getNode(k&&yt(k)?k:a.scopeStore.activeId);if(!j)throw h.getError("Parent not found");return m(g(h,E,j.id,Xo(I)?I:void 0))}})}v.create=r;async function n(f){let h=b(),C=T(f);return a.modulesStore.addExternalModulesToProject([...C],{onTreeUpdate:()=>{let k=[];for(let I of f){let{id:E,__parentId:j,__position:D,children:Z,__class:_,...y}=I;if(!E||!yt(E))throw h.getError('Missing a valid "id" field');let H=a.getNode(E);if(!H)throw h.getError("Not found",E);if(j&&yt(j)){let ne=a.getNode(j);if(!ne)throw h.getError("Not found as parent",j);if(!fa(a.tree,ne,H,a.scopeStore.active.id,zo))throw h.getError(`Cannot move to parent with ID ${j}`,E)}Z&&h.warn("Skipping children, recursive updates not supported",E),_&&h.warn("Node type (__class) cannot be updated",E);let z=m(H),ie=Object.keys(z),Ee={};Object.keys(y).forEach(ne=>{if(!ie.includes(ne)&&!na(ne)){h.warn("Skipping setting ${key}, not found on original",E);return}Ee[ne]=y[ne]}),k.push(()=>{if(H.set(y),yt(j)||Xo(D)){let ne=yt(j)?j:H.parentid,G=Xo(D)?D:void 0;a.moveNode(H.id,ne,G)}})}k.map(I=>I())}})}v.update=n;async function i(f,...h){return a.processWhenReadyAsync(()=>{[f,...h].forEach(C=>{a.tree.remove(C)})})}v.remove=i;function s(){return m(a.selection.nodes[0])}v.selected=s;async function p(f,h=!0){return a.processWhenReadyAsync(()=>{let C=a.getNode(f);if(C&&(a.scopeStore.selectByNode(C.id),a.selection.set(C.id),h)){let k=a.tree.getBoundingFrameForNodes([C]);a.canvasStore.zoomToCenter(k,{animated:a.persistedUserDefaults.animateOnZoom})}})}v.select=p;function c(f){let h=a.getNode(f);if(!(h instanceof ss))return;let C=a.modulesStore.getPersistedModuleByLocalIdentifier(h.codeComponentIdentifier);if(C)return`${C.importURL}@${C.saveId}`}v.componentURL=c;function l(f){let h=Xn(f);if(!h)return;let C=zo.componentForIdentifier(f);if(!C)return;let{name:k,properties:I,file:E,packageIdentifier:j}=C,D={name:k,properties:I};if(Ti(h))return h.type==="codeFile"?{...D,file:E}:D;if(Jn(h))return{...D,url:j}}v.componentInfo=l;async function u(f,h){let C=b(),{reorder:k=!1,reset:I=!1}=h||{};return a.processWhenReadyAsync(()=>{let E=a.tree.ensureColorStyleTokenListNode(),j=[],D;I&&(D=new Set(E.children.filter(Z=>Z.installed).map(Z=>Z.id))),Object.entries(f).forEach(([Z,{name:_,color:y,darkColor:H}])=>{let z=a.getNode(Z);if(z===null)a.tree.insertNode(new is({id:Z,name:_,light:y,dark:H,installed:!0}),E.id),j.unshift(Z);else{if(!(z instanceof is)||z.parentid!==E.id){C.warn("Node exists but is not a color, skipping",Z);return}z.set({name:_,light:y,dark:H,installed:!0}),j.unshift(Z)}D==null||D.delete(Z)}),k&&j.forEach(Z=>{a.tree.move(Z,E.id,0)}),D==null||D.forEach(Z=>{a.tree.remove(Z)})})}v.installColors=u;function m(f){if(!f)return;let h=["cache","mutable","update"],C={};return Object.keys(f).forEach(k=>{if(h.includes(k))return;let I=f[k];k==="children"&&(I=I==null?void 0:I.map(m)),C[k]=I}),C}function g(f,h,C,k){if(!h)throw f.getError("Missing properties");let I=Da,{id:E,__class:j,children:D,...Z}=h;switch(j){case"CodeComponentNode":{I=ss;break}case"CanvasPageNode":{I=Ua,C=void 0;break}}let _=a.tree.create(I,C,Z);if(_.parentid&&Xo(k)&&a.tree.moveNode(_,_.parentid,k),Array.isArray(D))try{D.forEach(y=>g(f,y,_.id))}catch(y){throw a.tree.remove(_.id),y}return _}function T(f,h=new Set){for(let{__class:C,codeComponentIdentifier:k,children:I}of f){if(sa(I)&&T(I,h),C!=="CodeComponentNode"||!yt(k))continue;let E=Xn(k);!E||!Jn(E)||!Vo(E)||h.add(E)}return h}function b(){var D,Z,_;let f=new Error,h=(Z=(D=f.stack)==null?void 0:D.split(`
`))!=null?Z:[],C;h[0]==="Error"?(C=h[2],h[0]="Error: $$message$$",h.splice(1,1)):h.splice(0,1);let k=C==null?void 0:C.match(/\s*(?:at) Object\.(\S+)( \[as (\S+)\])?/),I=k?`.${(_=k[3])!=null?_:k[1]}`:"",E=(y,H)=>{let z=H?`[Node ${H}] `:"";return`VEX${I}: ${z}${y}`},j=y=>{var z,ie;let H=[...h];return H[0]=(ie=(z=H[0])==null?void 0:z.replace("$$message$$",y))!=null?ie:"",H.join(`
`)};return{warn:(y,H)=>{console.warn(E(y,H))},getError:(y,H)=>(f.message=E(y,H),f.stack=j(f.message),f)}}})(sr||(sr={}));var ir=M(L());var Wl=M(L()),Po={},Ht=window,Ps=new class{updateActionManager(t){Ht&&(Ht.actionManager=t)}hotKeysDisabled(){if(a.chromeStore.isProjectMenuOpen)return!0;switch(a.chromeStore.mainView){case 3:return!0;default:return!1}}};function ql(t){if("_bridge"in t)return;Ht=t,Ht._bridge=(o,...r)=>{var n;Po[o]&&((n=Po[o])==null||n.forEach(i=>i(...r)))};function e(o){Ht==null||Ht._bridge("error",o)}Ht.addEventListener("error",e)}function Rl(t){(0,Wl.useEffect)(()=>(t((e,o)=>{var r;Po[e]||(Po[e]=[]),(r=Po[e])==null||r.push(o)}),()=>{Po={}}),[t])}var $l="container_c1m6xhbt";var jf=Za(a.canvasStore.assetMap);Oi({assetResolver:jf,fetchGoogleFontsList:mc,fetchFontshareFontsList:dc,enableFontStore:!0,executionTimeBudgets:{frame:500,component:150},experiments:Ie,projectFeatures:Y});if(a.chromeStore.userIsEmployee||ka.isDevelopment)window.Vekter=us.Vekter,window.VEX=sr;else{let t=["e96bd9c5-e994-4069-955c-a665e70135ef"];(window==null?void 0:window.framerUser.spaces.some(o=>qe(o)&&o.organization&&t.includes(o.organization.id)))&&(Object.defineProperty(window,"Vekter",{get(){return ki("\u201CVekter\u201D is an internal API. Using it is deprecated and it will be replaced soon."),us.Vekter}}),window.VEX=sr)}ji({target:"CANVAS"});var Vl=ir.default.memo(()=>{let{isDarkMode:t}=De();return a.documentSettings.syncDarkAppearance(t),ql(window),window.addEventListener("touchmove",Ef,{passive:!1}),ir.default.createElement("div",{className:$l},ir.default.createElement(fc,null,ir.default.createElement(Jc,null)))});function Ef(t){t.preventDefault(),t.stopPropagation()}function zl({socket:t,projectId:e,userId:o,documentConnection:r}){let{documentURL:n,imageBaseURL:i,projectServerURL:s}=an({projectId:e});return Xc({documentURL:n,imageBaseURL:i,projectURL:s}),(0,mt.useEffect)(()=>{r.setSendFunction(u=>{t.send(u)}),r.setUploadSnapshotFunction(u=>{let m=a.treeStore.designDocumentURL;u.force!==void 0&&m.searchParams.set("force",u.force?"true":"false"),u.migration!==void 0&&m.searchParams.set("migration",u.migration?"true":"false"),m.searchParams.set("treeVersion",u.treeVersion.toString()),fetch(m.href,{method:"POST",credentials:"include",headers:Wa,body:JSON.stringify(u.tree)}).catch(T=>{console.warn("Failed to send snapshot:",T)})});let p=t.onConnect(u=>{r.onConnect(),u||a.modulesStore.refresh().catch(q)}),c=t.onDisconnect(u=>r.onDisconnect(u)),l=t.onMessage(u=>r.onMessage(u));return t.connect(),()=>{p(),c(),l()}},[r,t,e,o]),(0,mt.useEffect)(()=>t.onDisconnect(c=>{switch(c){case"AccessDenied":{window.location.reload();break}case"DocumentNotFound":{B({type:"add",variant:"error",key:"document-not-found",text:"The project data could not be loaded. If this error persists, please notify Framer Support.",duration:1/0,icon:"error",showCloseButton:"never"});break}case"UnsupportedSchema":{B({type:"add",variant:"error",key:"unsupported-schema",text:"Outdated document version. Opening this document is no longer supported.",duration:1/0,icon:"error",showCloseButton:"never"});break}}}),[t,e]),mt.default.createElement(nn,{location:"vekter",title:"Failed to load editor",description:mt.default.createElement(mt.default.Fragment,null,mt.default.createElement(P,null,"Something unexpected happened while loading the editor. Try disabling any ad-blocking browser extensions and reload the page."),mt.default.createElement("br",null),mt.default.createElement("br",null))},mt.default.createElement(Vl,null))}var F=M(L());var Gl={label:"File",submenu:[{type:"separator"},{label:"Create With AI",role:"generateWebPage",ellipsis:!0,visible:Ie.isOn("aiAndTheming")},{label:"New Web Page",role:"newWebPage"},{label:"New Canvas Page",role:"newPage"},{type:"separator"},{label:d.importSketch,ellipsis:!0,role:"importSketch"},{label:d.importFigma,ellipsis:!0,role:"importFigma",accelerator:w.importFigma},{type:"separator"}]},Df={label:"Edit",submenu:[{label:d.undo,role:"undo"},{label:d.redo,role:"redo"},{type:"separator"},{label:d.cut,role:"cut",requiresUserInteraction:!0},{label:"Copy",submenu:[{label:d.copy,role:"copy",requiresUserInteraction:!0},{label:d.copyStyle,role:"copyStyle",accelerator:w.copyStyle,requiresUserInteraction:!0},{label:d.copyImage,role:"copyImage",accelerator:w.copyImage,requiresUserInteraction:!0},{label:d.copyImport,role:"copyImport",requiresUserInteraction:!0},{label:d.copyLink,role:"copyLink",requiresUserInteraction:!0},{label:d.copyCSS,role:"copyCSS",requiresUserInteraction:!0},{label:d.copySVG,role:"copySVG",requiresUserInteraction:!0},{label:d.copyText,role:"copyText",requiresUserInteraction:!0},{label:d.copyGrid,role:"copyGrid",requiresUserInteraction:!0},{label:d.copyPageEffects,role:"copyPageEffects",requiresUserInteraction:!0},{type:"separator"},{label:d.copyCodeComponentIdentifier,role:"copyCodeComponentIdentifier",requiresUserInteraction:!0}]},{label:"Paste",submenu:[{label:d.paste,role:"paste",requiresUserInteraction:!0},{label:d.pasteStyle,role:"pasteStyle",accelerator:w.pasteStyle,requiresUserInteraction:!0},{label:d.pastePageEffects,role:"pastePageEffects",requiresUserInteraction:!0},{label:d.pasteGrid,role:"pasteGrid",requiresUserInteraction:!0}]},{label:d.duplicate,role:"duplicate",accelerator:w.duplicate},{label:d.delete,role:"delete"},{type:"separator"},{label:d.rename,role:"rename",accelerator:w.rename},{label:d.toggleLayerLock,role:"toggleLayerLock",accelerator:w.toggleLayerLock},{label:d.toggleLayerVisible,role:"toggleLayerVisible",accelerator:w.toggleLayerVisible},{type:"separator"},{label:d.selectMostRecentPage,role:"selectMostRecentPage",accelerator:w.selectMostRecentPage},{label:d.selectGroundNode,role:"selectGroundNode",acceleratorLabel:w.selectGroundNode,acceleratorLabelWindows:dt.selectGroundNode},{label:d.selectParent,role:"selectParent",acceleratorLabel:w.selectParent},{label:d.selectAll,role:"selectAll"},{label:d.selectSiblings,role:"selectSiblings",accelerator:w.selectSiblings},{label:d.selectChildren,role:"selectChildren",accelerator:w.selectChildren},{label:d.selectAllTopParents,role:"selectAllTopParents"},{label:d.selectTextNodes,role:"selectTextNodes"}]},Uf={label:"Tool",submenu:[{label:"Insert",role:"toggleInsert",accelerator:w.toggleInsert},{label:"Library",role:"toggleLibraryModal",acceleratorLabel:w.toggleLibraryModal},{type:"separator"},{label:"Layout",visible:Y.isOn("sites"),submenu:[{label:d[O.actionForCase(20)],role:O.actionForCase(20),accelerator:w[O.actionForCase(20)]},{label:d[O.actionForCase(21)],role:O.actionForCase(21),accelerator:w[O.actionForCase(21)]},{label:d[O.actionForCase(22)],role:O.actionForCase(22),accelerator:w[O.actionForCase(22)]},{label:d[O.actionForCase(23)],role:O.actionForCase(23),accelerator:w[O.actionForCase(23)]},{label:d[O.actionForCase(25)],role:O.actionForCase(25)},{label:d[O.actionForCase(24)],role:O.actionForCase(24)}]},{label:d[O.actionForCase(12)],role:O.actionForCase(12),accelerator:w[O.actionForCase(12)]},{label:d[O.actionForCase(10)],role:O.actionForCase(10),accelerator:w[O.actionForCase(10)]},{label:d[O.actionForCase(11)],role:O.actionForCase(11),accelerator:w[O.actionForCase(11)]},{label:d[O.actionForCase(14)],role:O.actionForCase(14),accelerator:w[O.actionForCase(14)]},{label:d.startLinkTool,role:"startLinkTool",accelerator:w.startLinkTool},{label:d[O.actionForCase(19)],role:O.actionForCase(19),accelerator:w[O.actionForCase(19)]},{label:d[O.actionForCase(26)],role:O.actionForCase(26)},{label:d[O.actionForCase(27)],role:O.actionForCase(27)},{label:d[O.actionForCase(13)],role:O.actionForCase(13),accelerator:w[O.actionForCase(13)]},{label:d[O.actionForCase(33)],role:O.actionForCase(33),accelerator:w[O.actionForCase(33)]},{label:d[O.actionForCase(16)],role:O.actionForCase(16),accelerator:w[O.actionForCase(16)]},{label:d[O.actionForCase(15)],role:O.actionForCase(15),accelerator:w[O.actionForCase(15)]},{label:d[O.actionForCase(17)],role:O.actionForCase(17)},{label:d[O.actionForCase(18)],role:O.actionForCase(18)},{type:"separator"},{label:d[O.actionForCase(4)],role:O.actionForCase(4),accelerator:w[O.actionForCase(4)]},{label:d[O.actionForCase(40)],role:O.actionForCase(40),accelerator:w[O.actionForCase(40)]},{label:d[O.actionForCase(39)],role:O.actionForCase(39),accelerator:"/"},{label:d.sampleColor,role:"sampleColor",accelerator:w.sampleColor}]},Ff={label:"Layout",submenu:[{label:d.addEnclosingFrame,role:"addEnclosingFrame",accelerator:w.addEnclosingFrame},{label:d.addEnclosingStack,role:"addEnclosingStack",accelerator:w.addEnclosingStack},{label:d.removeFramePreservingChildren,role:"removeFramePreservingChildren",accelerator:w.removeFramePreservingChildren},{type:"separator"},{label:d.autoSize,role:"autoSize",accelerator:w.autoSize},{label:d.sizeToFitContent,role:"sizeToFitContent",accelerator:w.sizeToFitContent},{type:"separator"},{label:d.moveToFront,role:"moveToFront",accelerator:w.moveToFront},{label:d.moveForward,role:"moveForward",accelerator:w.moveForward},{label:d.moveBackward,role:"moveBackward",accelerator:w.moveBackward},{label:d.moveToBack,role:"moveToBack",accelerator:w.moveToBack},{type:"separator"},{label:"Align",submenu:[{label:d.alignLeft,role:"alignLeft",accelerator:w.alignLeft},{label:d.alignCenter,role:"alignCenter",accelerator:w.alignCenter},{label:d.alignRight,role:"alignRight",accelerator:w.alignRight},{type:"separator"},{label:d.alignTop,role:"alignTop",accelerator:w.alignTop},{label:d.alignMiddle,role:"alignMiddle",accelerator:w.alignMiddle},{label:d.alignBottom,role:"alignBottom",accelerator:w.alignBottom},{type:"separator"},{label:d.distributeHorizontal,role:"distributeHorizontal",accelerator:w.distributeHorizontal,acceleratorWindows:dt.distributeHorizontal},{label:d.distributeVertical,role:"distributeVertical",accelerator:w.distributeVertical,acceleratorWindows:dt.distributeVertical},{type:"separator"},{label:d.alignToSelection,role:"alignToSelection"},{label:d.alignToParent,role:"alignToParent"}]}]},Of={label:"Text",submenu:[{label:d.makeBold,role:"makeBold",accelerator:w.makeBold},{label:d.makeItalic,role:"makeItalic",accelerator:w.makeItalic},{label:d.makeUnderlined,role:"makeUnderlined",accelerator:w.makeUnderlined},{label:d.chooseTypeface,role:"chooseTypeface",accelerator:w.chooseTypeface},{label:d.rewriteText,ellipsis:!0,role:"rewriteText"},{label:d.rewriteTextInPlace,role:"rewriteTextInPlace"}]},Bf={label:"Graphic",submenu:[{label:"Group",role:"group",accelerator:w.group},{label:"Ungroup",role:"ungroup",accelerator:w.ungroup},{type:"separator"},{label:d.flipHorizontal,role:"flipHorizontal"},{label:d.flipVertical,role:"flipVertical"},{type:"separator"},{label:"Flatten",role:"flattenPath"},{label:"Reverse Path Direction",role:"reversePath"}]},_f={label:"Component",submenu:[{label:d.makeComponent,ellipsis:!0,role:"makeComponent",accelerator:w.makeComponent},{label:d.makeCodeComponent,ellipsis:!0,role:"makeCodeComponent",accelerator:w.makeCodeComponent},{type:"separator"},{label:d.showComponentMaster,role:"showComponentMaster"},{label:d.detachComponentInstanceFromMaster,role:"detachComponentInstanceFromMaster"},{label:d.updateComponentMasterFromInstance,role:"updateComponentMasterFromInstance"},{type:"separator"},{label:d.resetComponentInstanceOverrides,role:"resetComponentInstanceOverrides"}]},Hf={label:"Preview",submenu:[{role:"showPreview",accelerator:w.showPreview},{role:"showPreviewNewWindow",accelerator:w.showPreviewNewWindow,requiresUserInteraction:!0}]},Wf={label:"Code",submenu:[{label:d.createCodeComponent,role:"createCodeComponent"},{label:d.createOverride,role:"createOverride"},{label:d.createDataFileFromEndpoint,ellipsis:!0,role:"createDataFileFromEndpoint",visible:Y.isOn("sites")&&Ie.isOn("collectionsFromCode")},{type:"separator"},{label:d.saveCodeFile,role:"saveCodeFile",acceleratorLabel:w.saveCodeFile},{type:"separator"},{label:d.showAPIDocumentation,role:"showAPIDocumentation",requiresUserInteraction:!0}]},qf={label:"Help",submenu:[{label:d.sitesGetStarted,role:"sitesGetStarted",requiresUserInteraction:!0},{label:d.startAppTour,role:"startAppTour",requiresUserInteraction:!0},{type:"separator"},{label:d.requestFeature,role:"requestFeature",requiresUserInteraction:!0},{label:d.openCommunity,role:"openCommunity",requiresUserInteraction:!0},{label:d.openChangelog,role:"openChangelog",requiresUserInteraction:!0},{type:"separator"},{label:d.keyboardShortcuts,role:"keyboardShortcuts"},{label:d.copyVersion,role:"copyVersion",requiresUserInteraction:!0}]},Kl={label:d.goToProjects,role:"goToProjects"},Rf={label:d.quickActions,role:"quickActions",ellipsis:!0,accelerator:w.quickActions},Zl=t=>({visible:Y.isOn("sites"),role:"publishSite",accelerator:t?w.publishSite:void 0}),wo=Yn({view:()=>{let t=[{label:d.zoomIn,role:"zoomIn",accelerator:w.zoomIn},{label:d.zoomOut,role:"zoomOut",accelerator:w.zoomOut},{label:d.resetZoom,role:"resetZoom",accelerator:w.resetZoom,acceleratorWindows:dt.resetZoom},{label:d.zoomToFitAll,role:"zoomToFitAll",accelerator:w.zoomToFitAll,acceleratorWindows:dt.zoomToFitAll},{label:d.zoomToFitSelection,role:"zoomToFitSelection",accelerator:w.zoomToFitSelection,acceleratorWindows:dt.zoomToFitSelection},{label:d.collapseAllLayers,role:"collapseAllLayers",accelerator:w.collapseAllLayers}];return Y.isOn("sites")&&t.push({type:"separator"},{label:d.showPages,role:"showPages",accelerator:w.showPages},{label:d.showLayers,role:"showLayers",accelerator:w.showLayers},{label:d.showAssets,role:"showAssets",accelerator:w.showAssets}),t.push({type:"separator"},{label:d.toggleInterface,role:"toggleInterface",accelerator:w.toggleInterface,acceleratorWindows:dt.toggleInterface},{label:d.toggleShowAllLinks,role:"toggleShowAllLinks"},{label:d.toggleRulers,role:"toggleRulers",accelerator:w.toggleRulers,acceleratorWindows:dt.toggleRulers},{label:d.toggleGrids,role:"toggleGrids",accelerator:w.toggleGrids,acceleratorWindows:dt.toggleGrids},{label:d.toggleCondensedTooltips,role:"toggleCondensedTooltips"},{label:d.toggleToolbarLabels,role:"toggleToolbarLabels"},{type:"separator"},{label:d.toggleShowPixelGrid,role:"toggleShowPixelGrid"}),{label:"View",submenu:t}},webViewMenu:()=>({label:"View",submenu:[{label:"Appearance",submenu:[{label:d.toggleAppearanceSystem,role:"toggleAppearanceSystem"},{role:"toggleAppearance",accelerator:w.toggleAppearance,acceleratorWindows:dt.toggleAppearance}]},{type:"separator"},...Array.isArray(wo.view.submenu)?wo.view.submenu:[]]}),webFileMenu:()=>({label:"File",submenu:[{role:"newProject",ellipsis:!0,visible:Ie.isOn("insertPages"),accelerator:Ie.isOn("insertPages")?w.newProject:void 0,requiresUserInteraction:!0},{role:"newProjectFromTemplate",ellipsis:!0,label:Ie.isOn("insertPages")?d.newProjectFromTemplate:d.newProject,accelerator:Ie.isOn("insertPages")?void 0:w.newProject},{role:"copyRemixLink",requiresUserInteraction:!0},{role:"duplicateProject",requiresUserInteraction:!0},{role:"duplicateAsSite",requiresUserInteraction:!0,badge:"new"},{role:"archiveProject"},{role:"unarchiveProject"},{role:"toggleVersionHistory",label:d.toggleVersionHistory,accelerator:w.toggleVersionHistory},{type:"separator",visible:Y.isOn("sites")},Zl(!0),{visible:Y.isOn("sites"),role:"openPublishedSite",accelerator:w.openPublishedSite},{type:"separator"},{role:"uploadImage",accelerator:w.uploadImage,requiresUserInteraction:!0},{type:"separator"},{label:d.exportToHTML,role:"exportToHTML"},{type:"separator"},...Array.isArray(Gl.submenu)?Gl.submenu:[],{type:"separator"},{visible:Y.isOn("sites"),role:"inviteCollaborators",ellipsis:!0},{role:"copyProjectLink",requiresUserInteraction:!0},{role:"saveProjectAsTemplate"},{role:"saveTemplateAsProject"}]}),preferencesMenu:()=>({label:"Preferences",submenu:[{label:d.useDirectSelect,role:"useDirectSelect"},{label:d.useSmartLayoutPins,role:"useSmartLayoutPins"},{label:d.reverseZoomDirection,role:"reverseZoomDirection"},{label:d.animateOnZoom,role:"animateOnZoom"},{label:d.autoSwitchToLayers,role:"autoSwitchToLayers"},{label:d.showScrollToContentToast,role:"showScrollToContentToast"},{label:"Show Packages",role:"showPackages",badge:"Legacy"},{type:"separator"},{label:d.resetDefaultFrameBackground,role:"resetDefaultFrameBackground"},{label:d.resetVideoBanners,role:"resetVideoBanners"},{type:"separator"},{label:d.nudgePreferences,role:"nudgePreferences"},{type:"separator"},{label:d.togglePerformanceMode,role:"togglePerformanceMode"}]}),settingsMenu:()=>({visible:Y.isOn("sites"),label:"Site Settings",submenu:[{label:d.openSiteSettings,role:"openSiteSettings",accelerator:w.openSiteSettings},{type:"separator"},{label:d.openGeneralSettings,role:"openGeneralSettings"},{label:d.openDomainSettings,role:"openDomainSettings"},{label:d.openRedirects,role:"openRedirects"},{label:d.openVersions,role:"openVersions"},{label:d.openAnalytics,role:"openAnalytics"},{label:d.openPlans,role:"openPlans"}]})}),$f={role:"openAccountSettings",label:d.openAccountSettings},ws=Yn({mobileWebAppMenu:()=>[Kl,{type:"separator"},Zl(!1)],webAppMenu:()=>[Kl,{type:"separator"},Rf,{type:"separator"},wo.webFileMenu,Df,wo.webViewMenu,Uf,Ff,Of,Bf,_f,Hf,Wf,wo.preferencesMenu,{type:"separator"},wo.settingsMenu,qf,$f]});var Pt=M(L());function Yl({onDismiss:t,onConfirm:e,unsupportedFeatures:o}){return Pt.default.createElement(jt,{visible:!0,onDismiss:t,className:Et.container},Pt.default.createElement(x,{gap:20},Pt.default.createElement(Ae,{className:Et.title},"Duplicate as Site"),Pt.default.createElement(Ae,{size:Bi.size.base,className:Et.secondaryText},"Some features of your project are not supported and will be not be duplicated:",Pt.default.createElement("ul",null,o.map((r,n)=>Pt.default.createElement("li",{key:n},r)))),Pt.default.createElement(x,{direction:"row"},Pt.default.createElement(oe,{title:"Cancel",onClick:t,large:!0,className:Et.grow}),Pt.default.createElement(oe,{onClick:e,variant:"primary",large:!0,className:Et.grow},"Duplicate"))))}var Jl="dismissed-legacy-deprecation-toast",Vf=14;function Xl(t){if(t.canvasFeatures.sites)return;let e=localStorage.getItem(Jl);if(e){let i=new Date(e);if(i.setDate(i.getDate()+Vf),i>new Date)return}let o=["e96bd9c5-e994-4069-955c-a665e70135ef"],r=window==null?void 0:window.framerUser,n=r==null?void 0:r.spaces.find(i=>i.id===t.space.id);qe(n)&&n.organization&&o.includes(n.organization.id)||B({type:"add",variant:"warning",icon:"warning",text:"Legacy projects will become view-only on September 30, 2023",key:"legacy-deprecation-toast",duration:1e4,action:{title:"Learn more",onClick(){V("ui_interaction",{page:"legacy-ui-deprecation-toast",id:"learn_more"}),localStorage.setItem(Jl,new Date().toISOString()),ot("https://www.framer.com/learn/legacy-ui-deprecation/")}}})}var ye=M(L());var Ql="modal_m1k7kvam",ep="moveDraftTitle_m12ee7ht",tp="moveDraftDescription_m1jpz33r",op="moveDraftButton_mwem6zi",rp="confirmMoveDraftButton_c1qp1m89",np="buttonChevron_bl7xnjh";function sp({project:t,user:e,onShowMoveProjectMenu:o,onConfirmMoveProject:r,moveProjectDestination:n,onDismiss:i}){let s=(0,ye.useRef)(null),[p,c]=(0,ye.useState)(!1);ye.default.useEffect(()=>{V("ui_impression",{page:"deprecate-drafts-modal"})},[]);let l=(0,ye.useMemo)(()=>{let g=mo(t,e),T=g.label==="Drafts"?"Choose\u2026":"Drafts";return{...g,label:T}},[t,e]);async function u(){if(s.current===null)return;let g=s.current.getBoundingClientRect();c(!0),await o({location:{x:g.left,y:g.bottom},showBackToDashboardItem:!1,skipConfirmation:!0,hideDrafts:!0}),c(!1)}let m=ye.default.useCallback(async()=>{V("ui_interaction",{page:"deprecate-drafts-modal",id:"move-to-teams"}),await r(),i()},[r,i]);return ye.default.createElement(jt,{hasBackdrop:!0,visible:!0,onDismiss:Re,zIndex:12,className:Ql},ye.default.createElement(x,{gap:15,alignItems:"flex-start",justifyContent:"flex-start"},ye.default.createElement(x,{gap:10},ye.default.createElement("div",{className:ep},"Select a Team"),ye.default.createElement("div",{className:tp},ye.default.createElement(P,null,"You have multiple teams where you can"),ye.default.createElement("br",null),ye.default.createElement(P,null,"create projects. Please choose a team"),ye.default.createElement("br",null),ye.default.createElement(P,null,"for this project to continue editing."))),ye.default.createElement(oe,{className:op,large:!0,onClick:u,ref:s},ye.default.createElement("div",{className:ve},n||l.label),ye.default.createElement("div",{className:np},ye.default.createElement(kr,{isActive:p}))),ye.default.createElement(oe,{onClick:m,large:!0,className:rp,variant:"primary",enabled:!!n&&n!==l.label},ye.default.createElement(P,null,"Confirm"))))}var Co=M(L());var ip="modal_m1sbcbyn",ap="title_t14j9fcj",Cs="checkBoxLabel_cr11tra",Ss="checkBoxLabelLink_chr9530",cp="continueButton_chz9b7s";var je=M(L());var Gf=tt("signup");function pp({firstName:t,lastName:e,email:o,onContinue:r}){let[n,i]=je.default.useState(!1),[s,p]=je.default.useState(!1),c=je.default.useCallback(l=>{A.post("/auth/v2/signup/google-one-tap",{subscribe:s,origin:"framer-web",firstName:t,lastName:e,email:o}).then(r).catch(u=>Gf.reportError(u)),l.preventDefault()},[s,o,t,e,r]);return je.default.createElement("form",{onSubmit:c},je.default.createElement(x,{gap:25,padding:10},je.default.createElement("div",{className:ap},"Before you continue\u2026"),je.default.createElement(x,{gap:20,direction:"column"},je.default.createElement(x,{direction:"row",alignItems:"center"},je.default.createElement(Yt,{large:!0,id:"tos-accept",value:n,onChange:i}),je.default.createElement("label",{htmlFor:"tos-accept"},je.default.createElement(Kf,null))),je.default.createElement(x,{direction:"row",alignItems:"center"},je.default.createElement(Yt,{large:!0,id:"tos-email-optin",title:"Send me updates via email. Unsubscribe any time",value:s,onChange:p}),je.default.createElement("label",{htmlFor:"tos-email-optin"},je.default.createElement(Ae,{className:Cs},"Send me updates via email. Unsubscribe any time")))),je.default.createElement(oe,{type:"submit",large:!0,variant:"primary",title:"Continue","aria-label":"continue",enabled:n,className:cp})))}function Kf(){return je.default.createElement(Ae,{className:Cs},"I agree to the"," ",je.default.createElement("a",{href:"https://www.framer.com/support/accounts/terms-of-service/",target:"_blank",className:Ss},"Terms of Service")," ","and"," ",je.default.createElement("a",{href:"https://www.framer.com/support/accounts/privacy-statement/",target:"_blank",className:Ss},"Privacy Statement"))}function Zf(t,e){var o;(o=window.dataLayer)==null||o.push({event:"eventTracking",trackingEventCategory:e,trackingEventAction:t,trackingEventLabel:"",trackingEventValue:""})}var up=()=>Zf("Web","CompleteRegistration");function dp({accountApi:t}){var i;let{account:e,fetchProfile:o,fetchMe:r}=t;Co.default.useEffect(()=>{up(),o()},[o]);let n=Co.default.useCallback(async()=>{await r(),a.modalStore.set({type:"Welcome",source:"automatic"})},[r]);return Co.default.createElement(jt,{hasBackdrop:!0,visible:!0,onDismiss:Re,className:ip},(i=e==null?void 0:e.profile)!=null&&i.email?Co.default.createElement(pp,{firstName:e.profile.firstName,lastName:e.profile.lastName,email:e.profile.email,onContinue:n}):Co.default.createElement(vt,null))}var fp=M(L());var mp=new Zr;function gp(t,e){return(0,fp.useEffect)(()=>{let o=mp,r=[];return t((n,i,s)=>{o.set(n,i,s),r.push(n)}),()=>{r.forEach(n=>o.remove(n))}},e),mp}var Tt=M(L());var Yf=tt("useHistory"),Jf={key:"project"};function Xf(t,e){return!!(t.key==="project"&&e.key==="project"||t.key==="preview"&&e.key==="preview"&&ec(t.previewItem,e.previewItem))}function Qf(t){if(t===null)return!0;if(typeof t=="object"&&t!==null){let e=t.key;return e==="project"||e==="preview"}return!1}function yp(t){return t||Jf}function hp({project:t,projectInitialQueryString:e,activeNodeId:o,currentCodeFileId:r,preview:n=!1}){let i=new URL("/projects/"+_c(t),window.location.origin);i.search=e,i.searchParams.delete("preview"),n&&i.searchParams.set("preview","1");let s=(Y.isOn("codeModules")||Ie.isOn("disableStoreAndLegacyCode"))&&r?r:null;return ic(i,{nodeId:o,codeModuleLocalId:s}),i.href}function eg({shareLinkUrl:t}){let e=new URL(t);return e.searchParams.set("editor","1"),e.href}function bp({project:t,projectInitialQueryString:e,activeNodeId:o,currentCodeFileId:r,shareLinkUrl:n,previewItem:i}){let s=t.canvasFeatures.sites?hp({project:t,projectInitialQueryString:e,activeNodeId:o,currentCodeFileId:r,preview:!0}):eg({shareLinkUrl:n});return{project:{key:"project",url:hp({project:t,projectInitialQueryString:e,activeNodeId:o,currentCodeFileId:r})},preview:{key:"preview",url:s,previewItem:i}}}function vp({url:t,...e}){(t!==window.location.href||!Xf(e,yp(window.history.state)))&&window.history.replaceState(e,"",t)}function Pp(t,e){let o=Tt.default.useRef(t),r=Tt.default.useRef(bp(t)),n=Tt.default.useRef("project");Tt.default.useEffect(()=>{let c=r.current,l=n.current;vp(c[l])},[]);let i=Tt.default.useCallback(c=>{Object.assign(o.current,c);let l=bp(o.current);r.current=l;let u=n.current;vp(l[u])},[]),s=Tt.default.useCallback(c=>{let l=r.current,u=n.current;if(u===c)return;let{url:m,...g}=l[c];u==="project"&&c==="preview"?(window.history.pushState(g,"",m),n.current=c):u==="preview"&&c==="project"&&window.history.back()},[]),p=Tt.default.useCallback(c=>{if(!Qf(c.state)){Yf.warn("Unexpected history state: ",c.state);return}let l=yp(c.state);n.current=l.key;let m=r.current.project.url;l.key==="project"&&m!==window.location.href&&window.history.replaceState(l,"",m),e(l)},[e]);return Tt.default.useEffect(()=>(window.addEventListener("popstate",p),()=>window.removeEventListener("popstate",p)),[p]),{updateHistoryData:i,setHistoryState:s}}var bn=M(L());function wp(t,e,o){let[r,n]=(0,bn.useState)(null);return(0,bn.useEffect)(()=>{let i=!0,s=t.filter(p=>Be(p)?e===p.ownerId:!0).map(({id:p})=>p);return o.getCollectionsMany({spaceIds:s}).then(p=>{i&&n(p)}).catch(()=>{}),()=>{i=!1}},[t,o,e]),{collections:r}}var Wt=M(L());function Cp({project:t}){let[e,o]=(0,Wt.useReducer)(rg,{project:t},tg);(0,Wt.useEffect)(()=>{localStorage.setItem(`shared-preview-fullscreen-${t.id}`,JSON.stringify(e.fullscreen))},[t.id,e.fullscreen]),(0,Wt.useEffect)(()=>{localStorage.setItem(`shared-preview-highlights-${t.id}`,JSON.stringify(e.highlights))},[t.id,e.highlights]);let r=(0,Wt.useMemo)(()=>ng(o),[]);return[e,r]}function Sp({project:t,shareLink:e}){return(0,Wt.useMemo)(()=>(Se(t.shareLinks[0],"Cannot build share URL: empty share links"),$c({shareId:t.shareLinks[0].id,frameId:e.nodeId,title:t.title,fullscreen:e.fullscreen,highlights:Y.isOn("sites")?!1:e.highlights},Kt().app)),[t,e])}function tg({project:t}){let e=t.settings.featureFlags.canHidePreviewInterface==="on",o=localStorage.getItem(`shared-preview-fullscreen-${t.id}`),r=o&&e?JSON.parse(o):!1,n=localStorage.getItem(`shared-preview-highlights-${t.id}`),i=n?JSON.parse(n):!0;return Se(t.shareLinks[0],"Cannot initialize useShareLink: empty share links"),{publicAccess:t.shareLinks[0].publicAccess,fullscreen:r,highlights:i}}function og(t,e){e.type==="setNodeId"?t.nodeId=e.value:e.type==="setPublicAccess"?t.publicAccess=e.value:e.type==="setFullscreen"?t.fullscreen=e.value:e.type==="setHighlights"?t.highlights=e.value:Te(e)}function rg(t,e){return qr(t,o=>og(o,e))}function ng(t){return{setNodeId(e){t({type:"setNodeId",value:e})},setPublicAccess(e){t({type:"setPublicAccess",value:e})},setFullscreen(e){t({type:"setFullscreen",value:e})},setHighlights(e){t({type:"setHighlights",value:e})}}}var kp=M(L());function Ip(){return(0,kp.useCallback)(async(t,e,o)=>{e&&(o||(o=a.canvasStore.getViewportCenter()),await gc(a,[e],o,t))},[])}var ar=M(L());function Tp({channel:t,project:e,canMoveProject:o,onShowMoveProjectMenu:r,onShowUpgradeOrTrialModal:n}){let i=new ht,s=(0,ar.useRef)(i);(0,ar.useEffect)(()=>{if(!t)return;let p=Pr.on(t).expect();return Pr.on(t).register({currentProjectStream:s.current.newStream,showMoveProjectMenu:async({location:c})=>{await r({location:c,showBackToDashboardItem:!1})},showUpgradeOrTrialModal:async({show:c,trackingPage:l})=>{let u;switch(c){case"fonts":u="fonts";break;default:Te(c)}n(u,l)}}),()=>{Pr.unregister(p)}},[t,o,r,n]),(0,ar.useEffect)(()=>{var p,c,l;s.current.emit({title:(p=e.title)!=null?p:void 0,space:{...e.space,displayName:(c=e.space.displayName)!=null?c:void 0,icon:(l=e.space.icon)!=null?l:void 0},shareLinks:e.shareLinks,canMoveProject:o})},[e,o])}var Ap="moveProjectMenu_mqspbls";var Mp=new ht,Lp=!1;function xp({channel:t,user:e,permissions:o}){if(Mp.emit(o),Lp)return;let r={getSessionIdentity:async()=>({user:e}),permissionsStream:Mp.newStream};Si.on(t).register(r),Lp=!0}var Pn=M(L());var sg="Settings";function jp(){let t=Lc(qa,pa,"employeesOnlySettings");return[{label:sg,submenu:t.options},t.actionHandlers]}var ig="Employees Only",vn=async t=>{var o;let e=(o=a.remoteDocument)==null?void 0:o.projectId;e&&(await A.post(`/web/projects/${e}`,{canvasFeatures:{[t]:!Y.isOn(t)}}),window.location.reload())};function ag(){return xc({label:"Copy Duplicate Link",role:"copyDuplicateLink",action(){if(!a.remoteDocument)return;let e=`https://${window.location.hostname.endsWith(".development.framer.com")?"development.framer.com":"framer.com"}/projects/new?duplicate=${a.remoteDocument.projectId}`;Ye(e).catch(q)},requiresUserInteraction:!0},{label:"Duplicate Version\u2026",role:"duplicateProjectWithVersion",action(){a.modalStore.set({type:"DuplicateProjectWithVersion",source:"main_menu"})}},{label:"Download Document Fixture\u2026",role:"downloadDocumentFixture",action(){a.modalStore.set({type:"DownloadDocumentFixture",source:"main_menu"})}},{type:"separator"},{label:"Use Code Modules in Project",role:"toggleCodeModulesProjectFeature",async action(){var e;let t=(e=a.remoteDocument)==null?void 0:e.projectId;t&&(await A.post(`/web/projects/${t}`,{canvasFeatures:{codeModules:!Y.isOn("codeModules")}}),window.location.reload())},checked:()=>Y.isOn("codeModules")},{label:"Instant NPM",submenu:[{label:"Reinstall Import Map",role:"reinstallImportMap",async action(){let t="reinstall-import-map";B({type:"add",key:t,text:"Reinstalling import map dependencies",variant:"progress",duration:1/0,showCloseButton:"never"});try{let{importMap:e}=await a.modulesStore.reinstallNpmDependencies();B({type:"add",key:t,text:`Reinstalled ${Object.keys(e.imports).length} dependencies. Reloading Project.`,duration:5e3,variant:"success"}),window.location.reload()}catch(e){B({type:"add",key:t,text:`Reinstall failed: ${e}`,variant:"error",duration:5e3})}}},{label:"Rebuild Import Map from Dependencies",role:"rebuildImportMap",async action(){let t="rebuild-import-map";B({type:"add",key:t,text:"Rebuilding Import Map from Dependencies.json",variant:"progress",duration:5e3});try{let{importMap:e}=await a.modulesStore.rebuildImportMapFromDependencies();B({type:"add",key:t,text:`Built an import map with ${Object.keys(e.imports).length} dependencies. Reloading Project.`,duration:5e3,variant:"success"}),window.location.reload()}catch(e){console.error("Rebuild of import map failed",e),B({type:"add",key:t,text:`Rebuild of import map failed: ${e}`,variant:"error",duration:1/0})}}},{label:"Clear NPM Dependencies",role:"clearNpmDependencies",async action(){async function t(){try{await a.modulesStore.clearNpmDependencies(),B({type:"add",text:"NPM Dependencies are cleared. Reloading Project.",variant:"success",duration:5e3}),window.location.reload()}catch(e){B({type:"add",text:`Clearing Dependencies failed: ${e}`,variant:"error",duration:5e3})}}a.modalStore.set({type:"Confirmation",title:"Clear NPM Dependencies",variant:"destructive",description:"This will break any local or external components in your project that use Instant NPM. Are you sure?",onConfirm:t,confirmLabel:"Confirm",source:"main_menu"})}}]},{label:"Repair Corrupt Modules",role:"repairCorruptModules",async action(){let t=Object.values(a.modulesStore.localModules),e="repair-corrupt-modules",o={method:"HEAD",mode:"cors"},r=[];for(let[c,l]of t.entries()){B({type:"add",key:e,text:`Analyzing module ${c+1} out of ${t.length} for corruption\u2026`,duration:1/0,variant:"progress"});let u=a.modulesStore.getPersistedModuleByLocalId(l.localId);if(!u)continue;let m=[];try{for(let[g,T]of Object.entries(u.files))(await fetch(u.baseURL+T,o)).ok||m.push({type:g,name:T})}catch{continue}m.length&&r.push({localId:l.localId,type:l.type,files:m})}if(!r.length){B({type:"add",key:e,text:"No corrupt modules found.",duration:5e3,variant:"success"});return}B({type:"remove",key:e}),console.log(r);let i=["The following module(s) are corrupt. Repair?","WARNING: This will replace the corrupt files with empty content.",r.map(({localId:c,files:l})=>`${c} (${l.map(u=>u.name).join(", ")})`).join(`
`)];if(!window.confirm(i.join(`

`)))return;let s=r.length,p=0;for(let c=0;c<s;c++){let l=r[c];if(l){B({type:"add",key:e,text:`Repairing corrupt module ${c+1} out of ${s}\u2026`,duration:1/0,variant:"progress"});try{let u=a.modulesStore.forType(l.type).getByLocalId(l.localId),m=l.files.map(g=>({...g,content:""}));await u.persist({files:m})}catch(u){B({type:"add",text:`Repairing ${l.localId} failed: ${u}`,variant:"error",duration:5e3}),p++}}}B({type:"add",key:e,text:p>0?`Repaired ${s-p} out of ${s} module(s).`:`Repaired ${s} module(s).`,duration:5e3,variant:p>0?"error":"success"})}},{label:"Replace module in CMS",role:"replaceModuleInCMS",async action(){let t="repair-corrupt-modules",e=prompt("existing module identifier to replace"),o=prompt("new module identifier to replace");e&&o&&Vo(e)&&Vo(o)?a.processWhenReady(()=>{Oa(a.tree,e,o),B({type:"add",key:t,text:`replaced all references of from:'${e}' with to:'${o}' in CMS collection items`,duration:5e3,variant:"success"})}):B({type:"add",key:t,text:`from:'${e}' OR to:'${o}' are not values is not a valid ModuleExportIdentifer`,duration:5e3,variant:"error"})}},{label:"Store Local Modules in Document",role:"toggleUseTreeForLocalModules",action(){let t=a.modulesStore.modulesStorage;t.usingLocalModulesInTree()?t.stopUsingLocalModulesInTree():t.startUsingLocalModulesInTree()},visible:()=>Ie.isOn("localModulesInTree"),checked:()=>a.modulesStore.modulesStorage.usingLocalModulesInTree()},{label:"Vacuum Modules w/ Deleted Nodes",role:"vacuumModules",async action(){let t=Object.values(a.modulesStore.localModules),e=t.filter(s=>{let p=s.type;switch(p){case"canvasComponent":case"collection":case"css":case"prototype":case"screen":case"webPageMetadata":break;case"codeFile":case"componentPresets":case"config":case"siteMetadata":return!1;default:Te(p,`Unhandled module type ${s.type}`)}let c=a.tree.get(s.name);if(!c)return!0;try{if((p==="webPageMetadata"?Ga(c.id).type:Va(c,a.tree))!==p)return!0}catch{return!0}return!1}),o=a.modulesStore.localModules["config/site"];o&&e.push(o);let r="vacuum-modules";if(!e.length){B({type:"add",key:r,text:"No modules to delete.",duration:5e3,variant:"success"});return}console.log(e);let n=`${e.length} out of ${t.length}`,i=e.map(s=>s.localId).join(", ");if(window.confirm(`Found ${n} unused module(s). Delete?

${i}`)){B({type:"add",key:r,text:`Deleting ${e.length} modules\u2026`,duration:1/0,variant:"progress"});try{await a.modulesStore.deleteModules(e.map(s=>s.localId)),B({type:"add",key:r,text:`Deleted ${e.length} module(s).`,duration:5e3,variant:"success"})}catch{B({type:"add",key:r,text:"Failed to delete one or more modules. See console for more details.",duration:5e3,variant:"error"})}}},visible:()=>Y.isOn("codeModules")},{type:"separator"},{label:"Sites Project",role:"toggleSitesProjectFeature",action:()=>vn("sites").catch(q),checked:()=>Y.isOn("sites")},{label:"Kit Project",role:"toggleKitProjectFeature",action:()=>vn("kit").catch(q),checked:()=>Y.isOn("kit")},{label:"Multi Language",role:"toggleMultiLanguage",action:()=>vn("multiLanguage").catch(q),checked:()=>Y.isOn("multiLanguage")},{label:"Skip Duplication Page",role:"toggleSkipInterstitial",action:()=>vn("skipInterstitial").catch(q),checked:()=>Y.isOn("skipInterstitial")},{label:"Show Status Bar",role:"toggleStatusBar",accelerator:"CommandOrControl+Option+Shift+B",action(){a.chromeStore.statusBarIsVisible=!a.chromeStore.statusBarIsVisible},checked:()=>a.chromeStore.statusBarIsVisible},{label:"Show Debug Bar",role:"toggleDebugBar",accelerator:"CommandOrControl+Shift+D",action(){a.persistedUserDefaults.showDebugBar=!a.persistedUserDefaults.showDebugBar},checked:()=>a.persistedUserDefaults.showDebugBar},{label:"Display DOM Layout Debugging Panel",role:"displayDOMLayoutDebuggingPanel",action(){let t=a.persistedUserDefaults.displayDOMLayoutDebuggingPanel;a.persistedUserDefaults.displayDOMLayoutDebuggingPanel=!t},checked:()=>a.persistedUserDefaults.displayDOMLayoutDebuggingPanel})}function Ep(t,e,o){let r=o.findIndex(i=>i.label===t)+1,n=[...o];return n.splice(r,0,e),n}function Np(){let[t,e]=jc(),[o,r]=jp(),[n,i]=ag();return[{label:ig,submenu:[t,o,...n]},{...e,...r,...i}]}var Is={delete:"Delete",redo:"CommandOrControl+Shift+Z",selectAll:"CommandOrControl+A",undo:"CommandOrControl+Z"},Dp={copy:"CommandOrControl+C",cut:"CommandOrControl+X",paste:"CommandOrControl+V"};Vr()||(Is.sampleColor="");var cg=new Set(["toolCreateScreen","toolCreateFrame","toolCreateText","toolCreateStack","toolNavigationLink","toolCreateScrollComponent","toolCreatePageComponent","toolCreateShapeContainer","toolPath","toolCreateRectangleShape","toolCreateOvalShape","toolCreatePolygonShape","toolCreateStarShape","toolComment","toolZoom","sampleColor","quickActions"]),lg={saveProjectAsTemplate:"canUseCustomTemplates",duplicateTemplate:"canUseCustomTemplates"},pg=new Set(["Delete"]),lr=class{constructor(e,o){this.onCancelledDispatch=o;this.actionHandlers={};this.acceleratorToAction={};this.bindings=new Zr;this.menu=lc(e,r=>{if(r.type!=="normal"||!r.action)return;let n=Is[r.action];n!==void 0&&(r.accelerator=n,r.acceleratorLabelTokens=ps(n)),r.accelerator&&(this.acceleratorToAction[r.accelerator]=r.action);let i=Dp[r.action];i!==void 0&&(r.acceleratorLabelTokens=ps(i))});for(let r in this.acceleratorToAction){if(pg.has(r))continue;let n=this.acceleratorToAction[r];n&&this.bindings.set(r,i=>this.dispatch(n,i),n)}}updateActionHandlers(e){Object.assign(this.actionHandlers,e)}async dispatch(e,o={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1}){switch(e){case"toolCreateScreen":if(Y.isOn("sites"))return!1;break;case"toggleLibraryModal":Y.isOn("sites")||(e="toggleInsert");break}let r=await this.getActionHandler(e),n=r.enabled&&!r.enabled(),i=r.visible&&!r.visible();return n||i?(this.onCancelledDispatch(e,{disabled:n,hidden:i}),!1):(await r.action(o),!0)}async getActionHandler(e){let o=this.actionHandlers[e];if(o)return o;let r=this.defaultActionHandler&&await this.defaultActionHandler(e);if(!r)throw Error("Could not get action handler");return r}async handleKeyboardEvent(e){if(Yr())return!0;let o=this.bindings.get(e);if(!o)return!1;let{action:r,actionName:n}=o;if(e.repeat&&cg.has(n))return e.preventDefault(),e.stopPropagation(),!0;let i=await r(e);return i&&(e.preventDefault(),e.stopPropagation()),i}async validateMenu(e){var o;for(let r of e)if(r.type==="normal"){if(r.action){let n=await this.getActionHandler(r.action);if(n.checked){let s=n.checked();s!==void 0&&(r.checked=s)}if(n.enabled&&(r.disabled=!n.enabled()),n.label){let s=n.label();s!==void 0&&(r.label=`${s}${(o=n.ellipsis)!=null&&o.call(n)?"\u2026":""}`)}if(n.visible){let s=n.visible();s!==void 0&&(r.visible=s)}let i=lg[r.action];!r.disabled&&i&&$r.is(i,"upsell")&&(r.badge="pro")}!r.disabled&&r.submenu&&await this.validateMenu(r.submenu)}}};function Up(t){let e=new URL(window.location.href);e.searchParams.delete("node"),Ye(e.href),t({type:"add",variant:"success",icon:"success",text:"Copied Project Link"})}function Fp(t){let e=`FramerWeb/2add0ca ${navigator.userAgent}`;Ye(e),t==null||t({type:"add",variant:"success",icon:"success",text:"Copied Framer version: 2add0ca"})}function Ts(t,e){let o=[];for(let r of t){let[n,i]=e(r);n!==void 0&&o.push(n),i&&i.length>0&&o.push(...Ts(i,e))}return o}var So={},pr;function Bp(t,e){if(pr)return pr;let o=ug(t,e);return pr=o,setTimeout(()=>{o===pr&&(pr=null)}),o}var Op=!1;async function ug(t,e){if(!Op){Op=!0;let r=Ts(t,n=>n.role?[e.validate({action:n.role}).then(()=>{}),n.submenu]:[void 0,n.submenu]);await Promise.all(r)}let{states:o}=await e.validate({action:"*"});for(let r of o)So[r.action]=r}function Hp({appMenu:t,archiveProject:e,handleNewProject:o,handleProjectDuplication:r,handleDuplicationAsSite:n,handleTemplateDuplication:i,onPreviewToggle:s,onOpenPreviewInNewWindow:p,filePickerRef:c,openAccountSettings:l,onUploadImagePick:u,menuActionTargetService:m,saveProjectAsTemplate:g,saveTemplateAsProject:T,project:b,toast:v,unarchiveProject:f,user:h,userCanArchive:C}){let{isDarkMode:k,isOverridingSystem:I,setDarkMode:E,setOverrideSystem:j}=De(),D=!to("canDesign"),Z=!to("canInviteCollaborators"),_=(0,Pn.useMemo)(()=>{let y=fg(t,h.isFramerEmployee?Np():void 0,v);return y.defaultActionHandler=async H=>(m&&await Bp(t,m),{action:async()=>{m&&(window.focus(),await m.dispatch({action:H}))},checked:()=>{var ie;let z=So[H];return(ie=z==null?void 0:z.checked)!=null?ie:!1},enabled:()=>{let z=So[H];return!!(z!=null&&z.enabled)},label:()=>{let z=So[H];return z==null?void 0:z.label},visible:()=>{let z=So[H];return z&&z.visible!==!1}}),y},[t,h.isFramerEmployee,v,m]);return(0,Pn.useEffect)(()=>{let y=H=>{!Ps.hotKeysDisabled()&&_.handleKeyboardEvent(H),mg(H)};return window.addEventListener("keydown",y,!0),()=>{window.removeEventListener("keydown",y,!0)}},[_]),_.updateActionHandlers({copyVersion:{action:()=>{Fp(v)}},saveProjectAsTemplate:{action:()=>g(),label:()=>d.saveProjectAsTemplate,enabled:()=>!Be(b.space)&&D,visible:()=>Sa(b)&&!b.archived},saveTemplateAsProject:{action:()=>T(),label:()=>d.saveTemplateAsProject,enabled:()=>D,visible:()=>Dt(b)&&!b.archived&&!Be(b.space)},archiveProject:{action:()=>e(),label:()=>d.archiveProject,enabled:()=>C,visible:()=>!b.archived},unarchiveProject:{action:()=>f(),label:()=>d.unarchiveProject,enabled:()=>C,visible:()=>b.archived},newProject:{action:()=>o(),label:()=>d.newProject},copyProjectLink:{action:()=>{Up(v)},label:()=>d.copyProjectLink},duplicateProject:{action:()=>r(),label:()=>d.duplicateProject,visible:()=>!Dt(b),enabled:()=>Qr(h,b)},duplicateAsSite:{action:()=>{V("ui_interaction",{id:"duplicate-as-site",page:"main-menu"}),n()},label:()=>d.duplicateAsSite,visible:()=>!Dt(b)&&!b.canvasFeatures.sites,enabled:()=>Qr(h,b)},duplicateTemplate:{action:()=>i(),label:()=>d.duplicateTemplate,ellipsis:()=>!0,visible:()=>Dt(b),enabled:()=>Qr(h,b)},showPreview:{action:()=>{go.close().catch(q),s()},label:()=>d.showPreview,enabled:()=>!a.siteSettings.isOpen},showPreviewNewWindow:{action:p,label:()=>"Open Preview in New Tab",visible:()=>!Y.isOn("sites")},goToProjects:{action:({ctrlKey:y,metaKey:H})=>{var ne;let z=h.spaces.find(G=>b.space.id===G.id&&G.permissions.read),ie=Dt(b)?"templates":((ne=b.collection)==null?void 0:ne.id)||"recent",Ee=b.space.scope==="organization"&&z?`${Qt}folder/${ie}?team=${b.space.id}`:Qt;y||H?ot(Ee):window.location.href=Ee}},toggleAppearanceSystem:{checked:()=>!I,action:()=>{j(!1)},enabled:()=>!a.siteSettings.isOpen&&I},toggleAppearance:{action:()=>{E(!k)},label:()=>k?"Day Mode":"Night Mode",enabled:()=>!a.siteSettings.isOpen},publishSite:{action:async()=>{if(Ie.isOn("aiAndTheming")&&!a.publishStore.customHostname){let y=a.publishStore.getHomeNode();if(y&&Ba(y)){a.popover.active=1;return}}await a.publishStore.publish(a)},label:()=>a.publishStore.publishStatus!==1?"Publish Update":d.publishSite,enabled:()=>a.publishStore.canPublish(a)},openPublishedSite:{action:async()=>{var H;let y=(H=a.publishStore.customHostname)!=null?H:a.publishStore.defaultHostname;y&&ot(Rr(a,y.hostname))},label:()=>d.openPublishedSite,enabled:()=>D&&!!a.publishStore.defaultHostname&&a.publishStore.defaultHostname.isPublished},inviteCollaborators:{action:()=>{a.popover.active=2,V("ui_interaction",{page:"main-menu",id:"share-project"})},label:()=>d.inviteCollaborators,ellipsis:()=>!0,enabled:()=>a.chromeStore.mainView!==2&&Z},uploadImage:{action:()=>{c.current&&c.current.show().then(y=>u("menu",y)).catch(q)},label:()=>d.uploadImage,ellipsis:()=>!0,enabled:()=>D&&!a.siteSettings.isOpen},openAccountSettings:{action:()=>{l()}},exportToHTML:{visible:()=>Ie.isOn("exportToHTML")&&!Y.isOn("sites")&&b.settings.featureFlags.canExportToHtml==="on",enabled:()=>Boolean(_p())&&!a.siteSettings.isOpen,action:()=>{let y=_p();if(y)return Mi({}),V("ui_interaction",{id:"export-prototype",page:"main-menu"}),nc(a,y)}},openSiteSettings:{visible:()=>Y.isOn("sites"),enabled:()=>!a.siteSettings.isOpen,action:()=>a.siteSettings.open()},openGeneralSettings:{visible:()=>Y.isOn("sites"),enabled:()=>{var y;return a.chromeStore.mainView!==4||((y=a.siteSettings.active)==null?void 0:y.tab)!=="project"},action:()=>a.siteSettings.setActiveTab({tab:"project"})},openDomainSettings:{visible:()=>Y.isOn("sites"),enabled:()=>{var y;return a.chromeStore.mainView!==4||((y=a.siteSettings.active)==null?void 0:y.tab)!=="domains"},action:()=>a.siteSettings.setActiveTab({tab:"domains"})},openRedirects:{visible:()=>Y.isOn("sites"),enabled:()=>{var y;return a.chromeStore.mainView!==4||((y=a.siteSettings.active)==null?void 0:y.tab)!=="redirects"},action:()=>a.siteSettings.setActiveTab({tab:"redirects"})},openVersions:{visible:()=>Y.isOn("sites"),enabled:()=>{var y;return a.chromeStore.mainView!==4||((y=a.siteSettings.active)==null?void 0:y.tab)!=="versions"},action:()=>a.siteSettings.setActiveTab({tab:"versions"})},openAnalytics:{visible:()=>Y.isOn("sites"),enabled:()=>{var y;return a.chromeStore.mainView!==4||((y=a.siteSettings.active)==null?void 0:y.tab)!=="analytics"},action:()=>{V("ui_interaction",{id:"open-site-settings-analytics",page:"main-menu"}),a.siteSettings.setActiveTab({tab:"analytics"}).catch(q)}},openPlans:{visible:()=>Y.isOn("sites"),enabled:()=>{var y;return a.chromeStore.mainView!==4||((y=a.siteSettings.active)==null?void 0:y.tab)!=="plans"},action:()=>a.siteSettings.setActiveTab({tab:"plans"})},copyRemixLink:{label:()=>d.copyRemixLink,visible:()=>Y.isOn("sites"),action:()=>ml(a.projectStore.projectId,b.publicAccess!=="none")}}),Ps.updateActionManager(_),_}function mg(t){!Vr()&&t.key==="Alt"&&t.preventDefault()}function fg(t,e,o){let r=n=>{_a(a,"canDesign")||a.chromeStore.mainView===0&&Aa(n)&&Ma(n,o)};if(e){let[n,i]=e,s=Ep("Preferences",n,t),p=new lr(s,r);return p.updateActionHandlers(i),p}else return new lr(t,r)}function _p(){let t=a.scopeStore.active;if(!ca(t))return;if(a.selection.ids.length===0)return Ka(a.tree,t)||void 0;let e=a.selection.commonGroundNode;if(e&&rc(e))return e}var ko=M(L());function Wp({vekterChannel:t,initialThread:e}){let o=(0,ko.useRef)(null),[r,n]=(0,ko.useState)(Boolean(e));return(0,ko.useEffect)(()=>{let i;if(t)return Zn.on(t).discover({timeout:3e4}).then(async s=>{o.current=s,i=s.feedbackStateStream({replay:"latest"}),await Promise.all([e?s.openThread(e):Promise.resolve(),i.read(async({isActive:p})=>{n(p)})])}).catch(hg),()=>{i==null||i.cancel(),o.current&&Zn.unregister(o.current)}},[t,e]),{isFeedbackActive:r}}var gg="t";function qp(t=window.location){let o=new URLSearchParams(t.search).get(gg);if(o){let[r,n]=o.split(":");return{threadId:r,commentId:n}}return null}function hg(t){if(t instanceof ui.TimedOut){console.warn("FeedbackDocument service discovery timed out: Feedback functionality may be limited");return}setTimeout(()=>{throw t})}var Rp=M(L());function $p({toast:t,userNotifications:e,isFeedbackActive:o}){let[r,n]=Kr("has-seen-notifications-toast",!1);(0,Rp.useEffect)(()=>{if(!o||r)return;async function i(){(await e.getPermissionStatus()).status==="notDetermined"&&(t({type:"add",variant:"info",key:"notifications-opt-in-toast",text:"Stay up to date with browser notifications",action:{title:"Continue",onClick:()=>e.requestPermission()},icon:"notifications",duration:1e4,showCloseButton:"never"}),n(!0))}i()},[t,e,o,r,n])}var Vp=M(L());function bg(t,e){let o={variant:"success",text:"You are now subscribed to updates",action:{title:"Unsubscribe",onClick:n},icon:"success",key:"feedback-updates-subbed-toast",duration:5e3,showCloseButton:"never"},r={variant:"success",text:"You have unsubscribed from updates",icon:"success",action:{title:"Subscribe",onClick:i},key:"feedback-updates-unsubbed-toast",duration:5e3,showCloseButton:"never"};async function n(){t({type:"remove",key:o.key}),await e("unsubscribe"),t({type:"add",...r})}async function i(){t({type:"remove",key:r.key}),await e("subscribe"),t({type:"add",...o})}return{subbedToast:o,unsubbedToast:r}}function zp({toast:t,isDocumentLoaded:e,action:o}){(0,Vp.useEffect)(()=>{let r=new URLSearchParams(window.location.search);if(e&&r.get("unsubscribed")==="true"){let{unsubbedToast:n}=bg(t,o);t({type:"add",...n});let i=new URL(window.location.href);i.searchParams.delete("unsubscribed"),window.history.replaceState({},document.title,i.href)}},[t,e,o])}var Gp=M(L());function Kp({channel:t}){return(0,Gp.useMemo)(()=>t?bi.on(t).expect():null,[t])}var Cn=M(L());function Zp(t){switch(t){case"granted":return{status:"granted"};case"denied":return{status:"denied"};case"default":default:return{status:"notDetermined"}}}var wn=class{constructor(){this.activeNotifications=new Map}async requestPermission(){return window.Notification?new Promise(e=>{let o=n=>e(Zp(n)),r=window.Notification.requestPermission(o);r&&r.then(o).catch(q)}):{status:"denied"}}async getPermissionStatus(){return window.Notification?Zp(window.Notification.permission):{status:"denied"}}async post(e){return new Promise(o=>{if(!window.Notification)return o({type:"cancel",reason:"unsupported"});if(e.notification.show==="backgrounded"&&!document.hidden)return o({type:"cancel",reason:"suppressed"});let r=new window.Notification(e.notification.title,{tag:e.notification.id,body:e.notification.body});this.activeNotifications.set(e.notification.id,r),r.onclick=()=>{window.focus(),o({type:"action"}),r.close()},r.onclose=()=>{this.activeNotifications.delete(e.notification.id),o({type:"cancel",reason:"dismissed"})}})}async cancel(e){if(!window.Notification)return;let o=this.activeNotifications.get(e.notificationId);o&&o.close()}};function Yp({channel:t}){let e=(0,Cn.useMemo)(()=>new wn,[]);return(0,Cn.useEffect)(()=>{if(t)return Ci.on(t).register(e)},[t,e]),e}var Je=M(L());var Jp="title_t1vefczm",Xp="text_tu91b7",xs="button_b1pbwhrm";var js="prototype-copy-link-popover";function Qp({password:t}){Je.default.useEffect(()=>{V("ui_impression",{page:js})},[]);let e=Je.default.useCallback(()=>{V("ui_interaction",{page:js,id:"copy-prototype-password"}),t&&Ye(t).catch(q)},[t]),o=Je.default.useCallback(()=>{V("ui_interaction",{page:js,id:"copy-prototype-link"}),Rc()},[]);return Je.default.createElement(x,{padding:"13px 15px 15px 15px",gap:15},Je.default.createElement("div",{className:Jp},"Copy Link"),Je.default.createElement("div",{className:Xp},Je.default.createElement(P,null,"Users will be required to input the"),Je.default.createElement("br",null),Je.default.createElement(P,null,"password to view the prototype.")),Je.default.createElement(x,{direction:"row",gap:10,alignItems:"center",justifyContent:"center"},Je.default.createElement(Ct,{className:xs,title:"Copy Password",large:!0,onClick:e}),Je.default.createElement(Ct,{className:xs,title:"Copy Link",variant:"primary",large:!0,onClick:o})))}var he=M(L());var ae=M(L()),au=M(kf());var eu="container_c4mo4dy",tu="title_thtz5ih",ou="description_dx2e80q",ru="inputLabel_i1xbazds",nu="icon_i1254ef3",Io="fullWidth_f1czdr5w";var su=tt("ai-domain-popover");function Pg(){var o,r;let t=a.siteSettings.metadata.title,e=(o=a.projectStore.project)==null?void 0:o.title;return Cg((r=t!=null?t:e)!=null?r:"My AI Site")}var cu=({canPublish:t,publishStatus:e,onPublish:o,onDismiss:r})=>{let n=ho(Pg),[i,s]=ae.default.useState(n),[p,c]=ae.default.useState(),[l,u]=ae.default.useState(!0),m=Li();ae.default.useEffect(()=>{V("ui_impression",{page:"ai-domain-popover"})},[]),Oc(i,500,h=>{let C=i.trim();if(gs(C)){c("Invalid Domain"),u(!1);return}a.publishStore.isCustomDomainAvailable(iu(C)).then(I=>{if(!h.outdated){if(!I&&C===n){let E=Math.floor(Math.random()*1e3).toString(10).padStart(3,"0");s(`${C}-${E}`);return}c(I?null:"Domain Taken")}}).catch(I=>{su.error("Failed to check domain availability",I)}).finally(()=>{h.outdated||u(!1)})});let g=h=>{h!==i&&(u(!0),s(h))},T=ae.default.useCallback(()=>{V("ui_interaction",{page:"ai-domain-popover",id:"dismiss"}),r()},[r]),b=ae.default.useCallback(async()=>{V("ui_interaction",{page:"ai-domain-popover",id:"publish"});let h=i.trim();if(gs(h)){c("Invalid Domain");return}try{await o(iu(h))}catch(k){su.error("Failed to publish",k),c(k instanceof fo&&k.status===409?"Domain Taken":null)}},[i,o]),v=h=>{if(h.key==="Enter"){if(l||p){m.start("error").catch(q);return}b().catch(q)}},f=e===3;return ae.default.createElement(x,{direction:"column",justifyContent:"flex-start",alignItems:"center",padding:"30px 15px 15px 15px",gap:15,className:eu},ae.default.createElement("span",{className:nu},ae.default.createElement(Sg,null)),ae.default.createElement(x,{gap:10,direction:"column",justifyContent:"flex-start",alignItems:"stretch",paddingLeft:35,paddingRight:35,paddingBottom:15,className:Io},ae.default.createElement("p",{className:tu},ae.default.createElement(P,null,"Here\u2019s your free AI domain.")),ae.default.createElement("p",{className:ou},ae.default.createElement(P,null,"Your site\u2019s looking magical. Let\u2019s go live\u2014you get a free framer.ai domain, on us. Pick a custom name and then hit publish."))),ae.default.createElement(x,{gap:5,className:Io},ae.default.createElement(ke.div,{variants:{default:{x:0},error:{x:[0,-4,4,0],transition:{duration:.2}}},animate:m},ae.default.createElement(Lt,null,ae.default.createElement(xt,{id:"ai-domain",autoComplete:"off",value:i,onChange:g,autoFocus:!0,constantChange:!0,changeOnBlur:!1,enabled:t&&!f,onKeyDown:v}),ae.default.createElement("span",{className:N(ru,ve)},".framer.ai")))),ae.default.createElement(x,{direction:"row",gap:10,alignItems:"center",justifyContent:"stretch",className:Io},ae.default.createElement(oe,{onClick:T,className:Io},"Not Now"),ae.default.createElement(oe,{variant:"AIGradient",enabled:t&&p===null&&!f&&!l,onClick:b,className:Io},wg(p,f||l))))};function wg(t,e){return e?ae.default.createElement(vt,null):t||"Publish"}function Cg(t,e=30){let o=(0,au.default)(t,{strict:!0,lower:!0});for(;o.length>e;){let r=o.lastIndexOf("-");if(r<0){o.length>e&&(o=o.substring(0,e));break}o=o.substring(0,r)}return o||"my-ai-site"}function iu(t){return`${t}.framer.ai`}function Sg(){return ae.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30"},ae.default.createElement("g",null,ae.default.createElement("defs",null,ae.default.createElement("linearGradient",{id:"idPYJOK145Pg116851",gradientTransform:"rotate(180, 0.5, 0.5)"},ae.default.createElement("stop",{offset:"0",stopColor:"#b8f",stopOpacity:"1"}),ae.default.createElement("stop",{offset:"1",stopColor:"#0bf",stopOpacity:"1"}))),ae.default.createElement("path",{d:"M 13.379 11.638 C 13.758 11.554 14.054 11.258 14.138 10.879 L 15.024 6.893 C 15.256 5.849 16.744 5.849 16.976 6.893 L 17.862 10.879 C 17.946 11.258 18.242 11.554 18.621 11.638 L 22.607 12.524 C 23.651 12.756 23.651 14.244 22.607 14.476 L 18.621 15.362 C 18.242 15.446 17.946 15.742 17.862 16.121 L 16.976 20.107 C 16.744 21.151 15.256 21.151 15.024 20.107 L 14.138 16.121 C 14.054 15.742 13.758 15.446 13.379 15.362 L 9.393 14.476 C 8.349 14.244 8.349 12.756 9.393 12.524 Z M 8.061 19.82 C 8.44 19.736 8.736 19.44 8.82 19.061 L 9.091 17.841 C 9.188 17.403 9.812 17.403 9.909 17.841 L 10.18 19.061 C 10.264 19.44 10.56 19.736 10.939 19.82 L 12.159 20.091 C 12.597 20.188 12.597 20.812 12.159 20.909 L 10.939 21.18 C 10.56 21.264 10.264 21.56 10.18 21.939 L 9.909 23.159 C 9.812 23.597 9.188 23.597 9.091 23.159 L 8.82 21.939 C 8.736 21.56 8.44 21.264 8.061 21.18 L 6.841 20.909 C 6.403 20.812 6.403 20.188 6.841 20.091 Z",fill:"url(#idPYJOK145Pg116851)"})))}var Ue=M(L());var lu="moveDraft_m1cpkqs3",pu="moveDraftTitle_m1nbloso",uu="buttons_bb1mirm",du="moveDraftDescription_mo8n8ae",mu="moveDraftButton_mr6y2w0",fu="confirmMoveDraftButton_c10bqkjb",gu="buttonChevron_bd7crx9";function hu({user:t,projectState:e,onShowMoveProjectMenu:o,onConfirmMoveProject:r,moveProjectDestination:n}){let{project:i}=e,s=Ue.default.useRef(null),[p,c]=Ue.default.useState(!1),l=Ue.default.useMemo(()=>mo(i,t),[i,t]);async function u(){if(s.current===null)return;let g=s.current.getBoundingClientRect();c(!0),await o({location:{x:g.left,y:g.bottom},showBackToDashboardItem:!1,skipConfirmation:!0}),c(!1)}let m=Ue.default.useCallback(async()=>{V("ui_interaction",{page:"invite-panel",id:"move-to-teams"}),await r()},[r]);return Ue.default.createElement(x,{padding:30,gap:15,alignItems:"center",justifyContent:"center",className:lu},Ue.default.createElement("div",{className:pu},"Invite Collaborators"),Ue.default.createElement("div",{className:du},Ue.default.createElement(P,null,"Move your projects to a team"),Ue.default.createElement("br",null),Ue.default.createElement(P,null,"to add more collaborators.")),Ue.default.createElement(x,{className:uu,direction:"row",gap:10},Ue.default.createElement(oe,{className:mu,large:!0,onClick:u,ref:s},Ue.default.createElement("div",{className:ve},n||l.label),Ue.default.createElement("div",{className:gu},Ue.default.createElement(kr,{isActive:p}))),Ue.default.createElement(oe,{onClick:m,large:!0,className:fu,variant:"primary",enabled:!!n&&n!==l.label},Ue.default.createElement(P,null,"Move"))))}var st=M(L());var At=M(L());function bu(t,e){let o=[...t],r=o.findIndex(({user:n})=>n.id===e);return o.splice(r,1),o}function Ig(t,e,o){let r=[...t],n=r.findIndex(({user:s})=>s.id===e),i=r[n];return i?(r.splice(n,1,{...i,success:o}),r):t}function Tg(t,e){switch(e.type){case"addEntry":return{...t,invitedUsers:[e.entry,...t.invitedUsers]};case"resolveEntry":return{...t,invitedUsers:bu(t.invitedUsers,e.id),inviteMap:{...t.inviteMap,[e.resourceId]:e.id}};case"removeEntry":return{...t,invitedUsers:bu(t.invitedUsers,e.id)};case"updateInviteStatus":return{...t,invitedUsers:Ig(t.invitedUsers,e.id,e.status)};default:Te(e)}}function Sn(t){let[e,o]=(0,At.useReducer)(Tg,{invitedUsers:[],inviteMap:{}}),{inviteMap:r,invitedUsers:n}=e,i=(0,At.useRef)([]),s=(0,At.useCallback)(c=>!(c.user.id in r&&n.some(l=>l.user.id===c.user.id)),[r,n]),p=(0,At.useCallback)(c=>{let l=r[c.user.id];return l||c.user.id},[r]);return i.current=(0,At.useMemo)(()=>n.length>0?i.current:t.filter(s),[t,n,s]),{acl:i.current,invitedUsers:n,dispatchInvites:o,getStableEntryKey:p}}var we=M(L());var kn=15,In=20,To=0;var vu="main_mtjdnlw",Ao="buttons_b16j3fv2",yu="header_h7bdi9s",Pu="separator_s12h9rvh",Es="separatorWithPadding_sql7wjp",Ns="isDisabled_i1gaa8io",wu="inputGrid_ibeu8mf",qt="sidePadding_smryu2",Cu="users_u1kcrkj9",Su="roleSelect_rnllbx4",Mo="userInfoName_u1a07q4t",Lo="userInfoDetail_u1wvxecz",Tn="userInfoDetailText_u1axfeak",ku="userInfoStatus_ugv3bsa",Iu="domains_d5ox40e",Tu="errorMessage_een2nnp",xo="avatarGrid_amichmx",jo="editableRole_eld01wx",Au="updating_uiyskyy",Mu="badgeFramerEmployeeWrapper_bhwjfgd",Lu="badgeViewerWrapper_b128a741",xu="shareLinkIcon_s1azfp4q";var _e=M(L());var ju="container_c1246jw8",Eu="menu_mxpor1j",Nu="menuIsClosing_mfp352",Ds="menuRow_mihampg",Du="checkboxLabel_c6nal8x",Uu="checkboxDescription_cj7iy0t",Us="checkboxDisabled_c14mb9fl",Fu="clickable_c125bqli",Ou="separator_s43hwdv";function An({alignmentRef:t,alignWidth:e,menuItems:o}){let[r,n]=_e.default.useState(!1),[i,s]=_e.default.useState(!1);return[{menuItems:o,alignmentRef:t,alignWidth:e,visible:r,closing:i,closeMenu:async()=>{s(!0),await Lg(200),s(!1),n(!1)}},()=>{i||n(!0)}]}function Mn(t){let{menuItems:e,alignmentRef:o,alignWidth:r,visible:n,closing:i,closeMenu:s}=t,p=_e.default.useRef(null);return _e.default.useLayoutEffect(()=>{if(!n||!p.current||!o.current)return;let{top:c,left:l,width:u,height:m}=o.current.getBoundingClientRect();r&&(p.current.style.width=`${u}px`),p.current.style.marginTop=`${m}px`,p.current.style.top=`${c}px`,p.current.style.left=`${l}px`},[n,o,r]),_e.default.useEffect(()=>{let c=u=>{n&&u.target instanceof Node&&p.current&&!p.current.contains(u.target)&&(s(),u.stopPropagation())},l=u=>{n&&(s(),u.stopPropagation())};return document.addEventListener("mousedown",c,!0),document.addEventListener("keydown",l,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("keydown",l,!0)}},[s,n]),n?_e.default.createElement(Yi,null,_e.default.createElement("div",{ref:p,className:ju},_e.default.createElement("div",{className:N(Eu,i&&Nu)},e.filter(c=>c.visible!==!1).map((c,l)=>_e.default.createElement(Mg,{key:l,menuItem:c,closeMenu:s}))))):null}function Mg({menuItem:t,closeMenu:e}){let{type:o}=t;switch(o){case"checkbox":return _e.default.createElement(x,{gap:10,direction:"row",alignItems:"center",className:N(Ds)},_e.default.createElement(Yt,{id:t.actionId,value:t.checked,onChange:()=>t.action(t.actionId),enabled:!t.disabled}),_e.default.createElement("label",{htmlFor:t.actionId,className:N(Du,t.disabled&&Us)},t.label,t.description&&_e.default.createElement("span",{className:N(Uu,t.disabled&&Us)}," ","\xB7 ",t.description)));case"option":return _e.default.createElement(x,{direction:"row",alignItems:"center",justifyContent:"space-between",onClick:()=>{t.action(),e()},className:N(Ds,Fu)},t.label,t.badge&&_e.default.createElement(Go,{className:"badge"},t.badge));case"separator":return _e.default.createElement("div",{className:Ou});default:Te(o,"All menu items should get rendered")}}function Lg(t){return new Promise(e=>{setTimeout(e,t)})}function Ln(t,e,o){t.popover.active=0,t.modalStore.set({type:"Confirmation",source:"invite_panel",title:"New Project Editor",description:"You are adding a new editor. This gives them access and may increase your bill. Manage members in Team Settings.",confirmLabel:"Confirm",onConfirm:()=>{Fs(t),e()},doNotShowAgainId:o,onCancel:()=>Fs(t),onDismiss:()=>Fs(t)})}var Fs=t=>{t.popover.active=2};async function jn(t){t.popover.active=0,await t.siteSettings.setActiveTab({tab:"plans",upsellTeamPlan:"teamPro"})}function Bu({isViewOnly:t,projectState:e,onUpsellEditors:o,handleInvite:r,handleApiError:n,pendingEntries:i,invitedUsers:s,dispatchInvites:p,currentUserPermissions:c}){let{project:l}=e,{settings:u}=l,m=Cr(),g=(0,we.useRef)(0),T=rt("canInviteEditors"),b=rt("canUseEditorPermissions"),[v,f]=(0,we.useState)(!1),[h,C]=(0,we.useState)(""),[k,I]=(0,we.useState)({role:"collaborator",permissions:c}),{role:E,permissions:j}=k,D=u.featureFlags.canInviteAnyDomain==="off";async function Z(ce){if(ce.preventDefault(),!T)return o();let te=h.toLowerCase().trim();if(ln(te)&&!s.find(({user:ee})=>ee.name===te)&&!i.find(({user:ee})=>ee.name===te)){let[,ee]=te.split("@"),$e=async()=>{if(ee&&D&&u.allowedDomains.length>0&&!u.allowedDomains.includes(ee)){f(!0);return}let Fe=`${g.current++}`;p({type:"addEntry",entry:{user:{id:Fe,name:te,initials:""},role:E,permissions:j,pending:!0,color:0,lastOpenedAt:"",success:null,email:te}}),C("");try{let R=await r({email:te,role:E,permissions:j});R&&p({type:"resolveEntry",id:Fe,resourceId:R.user.id})}catch(R){n(R,Fe),p({type:"removeEntry",id:Fe})}};E==="viewer"||ee==="framer.com"?$e().catch(q):Ln(a,$e)}else m.start({x:0,transition:{type:"spring",velocity:600,stiffness:5e3,damping:20}}).catch(q)}function _(ce){v&&f(!1),C(ce)}let y=async ce=>{I(te=>{let ee=Dr(te.permissions[ce]),$e={...te.permissions,[ce]:ee};return{role:Object.entries($e).filter(([ue,W])=>W==="on").map(([ue,W])=>ue).length===0?"viewer":"collaborator",permissions:$e}})},H=we.default.useRef(null),z=!b,Ee=[...Ur.map(ce=>{let{label:te,description:ee}=Or(ce);return{type:"checkbox",label:te,description:ee,actionId:ce,action:y,checked:j[ce]==="on",disabled:z||c[ce]==="off"}}),{type:"separator",visible:z},{type:"option",label:"Upgrade",badge:"Team Pro",action:()=>jn(a),visible:z}],[ne,G]=An({alignmentRef:H,alignWidth:!0,menuItems:Ee});return we.default.createElement("div",{className:qt},we.default.createElement("form",{className:wu,onSubmit:Z},we.default.createElement(ke.div,{animate:m,style:{originY:.9}},we.default.createElement(Lt,{ref:H,hasError:v,large:!0},we.default.createElement(xt,{autoFocus:!0,type:"email",name:"email",placeholder:"name@email.com",value:h,onChange:_,constantChange:!0,enabled:!t,className:N(t&&Ns),"data-1p-ignore":!0}),we.default.createElement(oe,{variant:"link",enabled:!t,onClick:G,className:N(Su,t&&Ns)},Qo(j,E),we.default.createElement(bt,null)),we.default.createElement(Mn,{...ne})),we.default.createElement(uo,{className:Tu,visible:v},u.allowedDomains.length>2?we.default.createElement(P,null,"The email domain you entered is not allowed"):we.default.createElement(we.default.Fragment,null,we.default.createElement(P,null,"Only"),we.default.createElement("span",{className:Iu}," ",u.allowedDomains.map(ce=>`@${ce}`).join(", ")," "),we.default.createElement(P,null,"emails are allowed")))),we.default.createElement(oe,{enabled:!t,className:Ao,large:!0,title:"Send",type:"submit",variant:"primary",onClick:Re})))}var J=M(L());function qu({isViewOnly:t,onUpsellEditors:e,projectState:o,handleInvite:r,handleApiError:n,currentUserEntry:i,invitedUsers:s,activeEntries:p,inactiveEntries:c,pendingEntries:l,dispatchInvites:u,currentUserPermissions:m,getStableEntryKey:g}){let[T,b]=jg(i,s,p,c,l);async function v(f){u({type:"updateInviteStatus",id:f,status:null});try{let h=s.find(({user:C})=>C.id===f);if(h)await r({email:h.email,role:h.role,permissions:h.permissions});else throw new Error}catch(h){n(h,f)}}return J.default.createElement(Zt,{initial:!1},J.default.createElement(x,{gap:kn,direction:"column",className:qt},[T,b].map((f,h)=>f.length>0?J.default.createElement(J.default.Fragment,{key:`item-${h}`},h>0&&J.default.createElement("div",{className:Pu}),J.default.createElement(x,{gap:In,direction:"column"},f.map(({entry:C,inactive:k})=>J.default.createElement(Eg,{key:g(C),projectState:o,indicateFramerEmployee:!!C.user.isFramerEmployee&&!(i!=null&&i.user.isFramerEmployee),isViewOnly:t,entry:C,handleRetry:v,inactive:k,currentUserPermissions:m,upsellEditors:e})))):null)))}function jg(t,e,o,r,n){let[i,s]=(0,J.useMemo)(()=>{let p=[],c=[],l=u=>{(u.entry.role==="viewer"?c:p).push(u)};return t&&l({entry:t,ordering:"9"}),o.forEach(u=>{l({entry:u,ordering:"8"})}),r.forEach(u=>{l({entry:u,inactive:!0,ordering:_u("7",u)})}),e.forEach(u=>{l({entry:u,ordering:_u("7",u)})}),n.forEach(u=>{let m={...u,user:{...u.user,initials:u.user.initials||u.user.name.substr(0,2).toLocaleUpperCase()}};l({entry:m,inactive:!0,pending:!0,ordering:"0"})}),[p.sort(Hu),c.sort(Hu)]},[t,e,o,r,n]);return[i,s]}function _u(t,e){return`${t}-${e.lastOpenedAt||0}`}function Hu(t,e){return t.ordering!==e.ordering?t.ordering<e.ordering?1:-1:t.entry.user.name===e.entry.user.name?t.entry.user.id.localeCompare(e.entry.user.id):t.entry.user.name.localeCompare(e.entry.user.name,void 0,{sensitivity:"base"})}var Wu={duration:.15,ease:"easeInOut"},Os={initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,transition:Wu},exit:{opacity:0,scale:.5,transition:Wu}},Eg=J.default.forwardRef(function({projectState:e,isViewOnly:o,inactive:r=!1,entry:n,handleRetry:i,currentUserPermissions:s,upsellEditors:p,indicateFramerEmployee:c},l){let u=kt(),{user:m,role:g,permissions:T,pending:b}=n,{isDarkMode:v}=De(),{project:f}=e,h=a.sessionStore.useState(Pe=>Pe.user.id),[C,k]=J.default.useState(null),[I,E]=J.default.useState(!1),[j,D]=J.default.useState(!1),[Z,_]=J.default.useState(!1),y=m.id===h,H=m.id===f.owner.id,z=g==="viewer",ie=rt("canInviteEditors"),Ee=rt("canUseEditorPermissions"),ne=z&&Z&&!o,G=!r&&!y,ce=(0,J.useCallback)(Pe=>{var Ne;(Ne=a.remoteDocument)==null||Ne.setSpectatedUser(Pe.id)},[]),te=()=>{if(!ie)return p();let Pe=()=>{D(!0),u==null||u.updateUserPermissions({id:m.id,role:"collaborator",permissions:s}).catch(()=>{D(!1)})};m.isFramerEmployee?Pe():Ln(a,Pe)},ee=C||T||va,$e=async Pe=>{if(!ee)return;if(!ie)return p();let Ne=Dr(ee[Pe]),re={...ee,[Pe]:Ne},xe={id:m.id,role:"collaborator",permissions:re};k(xe.permissions),await(u==null?void 0:u.updateUserPermissions(xe).catch(()=>{k(null)}))},Fe=()=>{E(!0),b?u==null||u.removeInvite({id:m.id}).catch(()=>E(!1)):u==null||u.removeUserPermissions({id:m.id}).catch(()=>E(!1))},K=J.default.useRef(null),R=!b&&!z,ue=!H,W=!Ee,Oe=[...Ur.map(Pe=>{let{label:Ne,description:re}=Or(Pe);return{type:"checkbox",label:Ne,description:re,actionId:Pe,action:$e,checked:ee?ee[Pe]==="on":!1,visible:R,disabled:W||s[Pe]==="off"}}),{type:"separator",visible:R&&(ue||W)},{type:"option",label:"Upgrade",badge:"Team Pro",action:()=>jn(a),visible:R&&W},{type:"option",label:"Remove",action:Fe,visible:ue}],[it,zt]=An({alignmentRef:K,menuItems:Oe}),at;b&&n.success===!1?at=J.default.createElement(ut,{as:ke.button,variant:"link",className:N(jo),onClick:()=>i(m.id),...Os},J.default.createElement(P,null,"Retry")):y||H||o?at=J.default.createElement(ke.span,{key:"role",...Os},J.default.createElement(ut,{as:ke.button,variant:"link",className:jo,enabled:!1},J.default.createElement(P,null,Qo(T,g)))):at=J.default.createElement(J.default.Fragment,null,J.default.createElement(ut,{ref:K,as:ke.button,variant:"link",className:jo,onClick:zt},J.default.createElement(P,null,Qo(ee,g)),J.default.createElement(bt,null)),J.default.createElement(Mn,{...it}));let wt=c?`${m.name.split(" ")[0]} from Framer`:m.name;return J.default.createElement(ke.li,{ref:l,...Os,className:N(xo,I&&Au),onPointerEnter:()=>_(!0),onPointerLeave:()=>_(!1)},J.default.createElement("div",null,J.default.createElement(er,{entry:n,isDarkMode:v,onClick:G?()=>ce(n.user):void 0,onClickHoverIcon:G?J.default.createElement(Zo,{width:"18",height:"18"}):void 0,greyScale:z}),c?J.default.createElement("div",{className:Mu,title:"Framer Employee"},J.default.createElement(Ir,{width:"6",height:"9"})):z?J.default.createElement("div",{className:Lu,title:"Framer Employee"},J.default.createElement(Zo,null)):null),J.default.createElement(x,{gap:To,direction:"column",justifyContent:"center"},J.default.createElement("div",{className:N(ve,Mo),title:m.name},J.default.createElement(P,null,wt)),J.default.createElement("div",{className:Lo},at)),J.default.createElement(Zt,{initial:!1,mode:"wait"},ne&&!b?J.default.createElement(oe,{enabled:!o,className:Ao,large:!0,onClick:te},j?J.default.createElement(vt,null):J.default.createElement(P,null,"Upgrade")):J.default.createElement(P,{className:ku},b?"Pending":Nr(n,!r,{shortDate:!0}))))});var Xe=M(L());async function Ru(t,e,{isDarkMode:o,triggerRef:r}){let{top:n,left:i,height:s}=r!=null&&r.current?r.current.getBoundingClientRect():t.currentTarget.getBoundingClientRect(),p=[{action:"view",label:Nn("view"),checked:e==="view"},{action:"none",label:Nn("none"),checked:e==="none"}],c=await go.show(p,{isDarkMode:o,location:{x:i-1,y:n+s+5}});return c?c.action:void 0}function Nn(t){switch(t){case"view":return"Anyone with link can view";case"none":return"Only members can access";default:xi(t)}}function $u({isViewOnly:t,isDraftProject:e,isCurrentUserOwner:o,onCopyProjectURL:r,projectState:n,onAccessChange:i,onShowUpsell:s}){let{project:p}=n,{publicAccess:c,settings:l}=p,u=rt("canUsePrivateLink"),m=!t&&l.featureFlags.canChangeProjectAccess==="on"&&(!e||o),{isDarkMode:g}=De(),T=a.wrapHandler(()=>{Ye(en(p).toString()).catch(q),r()});return Xe.default.createElement("div",{className:qt},Xe.default.createElement("div",{className:xo},Xe.default.createElement(po,{color:Ze.linkAvatarBackground,textCustomStyles:xu,text:Xe.default.createElement(Gi,null)}),Xe.default.createElement(x,{direction:"column",gap:To,justifyContent:"center"},Xe.default.createElement("div",{className:N(ve,Mo)},Xe.default.createElement(P,null,"Project Link")),Xe.default.createElement("div",{className:N(Lo,Tn)},Xe.default.createElement(ut,{as:ke.button,variant:"link",className:jo,enabled:m,onClick:async b=>{V("ui_interaction",{page:"invite-panel",id:"open-project-link-settings"});let v=await Ru(b,c||[],{isDarkMode:g});v==="none"&&!u?s("private-project-link"):v&&i(v)}},Xe.default.createElement(P,null,Nn(c)),m&&Xe.default.createElement(bt,null)))),Xe.default.createElement(Ct,{className:Ao,large:!0,title:"Copy",onClick:T})))}var Rt=M(L());function Vu({displayName:t,avatar:e}){let o=Nt.extractInitials(t||"");return Rt.default.createElement("div",{className:qt},Rt.default.createElement("div",{className:xo},Rt.default.createElement(po,{color:Ze.tint,src:e||void 0,text:o}),Rt.default.createElement(x,{direction:"column",gap:To,justifyContent:"center"},Rt.default.createElement("div",{className:N(ve,Mo)},t),Rt.default.createElement("div",{className:N(Lo,Tn)},Rt.default.createElement(P,null,"All members can access")))))}function zu({user:t,projectState:e,isDraftProject:o,isCurrentUserOwner:r,onAccessChange:n,onCopyProjectURL:i,onClose:s,onShowUpsell:p}){let{activeIds:c,project:l}=e,{space:u}=l,m=t.spaces.find(({id:y})=>y===u.id),g=to("canInviteCollaborators"),T=Uc(),{invitedUsers:b,acl:v,dispatchInvites:f,getStableEntryKey:h}=Sn(e.acl),[C,k,I,E]=Br({acl:v,activeIds:c,order:"chronologically",userId:t.id});function j(){l.teamLicenseType==="teamAccount"?p("editor-limit-pro"):p("editor-limit-enterprise-single"),s()}function D(y,H){y instanceof fo&&y.isTemporary&&f({type:"updateInviteStatus",id:H,status:!1})}let Z=kt();async function _(y){if(Z)return Z.inviteByEmail(y)}return st.default.createElement(x,{gap:kn,direction:"column",className:vu},st.default.createElement("div",{className:yu},st.default.createElement(P,null,"Invite")),st.default.createElement(Bu,{isViewOnly:g,onUpsellEditors:j,projectState:e,handleInvite:_,handleApiError:D,pendingEntries:E,invitedUsers:b,dispatchInvites:f,currentUserPermissions:T}),st.default.createElement("div",{className:Es}),st.default.createElement(x,{gap:In,direction:"column"},u.displayName&&st.default.createElement(Vu,{displayName:u.displayName,avatar:m==null?void 0:m.avatar}),st.default.createElement($u,{isViewOnly:g,isDraftProject:o,isCurrentUserOwner:r,projectState:e,onCopyProjectURL:i,onAccessChange:n,onShowUpsell:p})),st.default.createElement("div",{className:Es}),st.default.createElement("div",{className:Cu},st.default.createElement(qu,{isViewOnly:g,onUpsellEditors:j,projectState:e,handleInvite:_,handleApiError:D,currentUserEntry:C,activeEntries:k,inactiveEntries:I,pendingEntries:E,invitedUsers:b,dispatchInvites:f,currentUserPermissions:T,getStableEntryKey:h})))}var Qe=M(L());var X=M(L());var Gu="main_m1qqqi9r",Ku="shareUsers_s1gmod5c",Zu="shareUsersGrid_s1cc20ej",Yu="header_hw5sntf",Bs="isViewOnly_i1pvegcm",Ju="inputInner_ie61lu6",Xu="inputGrid_i2tj1sj",Qu="inputGridUnifiedPreview_i1h1ba5a",ed="buttonPlus_b1fkm4u6",td="roleSelect_rdy16ua",od="projectLink_p1k13gha",rd="projectLinkSettings_p1ny9l3b",nd="projectLinkCopy_p1m8xse2",sd="domains_d182d5ua",id="errorMessage_e33rzhp";var de=M(L());var Eo="container_c10h7kck",cd="containerNoButton_c192aq9y",ld="containerUnifiedPreview_c1u2lhos",pd="editableRole_e172bf8b",dr="role_rurgo96",No="lastViewed_l18eroku",Do="userInfo_u172nry5",ud="badgeFramerEmployeeWrapper_b7ddp33",Uo="userInfoName_u1jixtuu",Dn="button_br40lcr",_s="buttonSquare_blt5svh",dd="collaboratorsIcon_cwxywkq";var fd=({space:t})=>{let e=Nt.extractInitials(t.displayName||"");return de.default.createElement("li",{className:Eo},de.default.createElement("div",null,de.default.createElement(po,{color:Ze.tint,text:e})),de.default.createElement("div",{className:Do},de.default.createElement(Ae,{className:N(ve,Uo)},t.displayName),de.default.createElement(Ae,{size:10,className:No},de.default.createElement(P,null,"All team members"))),de.default.createElement("div",{className:dr},de.default.createElement(P,null,"Can access")))},gd=()=>de.default.createElement("li",{className:N(Eo,cd)},de.default.createElement("div",null,de.default.createElement("div",{className:dd},de.default.createElement(Ng,null))),de.default.createElement("div",{className:Do},de.default.createElement(Ae,{className:N(ve,Uo)},de.default.createElement(P,null,"Project Collaborators")),de.default.createElement(Ae,{size:10,className:No},de.default.createElement(P,null,"All collaborators can view"))));function Ng(){return de.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"30",height:"30"},de.default.createElement("g",null,de.default.createElement("defs",null,de.default.createElement("path",{d:"M 15 7 C 17.209 7 19 8.791 19 11 C 19 13.209 17.209 15 15 15 C 12.791 15 11 13.209 11 11 C 11 8.791 12.791 7 15 7 Z",id:"a1000z"}),de.default.createElement("clipPath",{id:"a1001z"},de.default.createElement("use",{xlinkHref:"#a1000z"}))),de.default.createElement("use",{xlinkHref:"#a1000z",fill:"transparent",clipPath:"url(#a1001z)",strokeWidth:"3",stroke:"#FFFFFF"})),de.default.createElement("path",{d:"M 9 21 L 9 21 C 9 19.205 10.455 17.75 12.25 17.75 L 17.75 17.75 C 19.545 17.75 21 19.205 21 21 L 21 21",fill:"transparent",strokeWidth:"1.5",stroke:"#FFFFFF",strokeLinecap:"round"}))}var Q=M(L());var hd={duration:.15,ease:"easeInOut"},Fo={initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,transition:hd},exit:{opacity:0,scale:.5,transition:hd}},Oo={["owner"]:"Owner",["collaborator"]:"Can edit",["viewer"]:"Can view",["prototypeViewer"]:"Can view prototype"},Dg=[{label:Oo["collaborator"],action:"collaborator"},{label:Oo["viewer"],action:"viewer"},{type:"separator"},{label:"Remove",action:"remove"}],Ug=[{label:Oo["collaborator"],action:"collaborator",disabled:!0},{label:Oo["viewer"],action:"viewer",disabled:!0},{type:"separator"},{label:"Remove",action:"removeInvite"}],bd=Q.default.forwardRef(function({canInviteEditors:e,inactive:o=!1,entry:r,handleRetry:n,immutable:i,upsellEditors:s,indicateFramerEmployee:p,onClick:c,onClickHoverIcon:l},u){let m=kt(),{user:g,role:T,pending:b}=r,[v,f]=(0,Q.useState)(T),{isDarkMode:h}=De(),C=on();async function k(j){let{top:D,left:Z}=j.currentTarget.getBoundingClientRect(),_=await C({location:{x:Z,y:D},items:b?Ug:Dg,enableTranslate:!0});if(!_)return;let{action:y}=_;if(y!==T)if(y==="collaborator"){if(!e)return s();f(y),m==null||m.updateUserPermissions({id:g.id,role:y,permissions:Fr}).catch(q)}else y==="viewer"?(f(y),m==null||m.updateUserPermissions({id:g.id,role:y,permissions:null}).catch(q)):_.action==="remove"?m==null||m.removeUserPermissions({id:g.id}).catch(q):_.action==="removeInvite"&&(m==null||m.removeInvite({id:g.id}).catch(q))}let I;b&&r.success===!1?I=Q.default.createElement(ut,{as:ke.button,...Fo,type:"button",className:N(Dn),onClick:()=>n(g.id)},"Retry"):T==="owner"||i?I=Q.default.createElement(ke.span,{...Fo,key:"role"},Oo[T]):I=Q.default.createElement(ut,{as:ke.button,variant:"link",className:pd,onClick:k},Oo[v],Q.default.createElement(bt,null));let E=p?`${g.name.split(" ")[0]} from Framer`:g.name;return Q.default.createElement(ke.li,{ref:u,...Fo,className:N(Eo)},Q.default.createElement("div",null,Q.default.createElement(er,{entry:r,isDarkMode:h,onClick:c,onClickHoverIcon:l}),p?Q.default.createElement("div",{className:ud,title:"Framer Employee"},Q.default.createElement(Ir,{width:"6",height:"9"})):null),Q.default.createElement("div",{className:Do},Q.default.createElement(Ae,{className:N(ve,Uo),title:g.name},E),Q.default.createElement(Ae,{size:10,className:No},b?Q.default.createElement(P,null,"Pending"):Nr(r,!o))),Q.default.createElement("div",{className:dr},Q.default.createElement(Zt,{initial:!1,mode:"wait"},I)))}),vd=Q.default.forwardRef(({entry:t,handleRetry:e,isDarkMode:o,isUnifiedPreviewEnabled:r},n)=>{let{user:i,pending:s}=t,[p,c]=Q.default.useState(!1),l=kt(),u=Q.default.useCallback(()=>{if(!l)return;c(!0),(s?l.removeInvite:l.removeUserPermissions)({id:i.id}).catch(()=>c(!1))},[s,i.id,l]),m;return s&&t.success===!1?m=Q.default.createElement(ut,{as:ke.button,...Fo,className:N(Dn,r&&_s),onClick:()=>e(i.id)},r?Q.default.createElement(zi,{color:Ze.previewRemovePrototypeUserIcon}):"Retry"):m=Q.default.createElement(ut,{as:ke.button,...Fo,className:N(Dn,r&&_s),onClick:u},r?Q.default.createElement(Ar,{color:Ze.previewRemovePrototypeUserIcon}):Q.default.createElement(P,null,"Remove")),p?null:Q.default.createElement(ke.li,{ref:n,...Fo,className:N(Eo,r&&ld)},Q.default.createElement("div",null,Q.default.createElement(er,{entry:t,isDarkMode:o})),Q.default.createElement("div",{className:Do},Q.default.createElement(Ae,{className:N(ve,Uo),title:i.name},i.name),Q.default.createElement(Ae,{size:10,className:No},s?Q.default.createElement(P,null,"Pending"):Q.default.createElement(P,null,"Can view prototype"))),Q.default.createElement("div",{className:dr},m))});function Un({currentUserId:t,isUnifiedPreviewEnabled:e=!1,isViewOnly:o,projectState:r,type:n,onUpsellEditors:i}){let{activeIds:s,project:p}=r,{space:c,settings:l}=p,{isDarkMode:u}=De(),m=Cr(),g=(0,X.useRef)(0),{invitedUsers:T,acl:b,dispatchInvites:v,getStableEntryKey:f}=Sn(r.acl),h=rt("canInviteEditors"),[C,k]=(0,X.useState)(!1),[I,E]=(0,X.useState)(""),j=h?"collaborator":"viewer",[D,Z]=(0,X.useState)(n==="project"?j:"prototypeViewer"),[_,y,H,z]=Br({acl:b,activeIds:s,order:"alphabetically",filter:({role:K})=>{switch(n){case"project":return K!=="prototypeViewer";case"prototype-view":return K==="prototypeViewer";default:return Te(n)}},userId:t});(0,X.useEffect)(()=>{n==="project"&&Z(h?"collaborator":"viewer")},[h,n]);function ie(K,R){K instanceof fo&&K.isTemporary&&v({type:"updateInviteStatus",id:R,status:!1})}let Ee=kt();async function ne(K){if(Ee)return Ee.inviteByEmail(K)}async function G(K){v({type:"updateInviteStatus",id:K,status:null});try{let R=T.find(({user:ue})=>ue.id===K);if(R)await ne({email:R.email,role:R.role,permissions:R.permissions});else throw new Error}catch(R){ie(R,K)}}async function ce(K){if(K.preventDefault(),D==="collaborator"&&!h)return i();let R=I.toLowerCase().trim();if(ln(R)&&!T.find(({user:ue})=>ue.name===R)&&!z.find(({user:ue})=>ue.name===R)){let[,ue]=R.split("@");if(ue&&Fg(n,l)&&l.allowedDomains.length>0&&!l.allowedDomains.includes(ue)){k(!0);return}let W=`${g.current++}`,We={user:{id:W,name:R,initials:""},role:D,permissions:D==="collaborator"?Fr:null,pending:!0,color:0,lastOpenedAt:"",success:null,email:R};v({type:"addEntry",entry:We}),E(""),m.start({scale:1,transition:{type:"spring",velocity:-20,restDelta:.01,restSpeed:.01,stiffness:2e3,damping:40}}).catch(q),c.scope==="organization"&&D==="collaborator"&&fl({teamLicenseType:p.teamLicenseType})&&gl();try{let Oe=await ne({email:We.email,role:We.role,permissions:We.permissions});Oe&&v({type:"resolveEntry",id:W,resourceId:Oe.user.id})}catch(Oe){ie(Oe,W),v({type:"removeEntry",id:W})}}else m.start({x:0,transition:{type:"spring",velocity:600,stiffness:5e3,damping:20}}).catch(q)}async function te(K){if(o)return;let{top:R,left:ue}=K.currentTarget.getBoundingClientRect(),W=["collaborator","viewer"].map(Oe=>({action:Oe,label:rs(Oe)})),We=await go.show(W,{enableTranslate:!0,isDarkMode:u,location:{x:ue,y:R}});We&&Z(We.action)}function ee(K){C&&k(!1),E(K)}let $e=(0,X.useMemo)(()=>{let K=[];return _&&K.push({entry:_,immutable:!0}),T.forEach(R=>{K.push({entry:R,immutable:o})}),y.forEach(R=>{K.push({entry:R,immutable:o})}),H.forEach(R=>{K.push({entry:R,inactive:!0,immutable:o})}),z.forEach(R=>{K.push({entry:R,inactive:!0,immutable:o})}),K},[_,T,y,H,z,o]),Fe=(0,X.useCallback)(K=>{var R;(R=a.remoteDocument)==null||R.setSpectatedUser(K.id)},[]);return X.default.createElement(X.default.Fragment,null,X.default.createElement("form",{className:N(Xu,e&&n==="prototype-view"&&Qu),onSubmit:ce},X.default.createElement(ke.div,{animate:m,style:{originY:.9}},X.default.createElement(Lt,{hasError:C,large:!0},X.default.createElement(xt,{autoFocus:!0,type:"email",name:"email",placeholder:"email@example.com",value:I,onChange:ee,constantChange:!0,enabled:!o,className:N(Ju,o&&Bs),"data-1p-ignore":!0}),n==="project"&&X.default.createElement(oe,{variant:"link",onClick:te,className:N(td,o&&Bs)},rs(D),X.default.createElement(bt,null))),X.default.createElement(uo,{className:id,visible:C},l.allowedDomains.length>2?X.default.createElement(P,null,"The email domain you entered is not allowed"):X.default.createElement(X.default.Fragment,null,X.default.createElement(P,null,"Only"),X.default.createElement("span",{className:sd}," ",l.allowedDomains.map(K=>`@${K}`).join(", ")," "),X.default.createElement(P,null,"emails are allowed")))),e&&n==="prototype-view"?X.default.createElement(oe,{className:ed,enabled:!o,large:!0,title:"Send",type:"submit",variant:"primary",onClick:Re},X.default.createElement(Vi,null)):X.default.createElement(oe,{enabled:!o,large:!0,title:"Send",type:"submit",variant:"primary",onClick:Re})),X.default.createElement("section",{className:N(Ku)},X.default.createElement("ul",{className:Zu},n==="prototype-view"&&X.default.createElement(gd,null),n==="project"&&c.displayName&&X.default.createElement(fd,{space:c,key:c.id}),X.default.createElement(Zt,{initial:!1},$e.map(({entry:K,immutable:R,inactive:ue})=>n==="project"?X.default.createElement(bd,{isUnifiedPreviewEnabled:e,indicateFramerEmployee:!!K.user.isFramerEmployee&&!(_!=null&&_.user.isFramerEmployee),canInviteEditors:h,key:f(K),entry:K,handleRetry:G,immutable:R,inactive:ue,upsellEditors:()=>i(),onClick:!ue&&K!==_?()=>Fe(K.user):void 0,onClickHoverIcon:X.default.createElement(Zo,null)}):X.default.createElement(vd,{isUnifiedPreviewEnabled:e,key:f(K),entry:K,handleRetry:G,isDarkMode:u}))))))}function Fg(t,e){switch(t){case"project":return e.featureFlags.canInviteAnyDomain==="off";case"prototype-view":return e.featureFlags.canInviteAnyDomainToPrototype==="off";default:return Te(t)}}function yd(t){let{user:e,projectState:o,isDraftProject:r,isCurrentUserOwner:n,onAccessChange:i,onCopyProjectURL:s,onClose:p,onShowUpsell:c}=t,{project:l}=o,{publicAccess:u,settings:m}=l,g=to("canInviteCollaborators"),T=a.wrapHandler(()=>{Ye(en(l).toString()).catch(q),s()}),b=rt("canUsePrivateLink");function v(){V("ui_interaction",{page:"invite-panel",id:"open-project-link-settings"})}function f(){b?i("none"):c("private-project-link"),p()}function h(){l.teamLicenseType==="teamAccount"?c("editor-limit-pro"):c("editor-limit-enterprise-single"),p()}return Qe.default.createElement(Qe.default.Fragment,null,Qe.default.createElement("div",{className:Gu},Qe.default.createElement("section",null,Qe.default.createElement("div",{className:Yu},Qe.default.createElement(P,null,"Invite Collaborators"))),Qe.default.createElement(Un,{...t,isViewOnly:g||r,currentUserId:e.id,type:"project",onUpsellEditors:h}),Qe.default.createElement("section",{className:od},Qe.default.createElement(Yo,{enabled:!g&&m.featureFlags.canChangeProjectAccess==="on"&&(!r||n),large:!0,className:rd,onClick:v},Qe.default.createElement(Xt,{key:"public",title:"Anyone with the link can view",selected:u==="view",onSelect:()=>i("view")}),Qe.default.createElement(Xt,{key:"space",title:"Only collaborators can access",selected:u==="none",onSelect:f})),Qe.default.createElement(Ct,{title:"Copy Link",onClick:T,className:nd}))))}function wd(t){let e=t.projectStore.useState(({project:i})=>(i==null?void 0:i.settings.resourceLimits.searchablePages)||null),o=eo("TreeStore",()=>Boolean(t.treeStore.treeIndex.searchComponentNodeIds.size)),r=eo("Tree",()=>tc(t));return{show:o&&e!==null&&r>e,limit:e}}var Ce=M(L());var Bo=M(L());var Og=tt("app");function Cd(t,e){var b;let o=e.treeVersion||0,r=((b=a.remoteDocument)==null?void 0:b.treeVersion())||0,n=o!==0&&r!==0,i=n&&o!==r,[s,p]=Bo.default.useState(i),[c,l]=Bo.default.useState([]),[u,m]=Bo.default.useState(!1),g=ho(()=>new AbortController),T=Bo.default.useCallback(()=>{g.abort(),l([]),m(!1),p(!1)},[g]);return Bo.default.useEffect(()=>(i&&_g(t,o,r,g.signal).then(v=>l(v)).catch(v=>{v.name!=="AbortError"&&(Og.reportError(v),m(!0))}).finally(()=>p(!1)),()=>{g.abort()}),[]),{isEnabled:n,isLoadingChanges:s,hasChanges:c.length>0,hasError:u,changes:c,resetChanges:T}}function Bg(){return{fetchingApiMs:0,computingMs:0,totalMs:0}}async function _g(t,e,o,r){let n=new za(Bg()),i=n.time("totalMs"),s=n.time("fetchingApiMs"),{diffs:p}=await $g(t,e,o,r);s.done();let c=n.time("computingMs"),l=Hg(p);c.done(),i.done();let u=n.get();return V("changelog",{projectId:t,...u}),l}function Hg(t){var n;if(Object.entries(t).length===0)return[];let e={["WebPage"]:[],["SmartComponent"]:[],["CollectionItem"]:[]},o;for(let i of Object.values(t)){if(((n=i.to)==null?void 0:n.__class)!=="RootNode")continue;let s=Wr(i.to);Se(ia(s),"Expected RootNode to deserialize as RootNode"),o=s}Se(o,"Expected RootNode to be in diffs");for(let i of Object.values(t)){let s=i.to||i.from;if(!s)continue;let p=Wr(s,s.parentid);if(!p)continue;let c=Wg(p,t,o);c&&e[c.type].push({type:c.type,nodeId:p.id,name:c.name,status:qg(i),userIds:new Set(i.userIds)})}let r=[];for(let[i,s]of Object.entries(e))s.sort(i==="WebPage"?Rg:Sd),r.push(...s);return r}function Wg(t,e,o){var r,n,i;if(aa(t)){let s=o.homePageNodeId;return{type:"WebPage",name:t.id===s?"Home":Ra(t,s)||$a(t,s)||Hr(t)}}else{if(jr(t))return{type:"SmartComponent",name:t.name||Hr(t)};if(Er(t)){Se(t.parentid,"Expected CollectionItemNode to have parentid");let s=((r=e[t.parentid])==null?void 0:r.to)||((n=e[t.parentid])==null?void 0:n.from);Se(s,"Expected CollectionItemNode's parent to exist in the diffs map");let p=Wr(s,s.parentid);Se(la(p),"Expected CollectionItemNode's parent to be a CollectionNode");let c=p.name||Hr(p),l=p.variables.find(g=>g.type==="slug"),u=l&&((i=t.getControlProp(l.id))==null?void 0:i.value);return{type:"CollectionItem",name:yt(u)?`${c}/${u}`:`${c}/Item`}}}}function qg(t){return Se(t.from||t.to,"classifyStatus expects a NodeDiff with at least one of `from`/`to`"),t.from===null?1:t.to===null?2:0}function Sd(t,e){return t.name.localeCompare(e.name,void 0,{sensitivity:"base"})}function Rg(t,e){return t.name==="Home"&&e.name==="Home"?0:t.name==="Home"?-1:e.name==="Home"?1:Sd(t,e)}async function $g(t,e,o,r){let n=await fetch(`/projects/${t}/tree/v2/changes/${e}-${o}`,await Ha.withAuthorizationHeader({signal:r}));if(!n.ok)throw new Error(`Non-OK HTTP response: ${n.status}`);return n.json()}var Me=M(L());var kd="container_c1ei30bi",Hs="removed_rg4mzjt",Id="icon_i1rud32t",Td="name_nauun69",Ad="nameLink_n8oy0xx",Md="avatarList_a1mis7ef";var Ld=Me.default.memo(function({changes:e}){let{isDarkMode:o}=De(),{acl:r}=a.projectStore.useState();return Me.default.createElement(ea,{className:kd},Me.default.createElement(x,null,e.map((n,i)=>Me.default.createElement(Kg,{key:i,change:n,acl:r,isDarkMode:o}))))}),zg=3,Gg={["WebPage"]:Me.default.createElement(qi,null),["SmartComponent"]:Me.default.createElement($i,{width:"12",height:"12"}),["CollectionItem"]:Me.default.createElement(Ki,null)};function Kg({change:t,acl:e,isDarkMode:o}){let r=e.filter(n=>t.userIds.has(n.user.id));return Me.default.createElement(x,{direction:"row",alignItems:"center"},Me.default.createElement("div",{className:N(Id,t.status===2&&Hs)},Gg[t.type]),Me.default.createElement(x,{direction:"row",alignItems:"center",className:Td},Zg(t)),Me.default.createElement("div",{className:Md},Me.default.createElement(Pa,{entries:r,isDarkMode:o,maxAvatars:zg,small:!0,ignoreStatus:!0})))}function Zg(t){return t.status===2?Me.default.createElement(Me.default.Fragment,null,Me.default.createElement("span",{className:N(Hs,ve)},t.name),Me.default.createElement(Go,{variant:"neutral"},"REMOVED")):Me.default.createElement(Me.default.Fragment,null,Me.default.createElement(Mr,{onClick:()=>Yg(t.nodeId),className:N(ve,Ad)},t.name),t.status===1&&Me.default.createElement(Go,null,"NEW"))}function Yg(t){let e=a.tree.getNode(t);e&&(xa(e)?a.scopeStore.select(e.id):Er(e)&&(a.scopeStore.select(_r),a.selection.set(e.id)))}function xd({permissions:t,stagingEnabled:e,upsellPublishMultiPageSite:o}){if(!(e?t.canPublishToStaging:t.canPublish))return{buttonLabel:"No permissions to update",tooltipText:e&&!t.canPublishToStaging?"You need at least one assigned role to deploy to the staged site":"You do not have permission to deploy to the live site"};if(o)return{buttonLabel:"Exceeded page limit",tooltipText:"The Mini plan only allows a /home page and a /404 page. Upgrade your plan or delete all other web pages to update your site."}}var jd="container_c70v5i5",mr="title_t1m6d3um",Fn="button_ba9eeph",Ed="tooltip_tklurhb",Nd="site_sg8hahu",Dd="icon_i7ed8wv",Ud="hostname_h42o8li",Fd="link_l1agk2wg",Od="description_d1854po0",Ws="info_i1p0yt0i",qs="infoHover_ishjax2",Bd="warning_w1gzj9e3",_d="warningHover_w15kuguu",Rs="divider_d1q39ypx",Hd="changeLogTitleLoading_c1exh9nz",Wd="infoCard_itq4iqk",qd="infoCardTitle_irnc4ju",Rd="iconWrapper_i16wl99r",$d="infoCardCopy_i1kdm6pf";var ft=M(L());var Vd="search-upsell";function zd({searchIndexingUpsell:t,onClose:e}){let o=tr(()=>{e(),V("ui_interaction",{page:Vd,id:"confirm-upsell"}),a.publishStore.handleSearchLimitUpsell(a,t.limit)},[e,t.limit]);return(0,ft.useEffect)(()=>{V("ui_impression",{page:Vd})},[]),ft.default.createElement(x,{className:Wd,gap:15,padding:"20px 15px",alignItems:"center"},ft.default.createElement("div",{className:Rd},ft.default.createElement(Tr,null)),ft.default.createElement(x,{gap:4,paddingTop:5,alignItems:"center"},ft.default.createElement("h6",{className:N(mr,qd)},"Search limit reached"),ft.default.createElement("div",{className:$d},`You have more than ${t.limit} page${t.limit===1?"":"s"},`,ft.default.createElement("br",null),"site search will be disabled.")),ft.default.createElement(oe,{variant:"link",bold:!0,onClick:o},"Upgrade"))}var pe=M(L());function Qg(t,e){if(t.status==="invalid_dns")return{tooltipText:"Invalid DNS"};if(wa(e.status))return{tooltipText:"Optimization issues"}}function $s({hostname:t,deployment:e,displayMinimalUI:o,isLatest:r,isPending:n,isOptimizing:i,onOpenVersion:s,onOpenPendingDomain:p,onOpenWarning:c}){let l=Qg(t,e),u=pe.default.useRef(null),{triggerProps:m,tooltipProps:g}=Lr({interactive:!0,disabled:!(l!=null&&l.tooltipText),triggerRef:u}),T=()=>{V("ui_interaction",{page:"publish-popover",id:t.type==="custom"?"open-custom-link":"open-published-link"})};return pe.default.createElement("div",{className:Nd},pe.default.createElement("div",{className:Dd},pe.default.createElement(Ri,null)),pe.default.createElement("div",{className:N(Ud,ve)},pe.default.createElement(Mr,{href:Rr(a,t.hostname),onMouseDown:T,className:Fd},t.hostname)),pe.default.createElement("div",{className:Od},n&&pe.default.createElement("span",{className:N(Ws,!o&&qs),onClick:p},pe.default.createElement(P,null,"Pending Connection\u2026")),!n&&pe.default.createElement(pe.default.Fragment,null,pe.default.createElement("span",{className:N(Ws,!o&&qs),onClick:s},pe.default.createElement(P,null,"Updated")," ",pe.default.createElement(eh,{isoTimestamp:e.createdAt}),!r&&pe.default.createElement(pe.default.Fragment,null," (",t.deploymentId,")")),r&&pe.default.createElement("span",null," \xB7 ",e.deployedBy.name),l&&pe.default.createElement(pe.default.Fragment,null,pe.default.createElement("span",null," \xB7 "),pe.default.createElement("span",{ref:u,...m,className:N(Bd,!o&&_d),onClick:c},pe.default.createElement(P,null,"Warning")),pe.default.createElement(xr,{...g},l.tooltipText)),!l&&i&&pe.default.createElement(pe.default.Fragment,null,pe.default.createElement("span",null," \xB7 "),pe.default.createElement(P,null,"Optimizing...")))))}function eh({isoTimestamp:t}){return pe.default.createElement("time",{dateTime:t,title:Hc(t)},ba(ha(t),{addSuffix:!0}))}var be=M(L());function Gd({enabled:t,onClick:e,onSuccess:o,publishStatus:r,infoTooltip:n}){let[i,s]=(0,be.useState)(),p=(0,be.useRef)();(0,be.useEffect)(()=>()=>{p.current&&window.clearTimeout(p.current)},[]);let c=(0,be.useCallback)(async()=>{let b=await e();s(b?0:1),b&&o(),p.current&&window.clearTimeout(p.current),p.current=window.setTimeout(()=>s(void 0),2e3)},[e,o]),{label:l,content:u}=(0,be.useMemo)(()=>{if(n)return{label:n.buttonLabel,content:be.default.createElement(x,{justifyContent:"center",alignItems:"center",direction:"row",gap:8},be.default.createElement(Tr,null),be.default.createElement(P,null,n.buttonLabel))};if(i===0){let b="Updated";return{label:b,content:be.default.createElement(x,{gap:3,direction:"row",justifyContent:"center",alignItems:"center"},be.default.createElement(Wi,null,be.default.createElement(Ko,null)),be.default.createElement(P,null,b))}}else return i===1?{label:"Update failed",content:be.default.createElement(P,null,"Update failed")}:r===3?{label:"Publishing\u2026",content:be.default.createElement(vt,null)}:r===2?{label:"Update",content:be.default.createElement(P,null,"Update")}:{label:"Publish",content:be.default.createElement(P,null,"Publish")}},[i,r,n]),m=be.default.useRef(null),{triggerProps:g,tooltipProps:T}=Lr({className:Ed,direction:"right",disabled:!n,triggerRef:m});return be.default.createElement("div",{ref:m,...g},be.default.createElement(oe,{variant:"withDepthPrimary",large:!0,title:l,enabled:t,onClick:c,className:Fn},u),be.default.createElement(xr,{...T},n==null?void 0:n.tooltipText))}function Kd({projectId:t,canPublish:e,onPublish:o,publishStatus:r,onClose:n,defaultHostname:i,customHostname:s,defaultHostnameDeployment:p,customHostnameDeployment:c,deploymentStrategy:l}){return!i||!p||!l?null:Ce.default.createElement(oh,{projectId:t,canPublish:e,onPublish:o,publishStatus:r,onClose:n,defaultHostname:i,customHostname:s,defaultHostnameDeployment:p,customHostnameDeployment:c,deploymentStrategy:l})}var th="publish-popover";function oh({projectId:t,canPublish:e,onPublish:o,publishStatus:r,onClose:n,defaultHostname:i,customHostname:s,defaultHostnameDeployment:p,customHostnameDeployment:c,deploymentStrategy:l}){let{isEnabled:u,isLoadingChanges:m,hasChanges:g,hasError:T,changes:b,resetChanges:v}=Cd(t,p),f=tr(()=>{a.chromeStore.displayMinimalUI||(n(),a.siteSettings.setActiveTab({tab:"domains"}).catch(q))},[n]),h=tr(()=>{a.chromeStore.displayMinimalUI||(n(),a.siteSettings.setActiveTab({tab:"versions"}).catch(q))},[n]),C=cs(p.status);(0,Ce.useEffect)(()=>{V("ui_impression",{page:th})},[]);let k=Jr(),I=oc(a,eo),E=wd(a),j=s&&c,D=l==="manual",Z=xd({permissions:k,stagingEnabled:Boolean(j)&&D,upsellPublishMultiPageSite:I}),_=Ce.default.createElement(Gd,{onClick:o,onSuccess:v,enabled:e&&!I,publishStatus:r,infoTooltip:Z});return Ce.default.createElement(x,{padding:15,gap:15,className:jd},Ce.default.createElement("span",{className:mr},"Domains"),Ce.default.createElement($s,{hostname:i,deployment:p,displayMinimalUI:a.chromeStore.displayMinimalUI,isLatest:!0,isOptimizing:C,onOpenVersion:h,onOpenPendingDomain:f,onOpenWarning:f}),j&&D&&_,j&&Ce.default.createElement($s,{hostname:s,deployment:c,displayMinimalUI:a.chromeStore.displayMinimalUI,isLatest:s.deploymentId===i.deploymentId,isPending:s.status!=="active",isOptimizing:cs(c.status),onOpenVersion:h,onOpenPendingDomain:f,onOpenWarning:f}),(!j||!D)&&Ce.default.createElement(x,{gap:10},!j&&!a.siteSettings.isOpen&&!a.chromeStore.displayMinimalUI&&Ce.default.createElement(oe,{large:!0,className:Fn,onClick:f},Ce.default.createElement(P,null,"Add Custom Domain")),_),E.show?Ce.default.createElement(Ce.default.Fragment,null,Ce.default.createElement("div",{className:Rs}),Ce.default.createElement(zd,{searchIndexingUpsell:E,onClose:n})):u&&Ce.default.createElement(Ce.default.Fragment,null,Ce.default.createElement("div",{className:Rs}),Ce.default.createElement(x,{direction:"row",justifyContent:"space-between"},Ce.default.createElement("span",{className:N(mr,m&&Hd)},m?"Loading Changes...":T?"Error Loading Changes":`${b.length} ${b.length===1?"Change":"Changes"}`),m&&Ce.default.createElement(vt,{inline:!0})),!m&&g&&Ce.default.createElement(Ld,{changes:b})))}var Le=M(L());var $t=M(L());function Zd({background:t,onBackgroundChange:e}){var c;let o=$t.default.useCallback(l=>{ga(l)||e({backgroundType:l})},[e]),r=$t.default.useCallback(l=>e({backgroundColor:l}),[e]),n=$t.default.useCallback(l=>{l.then(u=>{var m;return e({backgroundImage:(m=u[0])==null?void 0:m.filename})}).catch(u=>q(u))},[e]),i=$t.default.useCallback(l=>e({backgroundImageResize:l}),[e]),s=$t.default.useCallback(l=>{let u=t.backgroundImage;if(!u)return;let m=Fi(u,l);e({backgroundImage:m})},[e,t.backgroundImage]),p=$t.default.useMemo(()=>new Set(t.backgroundImage!==void 0?[t.backgroundImage]:[]),[t.backgroundImage]);return $t.default.createElement(Mc,{tabsToShow:["solid","image"],currentType:t.backgroundType,value:(c=t.backgroundColor)!=null?c:"",imageReferences:p,imageResize:t.backgroundImageResize&&[t.backgroundImageResize]||[],onChangeFillType:o,onChange:r,onChangeColorStops:Re,onChangeImages:n,onChangeImageResize:i,onChangeAssetSize:s})}var Yd=M(L());function Jd({projectState:t,isViewOnly:e,currentUserId:o}){return Yd.default.createElement(Un,{type:"prototype-view",currentUserId:o,isViewOnly:e,projectState:t,onUpsellEditors:Re,isUnifiedPreviewEnabled:!0})}var me=M(L());var Xd="editButton_ej3nt2e",Qd="text_t1oh1mju",em="input_it68dxq",tm="inputWrapper_ibybjdi",om="successIndicator_s1k5u65i";function rm({isCurrent:t,initialPassword:e="",onPasswordChange:o}){let[r,n]=(0,me.useState)(!0),[i,s]=(0,me.useState)(e),[p,c]=(0,me.useState)(!1),[l,u]=(0,me.useState)(!1),m=i.length>=8;return(0,me.useEffect)(()=>{t||(s(e),n(!0),u(!1))},[t,e]),(0,me.useEffect)(()=>{if(!p)return;let b=setTimeout(()=>c(!1),3e3);return()=>{clearTimeout(b)}},[p,c]),me.default.createElement("form",{onSubmit:async b=>{if(b.preventDefault(),r){n(!1);return}if(m)try{await o(i),c(!0),n(!0),u(!1)}catch{u(!0)}}},me.default.createElement("input",{type:"hidden",autoFocus:!0}),me.default.createElement(x,{padding:"2px 15px 15px 15px",gap:10},me.default.createElement(x,{direction:"row",alignItems:"center",justifyContent:"flex-start",gap:15},me.default.createElement(Lt,{className:tm,large:!0,hasError:!m||l},me.default.createElement(xt,{className:em,large:!0,value:i,onChange:s,readOnly:r,autoFocus:!1,constantChange:!0}),p&&me.default.createElement("div",{className:om},me.default.createElement(Ko,null))),me.default.createElement(oe,{type:"submit",large:!0,className:Xd,enabled:r||m},r?me.default.createElement(nh,null):me.default.createElement(Ko,{animate:!1}))),me.default.createElement(uo,{style:{marginTop:"-1.5px"},visible:!m||l},m?me.default.createElement(P,null,"Could not save password"):me.default.createElement(P,null,"8 characters minimum")),me.default.createElement("div",{className:Qd},"All editors of this project can see and edit the password."),me.default.createElement(Ct,{enabled:r,title:"Copy Password",variant:"primary",large:!0,onClick:()=>{Ye(i).catch(q)}})))}function nh(){return me.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},me.default.createElement("path",{d:"M 9.828 3.343 C 10.024 3.148 10.34 3.148 10.536 3.343 L 12.657 5.464 C 12.852 5.66 12.852 5.976 12.657 6.172 L 6.26 12.568 C 6.051 12.777 5.784 12.92 5.494 12.978 L 3.139 13.449 C 2.789 13.519 2.481 13.211 2.551 12.861 L 3.022 10.506 C 3.08 10.216 3.223 9.949 3.432 9.74 Z M 11.939 1.232 C 12.135 1.037 12.451 1.037 12.646 1.232 L 14.768 3.354 C 14.963 3.549 14.963 3.865 14.768 4.061 L 14.061 4.768 C 13.865 4.963 13.549 4.963 13.354 4.768 L 11.232 2.646 C 11.037 2.451 11.037 2.135 11.232 1.939 Z",fill:"currentColor"}))}var U=M(L());var nm=M(L()),sh=0;function ih(t){let e=++sh;return(t||"")+e}function no(t){return nm.default.useRef(ih(t)).current}var fe=M(L());var sm="container_c1soe0x8",im="divider_d1ybdwop",_o="settingsRow_s1giq8pn",so="settingsControl_s1ovmgzl",am="checkboxRow_c198tspn",cm="checkbox_co5w69a",Vt="settingsLabel_s1mkh3b7",lm="settingsLabelDisabled_sqzwbmz",pm="manageAccessButton_m1lifmfp",um="manageAccessButtonDisabled_m1d53y1l",dm="manageAccessIcon_m1mpkz3u",mm="manageAccessIconDisabled_mv2lvgv",fm="proBadge_po5uar2",gm="noBackgroundTitle_n1qz2scu",hm="disabledBackground_dgq9dul",bm="disabledBackgroundTitle_d1dop2e9",vm="iconInfo_i1lt0ix9",ym="tooltipWrapper_tpmmgsr",Pm="tooltip_t136xnnt";var ah=fe.default.forwardRef(function(e,o){return fe.default.createElement("svg",{ref:o,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",className:e.className},fe.default.createElement("path",{d:"M 0 6 C 0 2.686 2.686 0 6 0 C 9.314 0 12 2.686 12 6 C 12 9.314 9.314 12 6 12 C 2.686 12 0 9.314 0 6 Z M 6 10 C 6.552 10 7 9.552 7 9 C 7 8.448 6.552 8 6 8 C 5.448 8 5 8.448 5 9 C 5 9.552 5.448 10 6 10 Z M 5 6 C 5 6.552 5.448 7 6 7 C 6.552 7 7 6.552 7 6 L 7 3 C 7 2.448 6.552 2 6 2 C 5.448 2 5 2.448 5 3 Z",fill:Ze.informationIcon}))});function io(t){let{enabled:e,id:o,onChange:r,value:n,label:i,upsellType:s,tooltipText:p}=t,[c,l]=(0,fe.useState)(!1),[u,m]=(0,fe.useState)({top:0,left:0}),g=(0,fe.useRef)(null),T=(0,fe.useRef)(null);return(0,fe.useLayoutEffect)(()=>{let b=g.current,v=T.current;if(!b||!v)return;let{right:f,height:h,top:C}=b.getBoundingClientRect(),{height:k}=v.getBoundingClientRect(),I=f+Sr.tooltipArrowHeight+5,E=C+h/2-k/2;m({left:I,top:E})},[c]),fe.default.createElement("div",{className:am},fe.default.createElement(Yt,{enabled:e,className:cm,id:o,onChange:r,value:n}),fe.default.createElement("label",{className:N(Vt,!e&&lm),htmlFor:o},fe.default.createElement(P,null,i),p&&fe.default.createElement(ah,{className:vm,ref:g,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)})),s&&fe.default.createElement("span",{className:fm},s==="professional"?fe.default.createElement(_i,null):fe.default.createElement(Hi,null)),t.onManageSettings&&fe.default.createElement("div",{role:"button",className:N(pm,!t.canManageSettings&&um),onClick:t.onManageSettings,onKeyDown:()=>{},tabIndex:0,"data-testid":"manage-access"},fe.default.createElement(P,null,"Manage"),fe.default.createElement(ch,{className:N(dm,!t.canManageSettings&&mm)})),c&&fe.default.createElement("div",{className:ym,style:u,ref:T},fe.default.createElement(Xi,{direction:"left",delay:50,text:p,tint:Ze.tint,className:Pm})))}function ch({className:t}){return fe.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:"8",height:"8"},fe.default.createElement("path",{d:"M 4 1 L 7 4 L 4 7",fill:"transparent",strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round"}))}function Cm({background:t,deviceHand:e,deviceTheme:o,deviceRotated:r,presetOrientationIsPortrait:n,canChangeResponsive:i,isDeviceHandEnabled:s=!0,isDeviceOrientationEnabled:p,isViewOnly:c,onAccessChange:l,onBackground:u,onBackgroundDelete:m,onDeviceHandChange:g,onDeviceThemeChange:T,onDeviceOrientationChange:b,onManageAccess:v,onManagePassword:f,onResponsiveChange:h,onShowUpsell:C,onTouchCursorChange:k,projectState:I,responsive:E,shareLink:j,shareLinkActions:D,touchCursor:Z}){var Ne;U.default.useEffect(()=>{a.processWhenReady(()=>{a.previewStore.highlights=j.highlights})},[j.highlights]);let _=no("toggle-responsive-"),y=no("toggle-touch-cursor-"),H=no("share-preview-show-highlights-"),z=no("share-preview-show-full-screen-"),ie=no("share-preview-set-public-access-"),Ee=no("share-preview-set-prototype-password-"),{canUsePrivateLink:ne,canUsePrototypePassword:G,canChangePrototypeAccess:ce,canHidePreviewInterface:te}=I.project.settings.featureFlags,ee=ne==="upsell",$e=te==="upsell",Fe=G==="upsell",K=U.default.useCallback(async re=>{if(ee){C("private-links");return}try{await l(re?"none":"view")}catch{}},[ee,l,C]),R=U.default.useCallback(re=>{D.setFullscreen(re)},[D]),ue=U.default.useCallback(async re=>{try{await l(re?"password":"view")}catch{}},[l]),[W,We]=U.default.useState(a.previewStore.pluginComponentId),Oe=U.default.useCallback(re=>{We(re),a.previewStore.pluginComponentId=re},[]),it=U.default.useMemo(()=>{var co;let re={};zo.forEachComponent(ct=>{Di(ct)&&(re[ct.identifier]=ct.name)});let xe=a.tree.get(Na);if((co=xe==null?void 0:xe.children)!=null&&co.length)for(let ct of xe.children)Ni(ct.annotations,"framerPreviewPlugin")&&(re[ct.codeComponentIdentifier]=ct.title);return Object.entries(re)},[]),zt=!c&&!W&&i,at=W?!1:E,wt=[U.default.createElement(Jo,{key:n?"Portrait":"Landscape",title:n?"Portrait":"Landscape",identifier:!1,selected:p&&!r,enabled:!c&&p,onSelect:b},n?U.default.createElement(es,null):U.default.createElement(Qn,null)),U.default.createElement(Jo,{key:n?"Landscape":"Portrait",title:n?"Landscape":"Portrait",identifier:!0,selected:p&&r,enabled:!c&&p,onSelect:b},n?U.default.createElement(Qn,null):U.default.createElement(es,null))],Pe=(0,U.useMemo)(()=>{if(G==="on"){if(ce==="off")return"\u201CAnyone with the link can open prototypes\u201D must be enabled in your team settings.";if(j.publicAccess==="none")return"Disable the \u201CPrivate Link\u201D setting."}},[G,ce,j.publicAccess]);return U.default.createElement("div",{className:N(sm,"unified-preview")},U.default.createElement("div",null,U.default.createElement("div",{className:_o},U.default.createElement("div",{className:Vt},"Theme"),U.default.createElement("div",{className:so},U.default.createElement(ts,{enabled:!c},U.default.createElement(Jo,{title:"Dark",identifier:"dark",selected:o==="dark",onSelect:T,enabled:!c}),U.default.createElement(Jo,{title:"Light",identifier:"light",selected:o==="light",onSelect:T,enabled:!c})))),U.default.createElement("div",{className:_o},U.default.createElement("div",{className:Vt},"Device"),U.default.createElement("div",{className:so},U.default.createElement(ts,{enabled:!c&&p},n?wt:wt.reverse()))),U.default.createElement("div",{className:_o},U.default.createElement("div",{className:Vt},"Hand"),U.default.createElement("div",{className:so},U.default.createElement(Yo,{enabled:!c&&s&&!W},[["None",void 0],["Model 1","hand-1"],["Model 2","hand-2"]].map(([re,xe])=>U.default.createElement(Xt,{key:`${xe}`,identifier:xe,title:re,selected:e===xe,onSelect:g}))))),U.default.createElement("div",{className:_o},U.default.createElement("div",{className:Vt},U.default.createElement(P,null,"Background")),U.default.createElement("div",{className:so},U.default.createElement(ph,{background:t,enabled:!c,onClick:u,onDelete:m}))),it.length>0&&U.default.createElement("div",{className:_o},U.default.createElement("div",{className:Vt},U.default.createElement(P,null,"Custom UI")),U.default.createElement("div",{className:so},U.default.createElement(Yo,null,U.default.createElement(Xt,{title:"None",selected:!W,onSelect:Oe}),it.map(([re,xe])=>U.default.createElement(Xt,{key:re,identifier:re,title:xe,selected:re===W,onSelect:Oe}))))),U.default.createElement("div",{className:im}),U.default.createElement(io,{enabled:zt,id:_,onChange:h,value:at,label:"Responsive Design"}),U.default.createElement(io,{enabled:!c,id:y,onChange:k,value:Z,label:"Touch Cursor"}),U.default.createElement(io,{enabled:!c,id:H,onChange:D.setHighlights,value:j.highlights,label:"Interaction Highlights"}),U.default.createElement(io,{enabled:!c&&te!=="off",id:z,onChange:R,value:j.fullscreen,label:"Hide Framer Interface",upsellType:$e?"professional":void 0}),U.default.createElement(io,{enabled:!c&&(ee||j.publicAccess!=="password"&&ne==="on"&&ce==="on"),id:ie,onChange:K,value:j.publicAccess==="none",label:"Private Link",upsellType:ee?"professional":void 0,canManageSettings:!c&&j.publicAccess==="none",onManageSettings:v}),U.default.createElement(io,{enabled:!c&&(Fe||j.publicAccess!=="none"&&G==="on"),id:Ee,onChange:ue,value:j.publicAccess==="password",label:"Set Password",upsellType:Fe?"enterprise":void 0,tooltipText:Pe,canManageSettings:!c&&j.publicAccess==="password"&&!!((Ne=I.project.shareLinks[0])!=null&&Ne.password),onManageSettings:f})))}function ph({background:t,enabled:e=!0,onClick:o,onDelete:r}){let{backgroundEnabled:n,backgroundType:i,backgroundColor:s,backgroundImage:p}=t,c=Ze.swatchBackgroundPlaceholderForFill,l=e?"Add\u2026":"None",u=Kc(s!=null?s:"",{currentType:i,imageReferences:p!==void 0?new Set([p]):void 0});n&&(c=u,l=Gc(i,s));let m=U.default.useCallback(f=>{e&&(f.stopPropagation(),o())},[e,o]),g=U.default.useCallback(f=>{e&&f.key==="Enter"&&(f.stopPropagation(),o())},[e,o]),T=U.default.useCallback(f=>{e&&(f.stopPropagation(),r())},[e,r]),b=U.default.useCallback(f=>{e&&f.key==="Enter"&&(f.stopPropagation(),r())},[e,r]),v=St("sites");return U.default.createElement("div",{role:"button",tabIndex:0,className:N(vc,so,!e&&hm),onClick:m,onKeyDown:g},U.default.createElement("div",{className:N(yc,v&&Pc)},U.default.createElement(Ic,{background:c})),U.default.createElement("div",{className:N(ve,wc,!n&&gm,!e&&bm)},l),n&&U.default.createElement("div",{role:"button",tabIndex:0,className:N(Cc,v&&Sc),onClick:T,onKeyDown:b,title:"Remove"},U.default.createElement(Ar,null)))}var Ho=M(L());function Sm(){let[,t]=Ho.default.useState(0),[e]=Ho.default.useState(()=>new bc({triggerRender:()=>t(o=>o+1)}));return e}function fr({navigation:t,id:e,title:o,popout:r,parent:n}){let i=uh(r);t.updatePopout(e,i,o);let s=Ho.default.useRef(i);return s.current=i,{present:Ho.default.useCallback(()=>{t.present(e,s.current,{parent:n!=null?n:null,title:o})},[e,t,n,o])}}function uh(t){let e=Ho.default.useRef(t);return(e.current.type!==t.type||!ja(e.current.props,t.props)||e.current.key!==t.key)&&(e.current=t),e.current}function Im(t){var ne;Le.default.useEffect(()=>{V("ui_impression",{page:"shared-preview-settings"})},[]);let{isDarkMode:e,setDarkMode:o}=De(),[r,n]=dh(),i=a.previewStore.useState(G=>G.previewNode),{isResponsive:s,canChangeResponsive:p}=a.previewStore.useState(({metadata:{isResponsive:G,canChangeResponsive:ce}})=>({isResponsive:Boolean(G),canChangeResponsive:Boolean(ce)})),c=Le.default.useMemo(()=>({backgroundEnabled:r.backgroundEnabled,backgroundType:r.backgroundType,backgroundColor:r.backgroundColor,backgroundImage:r.backgroundImage,backgroundImageResize:r.backgroundImageResize}),[r]),l=Le.default.useCallback(G=>{n({...G,backgroundEnabled:!0})},[n]),u=Le.default.useCallback(()=>{n({backgroundEnabled:void 0})},[n]),m=Le.default.useCallback(G=>{yl({model:G}),n({deviceHand:G,deviceSkin:"realistic"})},[n]),g=Le.default.useCallback(G=>{o(G==="dark"),n({deviceTheme:G})},[o,n]),T=Le.default.useCallback(G=>{V("ui_interaction",{page:"shared-preview-settings",id:"device-orientation"}),n({deviceRotated:G})},[n]),b=Le.default.useCallback(G=>{p&&n({responsive:G})},[n,p]),v=Le.default.useCallback(G=>{n({touch:G})},[n]),f=Sm(),{projectState:h,isViewOnly:C,currentUserId:k}=t,{present:I}=fr({navigation:f,id:"manage-access",title:"Manage Access",popout:Le.default.createElement(Jd,{projectState:h,isViewOnly:C,currentUserId:k}),parent:"share-panel"}),{present:E}=fr({navigation:f,id:"background",title:"Background",popout:Le.default.createElement(Zd,{background:c,onBackgroundChange:l}),parent:"share-panel"}),j="manage-password",{present:D}=fr({navigation:f,id:j,title:"Password",popout:Le.default.createElement(rm,{isCurrent:f.stack.findIndex(G=>G.id===j)===f.currentStackIndex,initialPassword:(ne=h.project.shareLinks[0])==null?void 0:ne.password,onPasswordChange:t.onPasswordChange}),parent:"share-panel"}),Z=r.backgroundType===void 0,_=Le.default.useCallback(()=>{n(Z?{backgroundEnabled:!0,backgroundType:"color",backgroundColor:a.documentSettings.hasDarkAppearance?"#252525":"#eee"}:{backgroundEnabled:!0}),E()},[n,Z,E]),y=r.deviceRotated!==void 0?r.deviceRotated:Qa(i,r.devicePreset),H=Ja(r.devicePreset),z=as({devicePreset:r.devicePreset,deviceSkin:r.deviceSkin,deviceRotated:y}),ie=as({devicePreset:r.devicePreset,deviceRotated:y}),{present:Ee}=fr({navigation:f,id:"share-panel",title:"Settings",popout:Le.default.createElement(Cm,{background:c,deviceHand:z?r.deviceHand:void 0,deviceTheme:e?"dark":"light",deviceRotated:y,presetOrientationIsPortrait:H,canChangeResponsive:p,isDeviceHandEnabled:ie&&!r.responsive,isDeviceOrientationEnabled:Xa(r.devicePreset)&&!r.responsive,isViewOnly:C,onAccessChange:t.onAccessChange,onBackground:_,onBackgroundDelete:u,onDeviceHandChange:m,onDeviceThemeChange:g,onDeviceOrientationChange:T,onManageAccess:I,onManagePassword:D,onResponsiveChange:b,onShowUpsell:t.onShowUpsell,onTouchCursorChange:v,projectState:t.projectState,responsive:s,shareLink:t.shareLink,shareLinkActions:t.shareLinkActions,touchCursor:r.touch})});return f.currentStackIndex===-1&&Ee(),Le.default.createElement(hc.Provider,{value:f},Le.default.createElement(Qi,{stack:f.stack,currentIndex:f.currentStackIndex,onBack:f.goBack}))}function dh(){let[t,e]=Le.default.useState(()=>km(a.previewStore.previewNode)),o=Le.default.useRef(t);Le.default.useEffect(()=>{let n=a.changes.observe("Tree","AssetMap",a.previewStore,()=>{let i=km(a.previewStore.previewNode);Ea(o.current,i)||(e(i),o.current=i)});return()=>a.changes.removeObserver(n)},[]);let r=Le.default.useCallback(n=>{let i=a.previewStore.previewNode;!i||!ns(i)||a.process(()=>{var s;(s=a.tree.current(i))==null||s.set({previewSettings:new da({...i.previewSettings,...n})})})},[]);return[t,r]}function km(t){return t&&ns(t)?{...os,...t.previewSettings,devicePreset:Ya(t)}:os}var ge=M(L());var Tm="container_caidnv",Am="header_hbqy5kl",Vs="title_t1az7ntz",Mm="learnMore_l1fksb8w",Bn="text_t75mjrz",Lm="alignCenter_abdabce",xm="steps_s1n7d5a1",jm="cardsGrid_cqkaik3",gr="card_c10poimu";var ze=M(L());function Em(){return ze.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},ze.default.createElement("path",{d:"M 23.544 0 L 8.553 0 C 5.754 0 3.556 2.2 3.556 4.9 L 3.556 21.2 C 3.556 24 5.754 26.2 8.553 26.2 L 13.35 26.2 L 22.045 32 L 20.246 26.2 L 23.544 26.2 C 26.242 26.2 28.441 24 28.441 21.3 L 28.441 4.9 C 28.541 2.2 26.342 0 23.544 0 Z M 22.844 14.7 C 22.844 18.5 19.746 21.3 16.048 21.3 C 12.35 21.3 9.252 18.5 9.252 14.7 L 9.252 6.7 C 9.252 5.6 9.952 4.9 10.951 4.9 C 11.951 4.9 12.65 5.5 12.65 6.7 L 12.65 14.5 C 12.65 16.6 13.95 18.2 16.148 18.2 C 18.247 18.2 19.546 16.5 19.546 14.5 L 19.546 6.7 C 19.546 5.6 20.246 4.9 21.245 4.9 C 22.245 4.9 22.944 5.5 22.944 6.7 L 22.944 14.7 Z",fill:"rgb(37,105,230)"}))}function Nm(){return ze.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},ze.default.createElement("g",null,ze.default.createElement("path",{d:"M 16 32 C 24.837 32 32 24.837 32 16 C 32 7.163 24.837 0 16 0 C 7.163 0 0 7.163 0 16 C 0 24.837 7.163 32 16 32",fill:"rgb(255,80,54)"}),ze.default.createElement("path",{d:"M 15.994 14.91 C 15.994 14.91 15.787 14.57 15.338 13.986 C 14.683 13.145 13.975 12.347 13.218 11.598 C 12.18 10.557 10.77 9.972 9.3 9.972 C 7.83 9.969 6.419 10.55 5.378 11.588 C 4.359 12.603 3.781 13.978 3.768 15.416 C 3.75 16.859 4.282 18.254 5.256 19.318 C 8.007 22.34 11.906 24.059 15.992 24.052 C 20.079 24.059 23.978 22.34 26.73 19.318 C 27.704 18.254 28.236 16.859 28.218 15.416 C 28.205 13.978 27.627 12.602 26.608 11.587 C 25.567 10.549 24.156 9.968 22.686 9.971 C 21.216 9.971 19.806 10.556 18.767 11.597 C 18.011 12.347 17.303 13.144 16.649 13.985 C 16.198 14.569 15.993 14.909 15.993 14.909",fill:"rgb(255,255,255)"}),ze.default.createElement("path",{d:"M 7.024 15.522 C 7.024 16.73 8.003 17.71 9.211 17.71 C 10.419 17.71 11.398 16.73 11.398 15.522 C 11.398 14.314 10.419 13.335 9.211 13.335 C 8.003 13.335 7.024 14.314 7.024 15.522 M 15.994 14.91 C 14.302 16.601 14.302 19.343 15.994 21.034 C 16.806 20.222 17.262 19.121 17.262 17.972 C 17.262 16.823 16.806 15.722 15.994 14.91 M 24.971 15.522 C 24.971 16.73 23.992 17.71 22.784 17.71 C 21.576 17.71 20.597 16.73 20.597 15.522 C 20.597 14.314 21.576 13.335 22.784 13.335 C 23.992 13.335 24.971 14.314 24.971 15.522",fill:"rgb(0,0,0)"})))}function Dm(){return ze.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},ze.default.createElement("g",{transform:"translate(-0.001 0)"},ze.default.createElement("path",{d:"M 27.399 4.594 C 24.462 1.653 20.476 0 16.318 0 C 12.161 0 8.174 1.653 5.237 4.594 C 4.277 5.538 3.986 6.97 4.501 8.214 C 5.017 9.458 6.236 10.265 7.584 10.254 C 8.466 10.261 9.315 9.916 9.941 9.294 C 11.64 7.588 13.953 6.636 16.361 6.651 C 20.003 6.675 23.276 8.878 24.668 12.242 C 26.06 15.606 25.3 19.476 22.739 22.065 C 22.11 22.704 21.779 23.536 21.779 24.41 C 21.773 25.289 22.119 26.134 22.74 26.756 C 23.361 27.379 24.206 27.728 25.085 27.725 C 25.964 27.729 26.808 27.384 27.431 26.765 C 33.535 20.629 33.521 10.713 27.399 4.594 Z",fill:"rgb(0,167,157)"}),ze.default.createElement("path",{d:"M 26.802 22.747 C 26.179 22.128 25.334 21.783 24.456 21.787 C 23.577 21.783 22.733 22.128 22.11 22.747 C 20.41 24.459 18.092 25.416 15.678 25.401 C 12.033 25.363 8.762 23.151 7.372 19.782 C 5.982 16.413 6.742 12.54 9.301 9.945 C 10.187 9.115 10.551 7.868 10.249 6.692 C 9.948 5.516 9.029 4.597 7.852 4.296 C 6.675 3.994 5.428 4.358 4.597 5.244 C -1.528 11.36 -1.533 21.282 4.587 27.405 C 10.707 33.528 20.634 33.532 26.76 27.416 C 27.399 26.776 27.719 25.945 27.719 25.06 C 27.762 24.193 27.428 23.349 26.802 22.747 Z",fill:"rgb(34,63,130)"}),ze.default.createElement("path",{d:"M 22.206 8.985 C 22.248 9.028 22.291 9.028 22.334 9.071 C 24.089 10.764 25.08 13.097 25.08 15.536 C 25.08 17.974 24.089 20.307 22.334 22.001 C 21.689 22.621 21.325 23.478 21.325 24.372 C 21.325 25.267 21.689 26.123 22.334 26.744 C 22.984 27.384 23.859 27.725 24.786 27.725 C 25.693 27.725 26.568 27.384 27.218 26.744 C 30.269 23.819 31.994 19.777 31.994 15.552 C 31.994 11.326 30.269 7.284 27.218 4.359 L 27.133 4.274 Z",fill:"rgb(0,167,157)"})))}function Um(){return ze.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},ze.default.createElement("path",{d:"M 24.492 8.444 C 22.751 8.444 20.606 9.508 17.893 11.697 C 17.174 12.292 16.517 12.849 15.962 13.355 C 15.432 12.861 14.776 12.292 14.032 11.697 C 11.356 9.508 9.174 8.444 7.47 8.444 C 3.356 8.444 0 11.849 0 16 C 0 20.189 3.356 23.556 7.47 23.556 C 9.211 23.556 11.356 22.492 14.069 20.303 C 14.789 19.708 15.445 19.151 16 18.645 C 16.53 19.139 17.186 19.708 17.931 20.303 C 20.644 22.492 22.789 23.556 24.53 23.556 C 28.644 23.556 32 20.151 32 16 C 31.962 11.849 28.593 8.444 24.492 8.444 Z M 11.659 17.304 C 8.833 19.556 7.647 19.67 7.457 19.67 C 5.464 19.67 3.849 18.012 3.849 15.987 C 3.849 13.962 5.476 12.317 7.457 12.317 C 7.672 12.317 8.833 12.444 11.659 14.684 C 12.215 15.127 12.744 15.595 13.186 16 C 12.719 16.405 12.227 16.835 11.659 17.304 Z M 17.047 17.633 L 14.587 17.304 L 14.397 14.848 L 15.962 13.342 L 16.29 15.798 L 18.763 15.987 Z M 24.492 19.683 C 24.278 19.683 23.117 19.556 20.29 17.316 C 19.735 16.873 19.205 16.405 18.763 16 C 19.205 15.595 19.722 15.152 20.252 14.722 C 23.079 12.444 24.265 12.317 24.454 12.317 C 26.448 12.317 28.063 13.975 28.063 16 C 28.101 18.025 26.473 19.683 24.492 19.683 Z",fill:"#ff606a"}))}function _n(t){V("ui_interaction",{page:"preview-tool-bar",id:t})}var fh=()=>_n("user-test-link_usertesting"),gh=()=>_n("user-test-link_userzoom-go"),hh=()=>_n("user-test-link_userbrain"),bh=()=>_n("user-test-link_loopback");function Om({isPrivateLinkEnabled:t}){return t?ge.default.createElement(x,{justifyContent:"center",alignItems:"center",padding:30,gap:15},ge.default.createElement("div",{className:Vs},"User Test"),ge.default.createElement("div",{className:N(Bn,Lm)},"Disable the ",ge.default.createElement("strong",null,"Private Link")," option in",ge.default.createElement("br",null)," Settings to user test this prototype."),ge.default.createElement(Fm,{link:"https://www.framer.com/support/using-framer/private-links/"})):ge.default.createElement("div",{className:Tm},ge.default.createElement(x,{className:Am,gap:0,direction:"row",justifyContent:"space-between",alignItems:"baseline"},ge.default.createElement("div",{className:Vs},"User Test"),ge.default.createElement(Fm,{link:"https://www.framer.com/support/using-framer/user-testing/"})),ge.default.createElement("div",{className:Bn},"Follow these steps to test your prototype:"),ge.default.createElement("ol",{className:N(Bn,xm)},ge.default.createElement("li",null,"Enable ",ge.default.createElement("strong",null,"Hide Framer Interface")),ge.default.createElement("li",null,"Copy the link of the prototype"),ge.default.createElement("li",null,"Test on the platform of your choice")),ge.default.createElement("div",{className:jm},ge.default.createElement("a",{className:gr,href:"https://app.usertesting.com/users/sign_in",target:"_blank",onClick:fh},ge.default.createElement(Em,null),"UserTesting"),ge.default.createElement("a",{className:gr,href:"https://www.userzoom.com/log-in/",target:"_blank",onClick:gh},ge.default.createElement(Nm,null),"UserZoom"),ge.default.createElement("a",{className:gr,href:"https://dashboard.userbrain.net/login",target:"_blank",onClick:hh},ge.default.createElement(Dm,null),"Userbrain"),ge.default.createElement("a",{className:gr,href:"https://lookback.io/sign-in",target:"_blank",onClick:bh},ge.default.createElement(Um,null),"Lookback")))}function Fm({link:t}){return ge.default.createElement("a",{className:Mm,href:t,target:"_blank"},"Learn More")}var Bm=t=>t==="editor-limit-pro"||t==="editor-limit-enterprise-single";function _m({canPublish:t,isViewOnly:e,user:o,projectState:r,activePopover:n,onActivePopoverChange:i,onAccessChange:s,onShareLinkAccessChange:p,onShareLinkPasswordChange:c,onCopyProjectURL:l,onShowMoveProjectMenu:u,onConfirmMoveProject:m,moveProjectDestination:g,shareLink:T,shareLinkActions:b,onPublish:v,publishStatus:f,defaultHostname:h,customHostname:C,defaultHostnameDeployment:k,customHostnameDeployment:I,deploymentStrategy:E,onUpgradePlan:j}){var wt;let D=(0,he.useRef)(null),{id:Z,space:_}=r.project,y=(0,he.useMemo)(()=>{let Pe=o.spaces.find(Ne=>Ne.id===_.id);return qe(Pe)?Pe.license:null},[_.id,o.spaces]),H=document.getElementById("toolbar-invite-button"),z=document.getElementById("toolbar-share-button"),ie=document.getElementById("toolbar-user-test-button"),Ee=document.getElementById("toolbar-copy-link-button"),ne=document.getElementById("toolbar-publish-button"),G=ls("canUsePrivateLink","upsell"),ce=ls("canInviteEditors","upsell"),[te,ee]=(0,he.useState)(null),$e=(0,he.useMemo)(()=>Bm(te)?"invite-panel-editors-upsell":te==="private-project-link"?"invite-panel-private-link-upsell":te==="private-links"?"private-prototype-link-upsell":"unknown-page",[te]),Fe=(0,he.useMemo)(()=>{let Pe=o.spaces.find(re=>re.id===r.project.space.id);if(!Pe)return!1;let Ne=te==="private-project-link"&&G||te==="private-links"&&G||Bm(te)&&ce;return Pe.permissions.write&&Ne},[ce,G,r.project.space.id,te,o.spaces]);function K(){ee(null)}function R(){i(0)}let ue=(0,he.useCallback)(()=>{f!==3&&i(0)},[f,i]),W=Be(r.project.space),We=o.id===r.project.owner.id,Oe=W&&We,it=St("sites"),zt=rn(),at=!it||!zt;return he.default.createElement(Zi,{ref:D,className:Vc},n===2&&he.default.createElement(Jt,{className:tn,anchor:it?H:D.current,alignSelf:it?"center":"end",attachTo:"bottom",offset:it?{x:0,y:Sr.tooltipArrowHeight+1}:{x:15,y:-5},arrow:{anchor:H,alignSelf:"center"},onClose:R},Oe?he.default.createElement(hu,{user:o,projectState:r,onShowMoveProjectMenu:u,onConfirmMoveProject:m,moveProjectDestination:g}):at?he.default.createElement(yd,{user:o,projectState:r,isDraftProject:W,isCurrentUserOwner:We,onAccessChange:s,onCopyProjectURL:l,onClose:R,onShowUpsell:ee}):he.default.createElement(zu,{user:o,projectState:r,isDraftProject:W,isCurrentUserOwner:We,onAccessChange:s,onCopyProjectURL:l,onClose:R,onShowUpsell:ee})),n===3&&he.default.createElement(Jt,{className:zc,anchor:z,alignSelf:"center",attachTo:"bottom",offset:{x:0,y:20},onClose:R},he.default.createElement(Im,{currentUserId:o.id,isViewOnly:e,onAccessChange:p,onPasswordChange:c,projectState:r,shareLink:T,shareLinkActions:b,onShowUpsell:ee})),n===4&&he.default.createElement(Jt,{anchor:ie,alignSelf:"center",attachTo:"bottom",offset:{x:0,y:25},onClose:R},he.default.createElement(Om,{isPrivateLinkEnabled:T.publicAccess==="none"})),n===9&&he.default.createElement(Jt,{anchor:Ee,alignSelf:"center",attachTo:"bottom",offset:{x:0,y:25},onClose:R},he.default.createElement(Qp,{password:(wt=r.project.shareLinks[0])==null?void 0:wt.password})),n===6&&he.default.createElement(Jt,{className:tn,anchor:D.current,alignSelf:"end",attachTo:"bottom",offset:{x:15,y:-5},arrow:{anchor:ne,alignSelf:"center"},onClose:ue},he.default.createElement(Kd,{projectId:Z,canPublish:t,onPublish:v,publishStatus:f,onClose:R,defaultHostname:h,customHostname:C,defaultHostnameDeployment:k,customHostnameDeployment:I,deploymentStrategy:E})),n===1&&he.default.createElement(Jt,{className:tn,anchor:D.current,alignSelf:"end",attachTo:"bottom",offset:{x:15,y:-5},arrow:{anchor:ne,alignSelf:"center"},backdropEnabled:!1,focusTrapEnabled:!1},he.default.createElement(cu,{canPublish:t,publishStatus:f,onPublish:v,onDismiss:R})),te&&_.scope==="organization"&&he.default.createElement(cn,{canUpgrade:Fe,teamId:_.ownerId,teamLicense:y,trackingPage:$e,upsellType:te,onDismiss:K,onUpgradePlan:j}))}var ao=M(L());function Hm({isUserPartOfTeam:t,api:e,projectTeamId:o,autoJoinDefaultRole:r}){let[n,i]=ao.default.useState(),[s,p]=ao.default.useState(!0),[c,l]=ao.default.useState(!1),[u,m]=Kr("recommended-teams-joined-pending-welcome-modal",[]),g=r==="editor"?"an Editor":`a ${ma(r)}`,T=ao.default.useCallback(async()=>{if(n)try{V("ui_interaction",{page:"canvas-autojoin-toast",id:"joinTeam"}),l(!0),await e.joinRecommendedTeam(n.id,"recommended-canvas"),m(b=>[...b,n.id]),l(!1),i(void 0),B({variant:"success",key:"joined-team-sucess",icon:"success",text:`You have joined the ${n.displayName} team as ${g}`,type:"add"})}catch{B({variant:"error",key:"joined-team-error",icon:"error",text:"Failed to join team",type:"add"})}},[n,e,m,g]);return ao.default.useEffect(()=>{let b=!0;if(t){p(!1);return}return e.fetchRecommendedTeams().then(v=>{if(!b)return;let f=v.find(({id:h})=>o===h);f&&i(f),p(!1)}).catch(()=>{}),()=>{b=!1}},[t,e,o]),ao.default.useEffect(()=>{let b="recommended-team";n?(V("ui_impression",{page:"canvas-autojoin-toast"}),B({variant:"info",key:b,text:`Join the ${n.displayName} team as ${g}`,action:{onClick:T,title:"Join"},styleOverride:"fallback-tool",permanent:!!n||c,type:"add",icon:"view-only",duration:1/0})):B({type:"remove",key:b})}),{isShowingRecommendedTeamToast:s||!!n}}var Ge=M(L());var se=M(L());var Wm="description_d1mpdoho",zs="resource_rbg65ev",qm="divider_d1m3gl5g",Gs="icon_i5ixusr";var wh="request-editor-access";function Rm({space:t,projectAccessStatus:e,teamAccessStatus:o,onRequestProjectEditAccess:r,onRequestTeamEditAccess:n,onDismiss:i,showRequestTeamEditorAccess:s}){return(0,se.useEffect)(()=>{V("ui_impression",{page:wh})},[]),(t==null?void 0:t.scope)!=="organization"?null:se.default.createElement(jt,{visible:!0,onDismiss:i},se.default.createElement(x,{gap:15},se.default.createElement(x,{gap:20},se.default.createElement(Ae,{className:Et.title},se.default.createElement(P,null,"Request Edit Access")),se.default.createElement(Ae,{className:Wm},se.default.createElement(P,null,"You are currently a viewer in this project."),se.default.createElement("br",null),se.default.createElement(P,null,"Request edit access below."))),se.default.createElement("hr",{className:qm}),se.default.createElement(x,{gap:15},se.default.createElement(x,{direction:"row",gap:0,justifyContent:"space-between"},se.default.createElement(x,{direction:"row",gap:10,justifyContent:"center",alignItems:"center"},se.default.createElement(x,{className:Gs,justifyContent:"center",alignItems:"center"},se.default.createElement(Ch,null)),se.default.createElement(Ae,{className:zs},se.default.createElement(P,null,"This Project"))),se.default.createElement(oe,{large:!0,variant:"primary",title:"Request Access",onClick:r,enabled:e!=="pending"&&e!=="loading"},se.default.createElement(P,null,e==="pending"?"Pending":"Request"))),t&&s&&se.default.createElement(x,{direction:"row",gap:0,justifyContent:"space-between"},se.default.createElement(x,{direction:"row",gap:10,justifyContent:"center",alignItems:"center"},se.default.createElement(x,{className:Gs,justifyContent:"center",alignItems:"center"},se.default.createElement(bl,{avatar:null,displayName:t.displayName,organization:null})),se.default.createElement(Ae,{className:zs},se.default.createElement(P,null,"All Projects in Team"))),se.default.createElement(oe,{large:!0,variant:"primary",title:"Request Access",onClick:n,enabled:o!=="pending"&&o!=="loading"},se.default.createElement(P,null,o==="pending"?"Pending":"Request"))))))}function Ch(){return se.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},se.default.createElement("path",{d:"M 9.828 3.343 C 10.024 3.148 10.34 3.148 10.536 3.343 L 12.657 5.464 C 12.852 5.66 12.852 5.976 12.657 6.172 L 6.26 12.568 C 6.051 12.777 5.784 12.92 5.494 12.978 L 3.139 13.449 C 2.789 13.519 2.481 13.211 2.551 12.861 L 3.022 10.506 C 3.08 10.216 3.223 9.949 3.432 9.74 Z M 11.939 1.232 C 12.135 1.037 12.451 1.037 12.646 1.232 L 14.768 3.354 C 14.963 3.549 14.963 3.865 14.768 4.061 L 14.061 4.768 C 13.865 4.963 13.549 4.963 13.354 4.768 L 11.232 2.646 C 11.037 2.451 11.037 2.135 11.232 1.939 Z",fill:"currentColor"}))}var Hn=hl(B);function Sh({isUserPartOfTeam:t,isUserEditorInTeam:e}){return t&&!e}function $m({project:t,isUserPartOfTeam:e,isUserEditorInTeam:o,toastKey:r}){let[n,i]=(0,Ge.useState)(!1),[s,p]=(0,Ge.useState)(),[c,l]=(0,Ge.useState)(),u=Be(t.space),m=(0,Ge.useMemo)(()=>u?"Dismiss":e&&c==="pending"||!e&&s==="pending"?"Request Pending":"Request Access",[e,u,s,c]),g=(0,Ge.useCallback)(async()=>{V("ui_interaction",{page:"request-editor-access",id:"request-project-editor-access"});try{p("loading");let{status:v}=await hs({resourceType:"project",resourceId:t.id});p(v),Hn.projectSuccess()}catch{p(void 0),Hn.projectError()}},[t.id]),T=(0,Ge.useCallback)(async()=>{if(t.space.displayName){V("ui_interaction",{page:"request-editor-access",id:"request-team-editor-access"});try{l("loading");let{status:v}=await hs({resourceType:"team",resourceId:t.space.ownerId});l(v),p(v),Hn.teamSuccess(t.space.displayName)}catch{l(void 0),Hn.teamError(t.space.displayName)}}},[t.space.displayName,t.space.ownerId]);return(0,Ge.useEffect)(()=>{if(!r)return;B({variant:"info",key:r,text:"You do not have editing rights for this project",action:u?void 0:{title:m,onClick:()=>{i(!0)}},permanent:!u,styleOverride:u?void 0:"request-editor-access",showCloseButton:u?"auto":"never",type:"add",icon:"view-only",duration:1/0})},[r,m,u]),(0,Ge.useEffect)(()=>{if(!r)return;let v=!0;return(async()=>{try{let{accessRequests:f}=await kh(t.id);if(!v)return;f.team&&e&&(l(f.team.status),p(f.team.status)),f.project&&p(f.project.status)}catch(f){q(f)}})(),()=>{v=!1}},[r,t.id,e]),(0,Ge.useMemo)(()=>!n||t.space.scope!=="organization"?null:Ge.default.createElement(Rm,{projectAccessStatus:s,teamAccessStatus:c,onRequestProjectEditAccess:g,onRequestTeamEditAccess:T,showRequestTeamEditorAccess:Sh({isUserPartOfTeam:e,isUserEditorInTeam:o}),space:t.space,onDismiss:()=>{i(!1)}}),[g,T,n,t.space,s,c,e,o])}function kh(t){return A.get(`/web/access-requests/projects/${t}`)}var Vm=M(L());function zm({disabled:t}){let e="missing-permissions",o=a.scopeStore.useState(m=>m.active.id===_r),r=a.siteSettings.useState(m=>m.active),n=o?"CMS":r?"SiteSettings":"Canvas",i=Jr(),s=n==="Canvas"&&!i.canDesign||n==="CMS"&&!i.canEditContent||n==="SiteSettings"&&!i.canEditSiteSettings,p=St("sites"),c=rn(),u=!t&&p&&c&&s;Vm.default.useEffect(()=>{u?B({type:"add",key:e,variant:"info",text:Ih(n),permanent:!0,icon:"view-only",duration:1/0}):B({type:"remove",key:e})},[e,u,n])}function Ih(t){switch(t){case"Canvas":return"You do not have design editing rights";case"CMS":return"You do not have content editing rights";case"SiteSettings":return"You don\u2019t have enough permissions to edit these settings";default:Te(t,"All sections should have a toast text")}}var Th=tt("projectHandlers"),Ah=(0,F.lazy)(()=>import("https://app.framerstatic.com/AccountSettingsModal-O7EX62W6.js")),Mh=(0,F.lazy)(()=>import("https://app.framerstatic.com/WelcomeWindow-XIF7476U.js")),Lh=(0,F.lazy)(()=>import("https://app.framerstatic.com/TeamCreationModal-WZYA74FQ.js")),Gm=t=>Fc(t,21),xh=new URL(window.location.href),Km=xh.searchParams.get("preview"),jh=Km?Km==="1":void 0,Eh=typeof window!="undefined"&&!zr()?qp(window.location):null,Nh=a.wrapHandler(t=>a.publishStore.publish(a,t));function Zm({projectState:t,activeNodeId:e,initialUser:o,api:r,assetService:n,filePickerRef:i}){var ii;let{project:s}=t;(0,F.useEffect)(()=>{a.processWhenReady(()=>{a.projectStore.project=s})},[s]);let[p,c]=(0,F.useState)(!1),[l,u]=(0,F.useState)(!1),m=Yc(Kt().api,o),{user:g}=m,[T,b]=(0,F.useState)(null),[v,f]=(0,F.useState)(null),[h,C]=(0,F.useState)(!1),[k,I]=(0,F.useState)(null),E=(0,F.useCallback)(S=>{a.popover.active=S},[]),{publishStatus:j,defaultHostname:D,customHostname:Z,defaultHostnameDeployment:_,customHostnameDeployment:y,deploymentStrategy:H}=a.publishStore.useState(),{active:z}=a.popover.useState(),ie=S=>$=>{$.preventDefault(),$.stopPropagation(),S()},Ee=gp(S=>{let $=Ut("showPreview");Se($,"togglePreviewVisible key binding is not set"),S($,ie(bo),"Toggle Preview");let le=Ut("openFullScreen");Se(le,"openFullScreen key binding is not set"),S(le,ie(()=>Xr().openFullScreen()),"Present Preview");let Ke=Ut("showPreviewNewWindow");Se(Ke,"openExternalPreviewWindow key binding is not set"),S(Ke,ie(fs),"Open in New Tab");let lt=Ut("toggleHighlightsInLivePreview");Se(lt,"toggleHighlightsInLivePreview key binding is not set"),S(lt,ie(()=>a.previewStore.toggleHighlights()),"Show Interaction Highlights");let Gt=Ut("toggleConsole");Se(Gt,"toggleConsole key binding is not set"),S(Gt,ie(()=>Xr().toggleConsole()),"Toggle Preview Console");let Mt=Ut("togglePreviewInterface");Se(Mt,"togglePreviewInterface key binding is not set"),S(Mt,ie(()=>a.fullsizePreviewStore.togglePreviewUIVisible()),"Toggle Preview interface");let et=Ut("reload");Se(et,"reload key binding is not set"),S(et,ie(()=>Xr().reload()),"Reset Preview"),S("CommandOrControl+S",ie(()=>{Yr()||B({type:"add",variant:"success",icon:"success",text:"Framer automatically saves your work",key:"auto-save-toast"})}),"Save")},[]),ne=a.documentSettings.isNewlyCreatedProject,G=t.aclById[s.owner.id],ce=Y.isOn("skipInterstitial"),te=((ii=t.aclById[g.id])==null?void 0:ii.role)||s.userRole,ee=te==="viewer",$e=te==="owner",Fe=te==="viewer",[K,R]=(0,F.useState)(Dt(s)&&!ne);Y.update(s.canvasFeatures);let{collections:ue}=wp(g.spaces,g.id,r),W=(0,F.useMemo)(()=>g.spaces.find(S=>S.id===s.space.id),[s.space.id,g.spaces]);(0,F.useEffect)(()=>{qe(W)&&!a.persistedUserDefaults.showPackagesDefaultValueSet&&!W.configuration.hidePackages&&(a.persistedUserDefaults.showPackages=!W.configuration.hidePackages)},[W]);let We=(0,F.useMemo)(()=>g.spaces.filter(qe),[g.spaces]),Oe=(0,F.useRef)(!0);(0,F.useEffect)(()=>{if(Oe.current){Oe.current=!1;return}n.refresh().catch(q)},[W,n]);let it=on(),zt=(0,F.useMemo)(()=>ue?ul(ue):null,[ue]),{canMoveProject:at,availableCollectionsBySpace:wt}=dl({project:s,user:g,collectionsBySpace:zt});Tp({channel:Ve,project:s,canMoveProject:at,onShowMoveProjectMenu:Gn,onShowUpgradeOrTrialModal:Pe});function Pe(S,$){qe(W)&&I({upsell:S,trackingPage:$})}(0,F.useEffect)(()=>{let S=s.settings.featureFlags,$=qe(W)?W.license.featureFlags:{};ua(),s.teamExperiments&&Ie.update(s.teamExperiments),$r.update({...$,...S})},[W,s.settings,s.teamExperiments]),(0,F.useEffect)(()=>{f(null)},[s.space,s.collection]),(0,F.useEffect)(()=>{a.processWhenReady(()=>{a.chromeStore.isPreviewingFeaturedTemplate=(G==null?void 0:G.user.isFramerEmployee)===!0&&ce&&ee})},[ce,G==null?void 0:G.user.isFramerEmployee,ee]);let{isPreviewingFeaturedTemplate:Ne}=a.chromeStore.useState(),re=ee||s.archived||Ne!==!1,xe=a.modalStore.useState(),co=(0,F.useRef)(!1);(0,F.useEffect)(()=>{if(s.space.scope==="organization"||re||xe.active.type!=="None")return;if(!g.spaces.some($=>qe($)&&$.permissions.write)){a.processWhenReady(()=>a.modalStore.set({type:"CreateTeam",source:"automatic"})),co.current=!0;return}co.current||sn.defaultProjectLocation.then(({defaultTeam:$})=>{if(!($!=null&&$.spaceId))return;let{displayName:le,spaceId:Ke}=$;f({spaceId:Ke,destinationLabel:Gm(`${le} / All`),spaceName:le})}).catch(Th.reportError).finally(()=>{a.modalStore.set({type:"DeprecatedDrafts",source:"automatic"}),co.current=!0})},[re,s.space.scope,xe,g.spaces]);let ct=(re||Be(s.space))&&!zr(),Ks=K&&!zr(),Wn=a.codeEditorStore.useState(S=>S.currentCodeFileId),[Zs,br]=Cp({project:s}),qn=Sp({project:s,shareLink:Zs}).href,{updateHistoryData:vr,setHistoryState:Rn}=Pp({project:s,projectInitialQueryString:window.location.search,activeNodeId:e,currentCodeFileId:Wn,shareLinkUrl:qn},S=>{if(S.key==="project")bo({visible:!1,source:"back_navigation"});else if(S.key==="preview"){bo({visible:!0,source:"back_navigation"});let{previewItem:$}=S;$&&(a.previewStore.item=$)}else Te(S)});(0,F.useEffect)(()=>{vr({project:s,activeNodeId:e,currentCodeFileId:Wn,shareLinkUrl:qn})},[vr,s,e,Wn,qn]),(0,F.useEffect)(()=>{jh&&a.processWhenReady(()=>{bo({visible:!0,shownOnLaunch:!0})})},[]),(0,F.useEffect)(()=>{let S=a.changes.observe(a.chromeStore,()=>{a.chromeStore.mainView===3?Rn("preview"):Rn("project")});return()=>a.changes.removeObserver(S)},[Rn]),(0,F.useEffect)(()=>{let S=a.changes.observe(a.previewStore,()=>{let $=a.previewStore.item;vr({previewItem:$});let le=($==null?void 0:$.type)==="node"?$.nodeId:void 0;br.setNodeId(le)});return()=>a.changes.removeObserver(S)},[vr,br]);let yr=Be(W)&&$e||qe(W)&&W.permissions.write&&!ee;async function Ys(){let[,S]=Nt.extract(ms(s.title));V("ui_interaction",{page:"project-menu-bar",id:"archive-project"});try{await r.updateProject({archived:!0}),B({type:"add",variant:"success",key:`archive-${s.id}`,text:`Archived ${S}`,icon:"success",duration:3e3})}catch{B({type:"add",variant:"error",key:`archive-${s.id}`,text:`Failed to archive ${S}`,icon:"error",duration:3e3})}r.wait(()=>{window.location.href=Qt})}function Jm(){s.space.scope==="organization"?b(s):Ys()}let $n=(0,F.useCallback)(async()=>{V("ui_interaction",{page:"canvas-unarchive-toast",id:"unarchive-project"});try{await r.updateProject({archived:!1}),B({type:"add",variant:"success",key:`unarchived-${s.id}`,text:"This project has been unarchived",icon:"success"})}catch{B({type:"add",variant:"error",key:`unarchived-${s.id}`,text:"Failed to unarchive project",icon:"error"})}},[r,s.id]);async function Xm(){V("ui_interaction",{page:"project-menu-bar",id:"save-project-as-template"});let S=`save-as-template-${s.id}`;try{await r.updateProject({type:"template"}),B({type:"add",variant:"success",key:S,text:"This project has been added to Templates",icon:"success",duration:5e3,action:{title:"See Templates",onClick:()=>{window.location.href=`${Kt().app}${Qt}folder/templates?team=${s.space.id}`}}})}catch{B({type:"add",variant:"error",key:S,text:"This project could not be saved as template",icon:"error",duration:3e3})}}async function Qm(){V("ui_interaction",{page:"project-menu-bar",id:"save-project-as-template"});let S=`save-as-project-${s.id}`;try{await r.updateProject({type:"default"}),R(!1),B({type:"add",variant:"success",key:S,text:"This project is no longer a template",icon:"success",duration:3e3})}catch{B({type:"add",variant:"error",key:S,text:"This template could not be converted to a project",icon:"error",duration:3e3})}}let lo="view-only-access",{isShowingRecommendedTeamToast:ef}=Hm({isUserPartOfTeam:typeof W!="undefined",api:m,projectTeamId:s.space.ownerId,autoJoinDefaultRole:s.settings.featureFlags.canInviteEditors==="on"?s.settings.autoJoinDefaultRole:"viewer"}),tf=ct&&!Be(s.space)&&Fe&&!s.archived&&!ef&&!Ne?lo:void 0,Js=$m({project:s,isUserPartOfTeam:typeof W!="undefined",isUserEditorInTeam:typeof W!="undefined"&&W.permissions.write,toastKey:tf});zm({disabled:Fe||Be(s.space)}),(0,F.useEffect)(()=>{ct?s.archived?B({key:lo,variant:"info",text:`This file is archived and view-only. ${yr?"Unarchive the file to edit.":""}`,action:yr?{title:"Unarchive",onClick:()=>$n()}:void 0,type:"add",icon:"view-only",duration:1/0,permanent:!0}):Be(s.space)?B({key:lo,variant:"info",text:"Draft projects are deprecated. Please move it to a team to continue editing.",type:"add",icon:"view-only",duration:1/0,permanent:!0}):Ne&&B({key:lo,type:"add",variant:"prominent-info",icon:"view-only",text:"You\u2019re previewing a view-only version of this template",duration:1/0,permanent:!0,action:{title:"Use Template",onClick:()=>ot(Ai({duplicateFrom:s.id}))}}):!ne&&Ks?B({key:lo,type:"add",variant:"info",icon:"warning",text:"You\u2019re viewing a template project",duration:1/0,showCloseButton:"never",action:re?void 0:{title:"Edit Template",onClick:()=>R(!1)}}):B({key:lo,type:"remove"})},[ct,s.archived,$n,yr,ne,Ks,re,s.id,s.space,Ne]),ll(ms(s.title));let of=Kp({channel:Ve});xp({user:g,channel:Ve,permissions:{isViewOnly:re||K||Be(s.space)}});let rf=Yp({channel:Ve}),{isFeedbackActive:nf}=Wp({vekterChannel:Ve,initialThread:Eh});$p({toast:B,userNotifications:rf,isFeedbackActive:nf}),zp({toast:B,isDocumentLoaded:p,action:async S=>S==="subscribe"?r.subscribeToNotifications():r.unsubscribeFromNotifications()}),(0,F.useEffect)(()=>{ta.init({userId:g.id,appVersion:Fa,projectId:s.id}),a.processWhenReady(()=>{g.id&&(a.documentSettings.currentUserId=g.id),g.email&&(a.documentSettings.currentUserEmail=g.email),g.spaces&&(a.documentSettings.spaces=g.spaces)})},[s.id,g.email,g.id,g.spaces]);let sf=Ip();Rl(S=>{S(ac,()=>{setTimeout(()=>c(!0))}),S(cc,async $=>{if(!$)return;let le=`renamed-${s.id}`;try{await r.updateProject({title:$})}catch{B({type:"add",variant:"error",key:le,text:"Failed to update project name",icon:"error"})}})});let af=F.default.useCallback(async()=>{if(Ie.isOn("insertPages")){Nc({insertPanel:!0,spaceId:W==null?void 0:W.id},!0).catch(q);return}ot(Ec(s,g))},[W,s,g]),Xs=F.default.useCallback(async()=>{ot(ds(s))},[s]),[Qs,Vn]=(0,F.useState)(null),zn=F.default.useCallback(async()=>{ot(ds(s,{sites:!0})),Vn(null)},[s]),ei=St("packages"),ti=!St("codeModules"),cf=F.default.useCallback(async()=>{let S=[];if(ti&&S.push("Legacy Code"),ei&&S.push("Packages"),S.length)Vn({unsupportedFeatures:S});else return zn()},[zn,ei,ti]);Hp({appMenu:a.chromeStore.displayMinimalUI?ws.mobileWebAppMenu:ws.webAppMenu,archiveProject:Jm,onPreviewToggle:bo,onOpenPreviewInNewWindow:fs,filePickerRef:i,openAccountSettings:ni,onUploadImagePick:sf,menuActionTargetService:of,saveProjectAsTemplate:Xm,saveTemplateAsProject:Qm,project:s,toast:B,unarchiveProject:$n,user:g,userCanArchive:yr,handleNewProject:af,handleProjectDuplication:Xs,handleDuplicationAsSite:cf,handleTemplateDuplication:Xs}),Ac({globalKeyBindings:Ee});async function lf(S){V("ui_interaction",{page:"project-menu-bar",id:"change-access"});try{await r.updateProject({publicAccess:S})}catch{B({type:"add",variant:"error",key:`access-change-${s.id}`,text:"Failed to change the access level of this project",icon:"error"})}}async function pf(S){var le;let $=(le=s.shareLinks[0])==null?void 0:le.id;Se($!==void 0,"Invalid share link with undefined id"),br.setPublicAccess(S),await r.updateShareLink({id:$,publicAccess:S})}async function uf(S){var le;let $=(le=s.shareLinks[0])==null?void 0:le.id;Se($!==void 0,"Invalid share link with undefined id"),await r.updateShareLink({id:$,password:S})}function df(){V("ui_interaction",{page:"project-menu-bar",id:"copy-link"})}function mf(S,$,le=!1){let Ke=mo(s,g),lt=Ke.spaceName.trim(),Gt=S?[{label:`Go to ${lt}`,handler:()=>{window.location.href=Ke.href}},{type:"separator"}]:[];if(!at||re)return Gt;let Mt=[];for(let[et,wf]of Object.entries(wt)){let{displayName:qo,collections:Cf}=wf,Sf=Cf.map(gt=>{var li,pi;let[ai,ci]=Nt.extract(Ca(gt));return{label:ci,handler:()=>{oi({spaceId:et,destinationLabel:`${qo} / ${ci}`,collection:gt,spaceName:qo,skipConfirmation:$})},checked:v&&$?v.spaceId===et&&(((li=v.collection)==null?void 0:li.id)===gt.id||!v.collection&&gt.id==="recent"):s.space.id===et&&(((pi=s.collection)==null?void 0:pi.id)===gt.id||!s.collection&&gt.id==="recent"),value:{spaceId:et,collection:gt},icon:ai?{src:ai}:void 0}});if(qo!==""){let gt=Gm(qo);Mt.push({label:gt,submenu:Sf,checked:v&&$?v.spaceId===et:s.space.id===et,handler:()=>oi({spaceId:et,destinationLabel:gt,spaceName:qo,skipConfirmation:$})})}else Mt.push({label:"Drafts",checked:v&&$?v.spaceId===et:s.space.id===et,disabled:!0,visible:!le})}return[...Gt,{label:"Move to\u2026",disabled:!0},...Mt]}async function Gn(S){let{location:$,showBackToDashboardItem:le=!0,skipConfirmation:Ke,hideDrafts:lt}=S;await it({items:mf(le,Ke,lt),location:$,within:document.body.getBoundingClientRect(),className:`${Ap} ${La}`})}let ff=(0,F.useCallback)(()=>{a.siteSettings.setActiveTab({tab:"plans"}).catch(q)},[]),Wo=async({spaceId:S,destinationLabel:$,collection:le,dismissModal:Ke=!0})=>{let lt=le&&le.id!=="personal"&&le.id!=="recent"?le.id:null,Gt="move-project-toast";try{await r.updateProject({spaceId:S,collectionId:lt}),s.space.id!==S&&await r.getACL(),B({type:"add",variant:"success",icon:"success",text:Nt.removeFromText(`Project moved to ${$}`),key:Gt})}catch(Mt){sl({err:Ii(Mt),targetTeamId:S,projectId:s.id,projectTitle:s.title,destination:$,onClickOpenPlans:ff})}C(!1),Ke&&(E(0),a.modalStore.dismiss())};async function oi(S){var le,Ke,lt;let $=(Ke=(le=s.collection)==null?void 0:le.id)!=null?Ke:"recent";if(!(((lt=S.collection)==null?void 0:lt.id)===$&&S.spaceId===s.space.id)){if(s.space.id!==S.spaceId){if(f(S),S.skipConfirmation)return;C(!0);return}await Wo(S)}}let ri=()=>{f(null),C(!1)},gf=()=>{b(null)};function ni(){u(!l)}function hf(S){window.location.href=`${Qt}?team=${S.id}&open-settings=1`}let[Fh,bf]=Dc(g.id),vf=a.wrapHandler(()=>{a.modalStore.dismiss(),bf(Date.now())}),si=(S,$)=>a.siteSettings.setActiveTab({tab:"plans",upsellSitePlan:S,upsellTeamPlan:$});function yf(){if(!g.isOnLatestTerms)return xe.active.type==="CompleteSignup"?F.default.createElement(dp,{accountApi:m}):F.default.createElement(cl,{fetchMe:m.fetchMe});if(xe.active.type==="Welcome")return F.default.createElement(ra,{isOn:"sites"},F.default.createElement(Mh,{onClose:vf,onOpenTutorialInCurrentProject:()=>a.chromeStore.isTutorialActive=!0}));if(xe.active.type==="DeprecatedDrafts")return F.default.createElement(sp,{user:g,project:s,onShowMoveProjectMenu:Gn,moveProjectDestination:v==null?void 0:v.destinationLabel,onConfirmMoveProject:async()=>{v&&await Wo({...v,dismissModal:!1})},onDismiss:()=>a.modalStore.set({type:"None",source:"automatic"})});if(xe.active.type==="CreateTeam")return F.default.createElement(Lh,{api:m,noEditRights:!0,onComplete:async S=>{let $=g.spaces.find(le=>le.ownerId===S);qe($)&&await Wo({spaceId:$.id,destinationLabel:$.displayName,dismissModal:!0})}});if(qe(W)&&k)return F.default.createElement(cn,{canUpgrade:W.permissions.write,teamId:W.ownerId,teamLicense:W.license,trackingPage:k.trackingPage,upsellType:k.upsell,onDismiss:()=>I(null),onUpgradePlan:si});if(T)return F.default.createElement(pl,{action:"archive",project:T,onConfirm:Ys,onClose:gf});if(v&&h)return F.default.createElement(nl,{isMovedFromDrafts:Be(s.space),teamName:v.spaceName,onCancel:ri,onConfirm:()=>Wo(v),onDismiss:ri});if(l)return F.default.createElement(Ah,{userTeams:We,onOpenTeamSettings:hf,api:m,onDismiss:ni});if(Js)return Js;if(Qs)return F.default.createElement(Yl,{onConfirm:zn,onDismiss:()=>Vn(null),unsupportedFeatures:Qs.unsupportedFeatures})}let Kn=(0,F.useMemo)(()=>W?qe(W)?W.ownerId:null:s.space.scope==="user"||s.userRole==="prototypeViewer"||s.userRole==="viewer"?null:s.space.ownerId,[W,s.space.ownerId,s.space.scope,s.userRole]);(0,F.useEffect)(()=>{Kn&&a.libraryStore.getLibraryForTeam(Kn).catch(q)},[Kn]),(0,F.useEffect)(()=>{Xl(s)},[s]);let{notice:Pf}=il();return al(Pf,W==null?void 0:W.ownerId),F.default.createElement(F.default.Fragment,null,F.default.createElement(_m,{projectState:t,user:g,isViewOnly:re,activePopover:z,onActivePopoverChange:E,onAccessChange:lf,onShareLinkAccessChange:pf,onShareLinkPasswordChange:uf,onCopyProjectURL:df,onShowMoveProjectMenu:Gn,moveProjectDestination:v==null?void 0:v.destinationLabel,onConfirmMoveProject:async()=>{v&&await Wo({...v,dismissModal:!1})},shareLink:Zs,shareLinkActions:br,onPublish:Nh,publishStatus:j,canPublish:a.publishStore.canPublish(a),defaultHostname:D,customHostname:Z,defaultHostnameDeployment:_,customHostnameDeployment:y,deploymentStrategy:H,onUpgradePlan:si}),F.default.createElement(Ia,null,yf()))}function Ym(){var f,h,C;let t=window.framerUser,e=(h=(f=window.bootstrap)==null?void 0:f.project)==null?void 0:h.id;if(!e)throw Error("Can\u2019t find project id");tl(),rl(),ol(t.id,e,!Y.isOn("sites")),el(e);let o=an({projectId:e}),r=a.treeStore.getSocketURL(o.socketURL),n=Dh({projectId:e,userId:t.id}),i=sc({url:r,documentConnection:n});(C=a.remoteDocument)==null||C.setSocket(i),a.publishStore.initialize(e,i);let[s,p]=Sl(e,i),c=Cl(Kt().api,i,s,p),l=eo("DocumentSettings",()=>{var k;return(k=a.documentSettings.activeNode)==null?void 0:k.id}),u=Uh(),m=ho(()=>new Ui(c));(0,He.useEffect)(()=>{a.webAssetsService=m,di.on(Ve).register(m),m.refresh().catch(q)},[m]);let g=(0,He.useRef)(null);(0,He.useEffect)(()=>{Tc(m,g)},[m,g]),(0,He.useEffect)(()=>{pc(c,m)},[c,m]);let T=Ll({channel:Ve,socket:i});Ml({channel:Ve,api:c,projectId:e,fileUpdatesService:T}),Dl({channel:Ve,api:c,socket:i,fileUpdatesService:T}),Ol({api:c,channel:Ve}),_l({api:c,channel:Ve}),El({channel:Ve,toast:B}),Il({api:c,channel:Ve}),(0,He.useEffect)(()=>{c.setInitialProject(sn.project)},[c]),(0,He.useEffect)(()=>i.onMessage(k=>{if(k.type!=="notifyProjectChange")return;let{scope:I}=k.value;I==="acl"?c.getACL():I==="assets"?m.refresh().catch(q):I==="metadata"?c.getProject():I==="sites"?a.publishStore.loadHostnames().catch(q):I==="settings"&&a.publishStore.loadProjectSettings().catch(q)}),[c,m,i]);let{isDarkMode:b}=De(),v=(0,He.useRef)(s);return v.current=s,(0,He.useEffect)(()=>{n.setGetUserInfoFunction(k=>{let I=v.current.aclById[k];if(!I)return null;let E=ya(I.color,b),j=I.user.name.split(" ")[0],D=v.current.userStates[k];return D?{...I.user,shortName:j,color:E,state:D}:null})},[n,b]),He.default.createElement(Wc.Provider,{value:qc(c)},He.default.createElement(zl,{socket:i,projectId:e,userId:t.id,documentConnection:n}),He.default.createElement(Ji,{mode:u},s.project&&He.default.createElement(Zm,{projectState:s,activeNodeId:l,initialUser:t,api:c,assetService:m,filePickerRef:g})),He.default.createElement(Bc,{ref:g}))}function Dh({projectId:t,userId:e}){let o=(0,He.useRef)();if(o.current===void 0){let r=a.getLocalDocumentHandler(t,e),n=new pn(r);r.setRemoteConnection(n),o.current=n}return o.current}function Uh(){let t=a.toolStore.useState(o=>o.shapeModeActive),e=a.scopeStore.useState(o=>jr(o.active));if(t)return"graphics";if(e)return"component"}Qc();oa();uc(hr.default.createElement(kc,null,hr.default.createElement(nn,{location:"project",title:"Failed to load project",description:hr.default.createElement(P,null,"Something unexpected happened on our end while loading the project.")},hr.default.createElement(Ym,null))),document.getElementById("root"));
//# sourceMappingURL=https://app.framerstatic.com/web.TVPVPKF6.js.map
